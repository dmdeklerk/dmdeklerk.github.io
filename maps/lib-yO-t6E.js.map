{"version":3,"names":[],"mappings":"","sources":["lib-yO-t6E.js"],"sourcesContent":["/**\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 David Chin\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function() {\n  'use strict';\n  angular.module('dc.inputAddOn', []).directive('inputAppend', directiveFn('append')).\n                                      directive('inputPrepend', directiveFn('prepend'));\n\n  function AddOnFilter(type, attrs, model) {\n    // Set props\n    this.type = type;\n    this.name = type === 'prepend' ? 'inputPrepend' : 'inputAppend';\n\n    // Add parser / formatter\n    model.$parsers.unshift(angular.bind(this, this.parse));\n    model.$formatters.unshift(angular.bind(this, this.format));\n\n    // Observe attr change\n    attrs.$observe(this.name, angular.bind(this, this.define));\n\n    // Define\n    this.define(attrs[this.name]);\n  }\n\n  AddOnFilter.prototype.format = function(value) {\n    var regexp;\n\n    if (this.type === 'prepend') {\n      regexp = new RegExp('^(' + this.escapedAddOn + ')');\n    } else {\n      regexp = new RegExp('(' + this.escapedAddOn + ')$');\n    }\n\n    return angular.isString(value) ? value.replace(regexp, '') : value;\n  };\n\n  AddOnFilter.prototype.parse = function(value) {\n    var regexp,\n        newValue;\n\n    if (this.type === 'prepend') {\n      regexp = new RegExp('^(' + this.escapedAddOn + ')?');\n      newValue = this.addOn + '$`';\n    } else {\n      regexp = new RegExp('(' + this.escapedAddOn + ')?$');\n      newValue = '$\\'' + this.addOn;\n    }\n\n    return angular.isString(value) ? value.replace(regexp, newValue) : value;\n  };\n\n  AddOnFilter.prototype.define = function(value) {\n    this.addOn = value;\n    this.escapedAddOn = this.escape(this.addOn);\n  };\n\n  AddOnFilter.prototype.escape = function(str) {\n    if (str) {\n      return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    } else {\n      return '';\n    }\n  };\n\n  function directiveFn(type) {\n    return function() {\n      return {\n        restrict: 'A',\n        require: 'ngModel',\n\n        link: function(scope, element, attrs, model) {\n          var addOnFilter = new AddOnFilter(type, attrs, model);\n        }\n      };\n    };\n  }\n})();\n/**\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 CodeDistillery\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function () {\n'use strict';\nangular.module('noCAPTCHA', []).provider('googleGrecaptcha', function googleGrecaptchaProvider(){\n  var language;\n\n  this.setLanguage = function (_language){\n    language = _language;\n  };\n\n  this.$get = [\n    '$q',\n    '$window',\n    '$document',\n    '$rootScope',\n    function googleGrecaptchaFactory($q, $window, $document, $rootScope){\n      var deferred = $q.defer();\n\n      $window.recaptchaOnloadCallback = function (){\n        $rootScope.$apply(function (){\n          deferred.resolve();\n        });\n      };\n\n      var s = $document[0].createElement('script');\n      var src = 'https://www.google.com/recaptcha/api.js?onload=recaptchaOnloadCallback&render=explicit';\n      s.type = 'application/javascript';\n\n      if (language) {\n        src += '&hl=' + language;\n      }\n      s.src = src;\n      $document[0].body.appendChild(s);\n\n      return deferred.promise;\n  }];\n})\n.provider('noCAPTCHA', ['googleGrecaptchaProvider', function noCaptchaProvider(googleGrecaptchaProvider){\n    var siteKey,\n      size,\n      theme;\n\n    this.setSiteKey = function (_siteKey){\n      siteKey = _siteKey;\n    };\n\n    this.setSize = function (_size){\n      size = _size;\n    };\n\n    this.setTheme = function (_theme){\n      theme = _theme;\n    };\n\n    this.setLanguage = function (language){\n      googleGrecaptchaProvider.setLanguage(language);\n    };\n\n    this.$get = function noCaptchaFactory(){\n      return {\n        theme: theme,\n        siteKey: siteKey,\n        size: size\n      };\n    };\n}])\n.directive('noCaptcha', [\n  'noCAPTCHA',\n  'googleGrecaptcha',\n  '$document',\n  '$window',\n  function (noCaptcha, googleGrecaptcha, $document, $window){\n    /**\n     * Removes all .pls-container elements\n     *\n     * This is a dirty workaround for fixing reCAPTCHAs bug\n     * which leaves obsolete elements that causes errors\n     * when closing dialogues or changing pages\n     *\n     * This will be removed as soon as Google fixes the bug\n     *\n     * Discussion: https://groups.google.com/forum/#!topic/recaptcha/miaW9qdVIgA\n     */\n    var removePLSContainers = function(){\n      // remove pls-containers\n      var plsContainers = $document[0].getElementsByClassName('pls-container');\n      for(var i = 0; i < plsContainers.length; i++){\n        var parent = plsContainers[i].parentNode;\n        while (parent.firstChild) {\n          parent.removeChild(parent.firstChild);\n        }\n      }\n    };\n\n    return {\n      restrict: 'EA',\n      scope: {\n        gRecaptchaResponse: '=',\n        siteKey: '@',\n        size: '@',\n        theme: '@',\n        control: '=?',\n        expiredCallback: '=?'\n      },\n      replace: true,\n      link: function (scope, element){\n        scope.control = scope.control || {};\n\n        var widgetId;\n        var grecaptchaCreateParameters;\n        var control = scope.control;\n\n        grecaptchaCreateParameters = {\n          sitekey: scope.siteKey || noCaptcha.siteKey,\n          size: scope.size || noCaptcha.size,\n          theme: scope.theme || noCaptcha.theme,\n          callback: function (r){\n            scope.$apply(function (){\n              scope.gRecaptchaResponse = r;\n            });\n          },\n          'expired-callback': function (){\n            if(scope.expiredCallback && typeof (scope.expiredCallback) === 'function') {\n              scope.$apply(function (){\n                scope.expiredCallback();\n              });\n            }\n          }\n        };\n\n        if(!grecaptchaCreateParameters.sitekey) {\n          throw new Error('Site Key is required');\n        }\n\n        googleGrecaptcha.then(function (){\n          widgetId = $window.grecaptcha.render(\n            element[0],\n            grecaptchaCreateParameters\n          );\n          control.reset = function (){\n            $window.grecaptcha.reset(widgetId);\n            scope.gRecaptchaResponse = null;\n          };\n        });\n\n        scope.$on('$destroy', function (){\n          if($window.grecaptcha) {\n            $window.grecaptcha.reset(widgetId);\n          }\n          removePLSContainers();\n        });\n      }\n    };\n  }]\n);\n})();\n// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n\n// Basic JavaScript BN library - subset useful for RSA encryption.\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary&0xffffff)==0xefcafe);\n\n// (public) Constructor\nfunction BigInteger(a,b,c) {\n  if(a != null)\n    if(\"number\" == typeof a) this.fromNumber(a,b,c);\n    else if(b == null && \"string\" != typeof a) this.fromString(a,256);\n    else this.fromString(a,b);\n}\n\n// return new, unset BigInteger\nfunction nbi() { return new BigInteger(null); }\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i,x,w,j,c,n) {\n  while(--n >= 0) {\n    var v = x*this[i++]+w[j]+c;\n    c = Math.floor(v/0x4000000);\n    w[j++] = v&0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i,x,w,j,c,n) {\n  var xl = x&0x7fff, xh = x>>15;\n  while(--n >= 0) {\n    var l = this[i]&0x7fff;\n    var h = this[i++]>>15;\n    var m = xh*l+h*xl;\n    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);\n    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);\n    w[j++] = l&0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i,x,w,j,c,n) {\n  var xl = x&0x3fff, xh = x>>14;\n  while(--n >= 0) {\n    var l = this[i]&0x3fff;\n    var h = this[i++]>>14;\n    var m = xh*l+h*xl;\n    l = xl*l+((m&0x3fff)<<14)+w[j]+c;\n    c = (l>>28)+(m>>14)+xh*h;\n    w[j++] = l&0xfffffff;\n  }\n  return c;\n}\nif(j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n}\nelse if(j_lm && (navigator.appName != \"Netscape\")) {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n}\nelse { // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\n\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1<<dbits)-1);\nBigInteger.prototype.DV = (1<<dbits);\n\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2,BI_FP);\nBigInteger.prototype.F1 = BI_FP-dbits;\nBigInteger.prototype.F2 = 2*dbits-BI_FP;\n\n// Digit conversions\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nvar BI_RC = new Array();\nvar rr,vv;\nrr = \"0\".charCodeAt(0);\nfor(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = \"a\".charCodeAt(0);\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = \"A\".charCodeAt(0);\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n\nfunction int2char(n) { return BI_RM.charAt(n); }\nfunction intAt(s,i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return (c==null)?-1:c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = (x<0)?-1:0;\n  if(x > 0) this[0] = x;\n  else if(x < -1) this[0] = x+this.DV;\n  else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) { var r = nbi(); r.fromInt(i); return r; }\n\n// (protected) set from string and radix\nfunction bnpFromString(s,b) {\n  var k;\n  if(b == 16) k = 4;\n  else if(b == 8) k = 3;\n  else if(b == 256) k = 8; // byte array\n  else if(b == 2) k = 1;\n  else if(b == 32) k = 5;\n  else if(b == 4) k = 2;\n  else { this.fromRadix(s,b); return; }\n  this.t = 0;\n  this.s = 0;\n  var i = s.length, mi = false, sh = 0;\n  while(--i >= 0) {\n    var x = (k==8)?s[i]&0xff:intAt(s,i);\n    if(x < 0) {\n      if(s.charAt(i) == \"-\") mi = true;\n      continue;\n    }\n    mi = false;\n    if(sh == 0)\n      this[this.t++] = x;\n    else if(sh+k > this.DB) {\n      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;\n      this[this.t++] = (x>>(this.DB-sh));\n    }\n    else\n      this[this.t-1] |= x<<sh;\n    sh += k;\n    if(sh >= this.DB) sh -= this.DB;\n  }\n  if(k == 8 && (s[0]&0x80) != 0) {\n    this.s = -1;\n    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;\n  }\n  this.clamp();\n  if(mi) BigInteger.ZERO.subTo(this,this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s&this.DM;\n  while(this.t > 0 && this[this.t-1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if(this.s < 0) return \"-\"+this.negate().toString(b);\n  var k;\n  if(b == 16) k = 4;\n  else if(b == 8) k = 3;\n  else if(b == 2) k = 1;\n  else if(b == 32) k = 5;\n  else if(b == 4) k = 2;\n  else return this.toRadix(b);\n  var km = (1<<k)-1, d, m = false, r = \"\", i = this.t;\n  var p = this.DB-(i*this.DB)%k;\n  if(i-- > 0) {\n    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = int2char(d); }\n    while(i >= 0) {\n      if(p < k) {\n        d = (this[i]&((1<<p)-1))<<(k-p);\n        d |= this[--i]>>(p+=this.DB-k);\n      }\n      else {\n        d = (this[i]>>(p-=k))&km;\n        if(p <= 0) { p += this.DB; --i; }\n      }\n      if(d > 0) m = true;\n      if(m) r += int2char(d);\n    }\n  }\n  return m?r:\"0\";\n}\n\n// (public) -this\nfunction bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }\n\n// (public) |this|\nfunction bnAbs() { return (this.s<0)?this.negate():this; }\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s-a.s;\n  if(r != 0) return r;\n  var i = this.t;\n  r = i-a.t;\n  if(r != 0) return (this.s<0)?-r:r;\n  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1, t;\n  if((t=x>>>16) != 0) { x = t; r += 16; }\n  if((t=x>>8) != 0) { x = t; r += 8; }\n  if((t=x>>4) != 0) { x = t; r += 4; }\n  if((t=x>>2) != 0) { x = t; r += 2; }\n  if((t=x>>1) != 0) { x = t; r += 1; }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if(this.t <= 0) return 0;\n  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n,r) {\n  var i;\n  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];\n  for(i = n-1; i >= 0; --i) r[i] = 0;\n  r.t = this.t+n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n,r) {\n  for(var i = n; i < this.t; ++i) r[i-n] = this[i];\n  r.t = Math.max(this.t-n,0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n,r) {\n  var bs = n%this.DB;\n  var cbs = this.DB-bs;\n  var bm = (1<<cbs)-1;\n  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;\n  for(i = this.t-1; i >= 0; --i) {\n    r[i+ds+1] = (this[i]>>cbs)|c;\n    c = (this[i]&bm)<<bs;\n  }\n  for(i = ds-1; i >= 0; --i) r[i] = 0;\n  r[ds] = c;\n  r.t = this.t+ds+1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n,r) {\n  r.s = this.s;\n  var ds = Math.floor(n/this.DB);\n  if(ds >= this.t) { r.t = 0; return; }\n  var bs = n%this.DB;\n  var cbs = this.DB-bs;\n  var bm = (1<<bs)-1;\n  r[0] = this[ds]>>bs;\n  for(var i = ds+1; i < this.t; ++i) {\n    r[i-ds-1] |= (this[i]&bm)<<cbs;\n    r[i-ds] = this[i]>>bs;\n  }\n  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;\n  r.t = this.t-ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a,r) {\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\n  while(i < m) {\n    c += this[i]-a[i];\n    r[i++] = c&this.DM;\n    c >>= this.DB;\n  }\n  if(a.t < this.t) {\n    c -= a.s;\n    while(i < this.t) {\n      c += this[i];\n      r[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  }\n  else {\n    c += this.s;\n    while(i < a.t) {\n      c -= a[i];\n      r[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = (c<0)?-1:0;\n  if(c < -1) r[i++] = this.DV+c;\n  else if(c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a,r) {\n  var x = this.abs(), y = a.abs();\n  var i = x.t;\n  r.t = i+y.t;\n  while(--i >= 0) r[i] = 0;\n  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);\n  r.s = 0;\n  r.clamp();\n  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2*x.t;\n  while(--i >= 0) r[i] = 0;\n  for(i = 0; i < x.t-1; ++i) {\n    var c = x.am(i,x[i],r,2*i,0,1);\n    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {\n      r[i+x.t] -= x.DV;\n      r[i+x.t+1] = 1;\n    }\n  }\n  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m,q,r) {\n  var pm = m.abs();\n  if(pm.t <= 0) return;\n  var pt = this.abs();\n  if(pt.t < pm.t) {\n    if(q != null) q.fromInt(0);\n    if(r != null) this.copyTo(r);\n    return;\n  }\n  if(r == null) r = nbi();\n  var y = nbi(), ts = this.s, ms = m.s;\n  var nsh = this.DB-nbits(pm[pm.t-1]);\t// normalize modulus\n  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }\n  else { pm.copyTo(y); pt.copyTo(r); }\n  var ys = y.t;\n  var y0 = y[ys-1];\n  if(y0 == 0) return;\n  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);\n  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;\n  var i = r.t, j = i-ys, t = (q==null)?nbi():q;\n  y.dlShiftTo(j,t);\n  if(r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t,r);\n  }\n  BigInteger.ONE.dlShiftTo(ys,t);\n  t.subTo(y,y);\t// \"negative\" y so we can replace sub with am later\n  while(y.t < ys) y[y.t++] = 0;\n  while(--j >= 0) {\n    // Estimate quotient digit\n    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);\n    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {\t// Try it out\n      y.dlShiftTo(j,t);\n      r.subTo(t,r);\n      while(r[i] < --qd) r.subTo(t,r);\n    }\n  }\n  if(q != null) {\n    r.drShiftTo(ys,q);\n    if(ts != ms) BigInteger.ZERO.subTo(q,q);\n  }\n  r.t = ys;\n  r.clamp();\n  if(nsh > 0) r.rShiftTo(nsh,r);\t// Denormalize remainder\n  if(ts < 0) BigInteger.ZERO.subTo(r,r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a,null,r);\n  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);\n  return r;\n}\n\n// Modular reduction using \"classic\" algorithm\nfunction Classic(m) { this.m = m; }\nfunction cConvert(x) {\n  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\n  else return x;\n}\nfunction cRevert(x) { return x; }\nfunction cReduce(x) { x.divRemTo(this.m,null,x); }\nfunction cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\nfunction cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\nClassic.prototype.convert = cConvert;\nClassic.prototype.revert = cRevert;\nClassic.prototype.reduce = cReduce;\nClassic.prototype.mulTo = cMulTo;\nClassic.prototype.sqrTo = cSqrTo;\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if(this.t < 1) return 0;\n  var x = this[0];\n  if((x&1) == 0) return 0;\n  var y = x&3;\t\t// y == 1/x mod 2^2\n  y = (y*(2-(x&0xf)*y))&0xf;\t// y == 1/x mod 2^4\n  y = (y*(2-(x&0xff)*y))&0xff;\t// y == 1/x mod 2^8\n  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;\t// y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = (y*(2-x*y%this.DV))%this.DV;\t\t// y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return (y>0)?this.DV-y:-y;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp&0x7fff;\n  this.mph = this.mp>>15;\n  this.um = (1<<(m.DB-15))-1;\n  this.mt2 = 2*m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t,r);\n  r.divRemTo(this.m,null,r);\n  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while(x.t <= this.mt2)\t// pad x so am has enough room later\n    x[x.t++] = 0;\n  for(var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i]&0x7fff;\n    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i+this.m.t;\n    x[j] += this.m.am(0,u0,x,i,0,this.m.t);\n    // propagate carry\n    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t,x);\n  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (protected) true iff this is even\nfunction bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }\n\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\nfunction bnpExp(e,z) {\n  if(e > 0xffffffff || e < 1) return BigInteger.ONE;\n  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;\n  g.copyTo(r);\n  while(--i >= 0) {\n    z.sqrTo(r,r2);\n    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);\n    else { var t = r; r = r2; r2 = t; }\n  }\n  return z.revert(r);\n}\n\n// (public) this^e % m, 0 <= e < 2^32\nfunction bnModPowInt(e,m) {\n  var z;\n  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\n  return this.exp(e,z);\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.isEven = bnpIsEven;\nBigInteger.prototype.exp = bnpExp;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.modPowInt = bnModPowInt;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n\n// Copyright (c) 2005-2009  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n\n// Extended JavaScript BN functions, required for RSA private ops.\n\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\n// Version 1.2: square() API, isProbablePrime fix\n\n// (public)\nfunction bnClone() { var r = nbi(); this.copyTo(r); return r; }\n\n// (public) return value as integer\nfunction bnIntValue() {\n  if(this.s < 0) {\n    if(this.t == 1) return this[0]-this.DV;\n    else if(this.t == 0) return -1;\n  }\n  else if(this.t == 1) return this[0];\n  else if(this.t == 0) return 0;\n  // assumes 16 < DB < 32\n  return ((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];\n}\n\n// (public) return value as byte\nfunction bnByteValue() { return (this.t==0)?this.s:(this[0]<<24)>>24; }\n\n// (public) return value as short (assumes DB>=16)\nfunction bnShortValue() { return (this.t==0)?this.s:(this[0]<<16)>>16; }\n\n// (protected) return x s.t. r^x < DV\nfunction bnpChunkSize(r) { return Math.floor(Math.LN2*this.DB/Math.log(r)); }\n\n// (public) 0 if this == 0, 1 if this > 0\nfunction bnSigNum() {\n  if(this.s < 0) return -1;\n  else if(this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\n  else return 1;\n}\n\n// (protected) convert to radix string\nfunction bnpToRadix(b) {\n  if(b == null) b = 10;\n  if(this.signum() == 0 || b < 2 || b > 36) return \"0\";\n  var cs = this.chunkSize(b);\n  var a = Math.pow(b,cs);\n  var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\n  this.divRemTo(d,y,z);\n  while(y.signum() > 0) {\n    r = (a+z.intValue()).toString(b).substr(1) + r;\n    y.divRemTo(d,y,z);\n  }\n  return z.intValue().toString(b) + r;\n}\n\n// (protected) convert from radix string\nfunction bnpFromRadix(s,b) {\n  this.fromInt(0);\n  if(b == null) b = 10;\n  var cs = this.chunkSize(b);\n  var d = Math.pow(b,cs), mi = false, j = 0, w = 0;\n  for(var i = 0; i < s.length; ++i) {\n    var x = intAt(s,i);\n    if(x < 0) {\n      if(s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\n      continue;\n    }\n    w = b*w+x;\n    if(++j >= cs) {\n      this.dMultiply(d);\n      this.dAddOffset(w,0);\n      j = 0;\n      w = 0;\n    }\n  }\n  if(j > 0) {\n    this.dMultiply(Math.pow(b,j));\n    this.dAddOffset(w,0);\n  }\n  if(mi) BigInteger.ZERO.subTo(this,this);\n}\n\n// (protected) alternate constructor\nfunction bnpFromNumber(a,b,c) {\n  if(\"number\" == typeof b) {\n    // new BigInteger(int,int,RNG)\n    if(a < 2) this.fromInt(1);\n    else {\n      this.fromNumber(a,c);\n      if(!this.testBit(a-1))\t// force MSB set\n        this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);\n      if(this.isEven()) this.dAddOffset(1,0); // force odd\n      while(!this.isProbablePrime(b)) {\n        this.dAddOffset(2,0);\n        if(this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a-1),this);\n      }\n    }\n  }\n  else {\n    // new BigInteger(int,RNG)\n    var x = new Array(), t = a&7;\n    x.length = (a>>3)+1;\n    b.nextBytes(x);\n    if(t > 0) x[0] &= ((1<<t)-1); else x[0] = 0;\n    this.fromString(x,256);\n  }\n}\n\n// (public) convert to bigendian byte array\nfunction bnToByteArray() {\n  var i = this.t, r = new Array();\n  r[0] = this.s;\n  var p = this.DB-(i*this.DB)%8, d, k = 0;\n  if(i-- > 0) {\n    if(p < this.DB && (d = this[i]>>p) != (this.s&this.DM)>>p)\n      r[k++] = d|(this.s<<(this.DB-p));\n    while(i >= 0) {\n      if(p < 8) {\n        d = (this[i]&((1<<p)-1))<<(8-p);\n        d |= this[--i]>>(p+=this.DB-8);\n      }\n      else {\n        d = (this[i]>>(p-=8))&0xff;\n        if(p <= 0) { p += this.DB; --i; }\n      }\n      if((d&0x80) != 0) d |= -256;\n      if(k == 0 && (this.s&0x80) != (d&0x80)) ++k;\n      if(k > 0 || d != this.s) r[k++] = d;\n    }\n  }\n  return r;\n}\n\nfunction bnEquals(a) { return(this.compareTo(a)==0); }\nfunction bnMin(a) { return(this.compareTo(a)<0)?this:a; }\nfunction bnMax(a) { return(this.compareTo(a)>0)?this:a; }\n\n// (protected) r = this op a (bitwise)\nfunction bnpBitwiseTo(a,op,r) {\n  var i, f, m = Math.min(a.t,this.t);\n  for(i = 0; i < m; ++i) r[i] = op(this[i],a[i]);\n  if(a.t < this.t) {\n    f = a.s&this.DM;\n    for(i = m; i < this.t; ++i) r[i] = op(this[i],f);\n    r.t = this.t;\n  }\n  else {\n    f = this.s&this.DM;\n    for(i = m; i < a.t; ++i) r[i] = op(f,a[i]);\n    r.t = a.t;\n  }\n  r.s = op(this.s,a.s);\n  r.clamp();\n}\n\n// (public) this & a\nfunction op_and(x,y) { return x&y; }\nfunction bnAnd(a) { var r = nbi(); this.bitwiseTo(a,op_and,r); return r; }\n\n// (public) this | a\nfunction op_or(x,y) { return x|y; }\nfunction bnOr(a) { var r = nbi(); this.bitwiseTo(a,op_or,r); return r; }\n\n// (public) this ^ a\nfunction op_xor(x,y) { return x^y; }\nfunction bnXor(a) { var r = nbi(); this.bitwiseTo(a,op_xor,r); return r; }\n\n// (public) this & ~a\nfunction op_andnot(x,y) { return x&~y; }\nfunction bnAndNot(a) { var r = nbi(); this.bitwiseTo(a,op_andnot,r); return r; }\n\n// (public) ~this\nfunction bnNot() {\n  var r = nbi();\n  for(var i = 0; i < this.t; ++i) r[i] = this.DM&~this[i];\n  r.t = this.t;\n  r.s = ~this.s;\n  return r;\n}\n\n// (public) this << n\nfunction bnShiftLeft(n) {\n  var r = nbi();\n  if(n < 0) this.rShiftTo(-n,r); else this.lShiftTo(n,r);\n  return r;\n}\n\n// (public) this >> n\nfunction bnShiftRight(n) {\n  var r = nbi();\n  if(n < 0) this.lShiftTo(-n,r); else this.rShiftTo(n,r);\n  return r;\n}\n\n// return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\n  if(x == 0) return -1;\n  var r = 0;\n  if((x&0xffff) == 0) { x >>= 16; r += 16; }\n  if((x&0xff) == 0) { x >>= 8; r += 8; }\n  if((x&0xf) == 0) { x >>= 4; r += 4; }\n  if((x&3) == 0) { x >>= 2; r += 2; }\n  if((x&1) == 0) ++r;\n  return r;\n}\n\n// (public) returns index of lowest 1-bit (or -1 if none)\nfunction bnGetLowestSetBit() {\n  for(var i = 0; i < this.t; ++i)\n    if(this[i] != 0) return i*this.DB+lbit(this[i]);\n  if(this.s < 0) return this.t*this.DB;\n  return -1;\n}\n\n// return number of 1 bits in x\nfunction cbit(x) {\n  var r = 0;\n  while(x != 0) { x &= x-1; ++r; }\n  return r;\n}\n\n// (public) return number of set bits\nfunction bnBitCount() {\n  var r = 0, x = this.s&this.DM;\n  for(var i = 0; i < this.t; ++i) r += cbit(this[i]^x);\n  return r;\n}\n\n// (public) true iff nth bit is set\nfunction bnTestBit(n) {\n  var j = Math.floor(n/this.DB);\n  if(j >= this.t) return(this.s!=0);\n  return((this[j]&(1<<(n%this.DB)))!=0);\n}\n\n// (protected) this op (1<<n)\nfunction bnpChangeBit(n,op) {\n  var r = BigInteger.ONE.shiftLeft(n);\n  this.bitwiseTo(r,op,r);\n  return r;\n}\n\n// (public) this | (1<<n)\nfunction bnSetBit(n) { return this.changeBit(n,op_or); }\n\n// (public) this & ~(1<<n)\nfunction bnClearBit(n) { return this.changeBit(n,op_andnot); }\n\n// (public) this ^ (1<<n)\nfunction bnFlipBit(n) { return this.changeBit(n,op_xor); }\n\n// (protected) r = this + a\nfunction bnpAddTo(a,r) {\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\n  while(i < m) {\n    c += this[i]+a[i];\n    r[i++] = c&this.DM;\n    c >>= this.DB;\n  }\n  if(a.t < this.t) {\n    c += a.s;\n    while(i < this.t) {\n      c += this[i];\n      r[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  }\n  else {\n    c += this.s;\n    while(i < a.t) {\n      c += a[i];\n      r[i++] = c&this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = (c<0)?-1:0;\n  if(c > 0) r[i++] = c;\n  else if(c < -1) r[i++] = this.DV+c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) { var r = nbi(); this.addTo(a,r); return r; }\n\n// (public) this - a\nfunction bnSubtract(a) { var r = nbi(); this.subTo(a,r); return r; }\n\n// (public) this * a\nfunction bnMultiply(a) { var r = nbi(); this.multiplyTo(a,r); return r; }\n\n// (public) this^2\nfunction bnSquare() { var r = nbi(); this.squareTo(r); return r; }\n\n// (public) this / a\nfunction bnDivide(a) { var r = nbi(); this.divRemTo(a,r,null); return r; }\n\n// (public) this % a\nfunction bnRemainder(a) { var r = nbi(); this.divRemTo(a,null,r); return r; }\n\n// (public) [this/a,this%a]\nfunction bnDivideAndRemainder(a) {\n  var q = nbi(), r = nbi();\n  this.divRemTo(a,q,r);\n  return new Array(q,r);\n}\n\n// (protected) this *= n, this >= 0, 1 < n < DV\nfunction bnpDMultiply(n) {\n  this[this.t] = this.am(0,n-1,this,0,0,this.t);\n  ++this.t;\n  this.clamp();\n}\n\n// (protected) this += n << w words, this >= 0\nfunction bnpDAddOffset(n,w) {\n  if(n == 0) return;\n  while(this.t <= w) this[this.t++] = 0;\n  this[w] += n;\n  while(this[w] >= this.DV) {\n    this[w] -= this.DV;\n    if(++w >= this.t) this[this.t++] = 0;\n    ++this[w];\n  }\n}\n\n// A \"null\" reducer\nfunction NullExp() {}\nfunction nNop(x) { return x; }\nfunction nMulTo(x,y,r) { x.multiplyTo(y,r); }\nfunction nSqrTo(x,r) { x.squareTo(r); }\n\nNullExp.prototype.convert = nNop;\nNullExp.prototype.revert = nNop;\nNullExp.prototype.mulTo = nMulTo;\nNullExp.prototype.sqrTo = nSqrTo;\n\n// (public) this^e\nfunction bnPow(e) { return this.exp(e,new NullExp()); }\n\n// (protected) r = lower n words of \"this * a\", a.t <= n\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyLowerTo(a,n,r) {\n  var i = Math.min(this.t+a.t,n);\n  r.s = 0; // assumes a,this >= 0\n  r.t = i;\n  while(i > 0) r[--i] = 0;\n  var j;\n  for(j = r.t-this.t; i < j; ++i) r[i+this.t] = this.am(0,a[i],r,i,0,this.t);\n  for(j = Math.min(a.t,n); i < j; ++i) this.am(0,a[i],r,i,0,n-i);\n  r.clamp();\n}\n\n// (protected) r = \"this * a\" without lower n words, n > 0\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyUpperTo(a,n,r) {\n  --n;\n  var i = r.t = this.t+a.t-n;\n  r.s = 0; // assumes a,this >= 0\n  while(--i >= 0) r[i] = 0;\n  for(i = Math.max(n-this.t,0); i < a.t; ++i)\n    r[this.t+i-n] = this.am(n-i,a[i],r,0,0,this.t+i-n);\n  r.clamp();\n  r.drShiftTo(1,r);\n}\n\n// Barrett modular reduction\nfunction Barrett(m) {\n  // setup Barrett\n  this.r2 = nbi();\n  this.q3 = nbi();\n  BigInteger.ONE.dlShiftTo(2*m.t,this.r2);\n  this.mu = this.r2.divide(m);\n  this.m = m;\n}\n\nfunction barrettConvert(x) {\n  if(x.s < 0 || x.t > 2*this.m.t) return x.mod(this.m);\n  else if(x.compareTo(this.m) < 0) return x;\n  else { var r = nbi(); x.copyTo(r); this.reduce(r); return r; }\n}\n\nfunction barrettRevert(x) { return x; }\n\n// x = x mod m (HAC 14.42)\nfunction barrettReduce(x) {\n  x.drShiftTo(this.m.t-1,this.r2);\n  if(x.t > this.m.t+1) { x.t = this.m.t+1; x.clamp(); }\n  this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);\n  this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);\n  while(x.compareTo(this.r2) < 0) x.dAddOffset(1,this.m.t+1);\n  x.subTo(this.r2,x);\n  while(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\n}\n\n// r = x^2 mod m; x != r\nfunction barrettSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\n\n// r = x*y mod m; x,y != r\nfunction barrettMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\n\nBarrett.prototype.convert = barrettConvert;\nBarrett.prototype.revert = barrettRevert;\nBarrett.prototype.reduce = barrettReduce;\nBarrett.prototype.mulTo = barrettMulTo;\nBarrett.prototype.sqrTo = barrettSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e,m) {\n  var i = e.bitLength(), k, r = nbv(1), z;\n  if(i <= 0) return r;\n  else if(i < 18) k = 1;\n  else if(i < 48) k = 3;\n  else if(i < 144) k = 4;\n  else if(i < 768) k = 5;\n  else k = 6;\n  if(i < 8)\n    z = new Classic(m);\n  else if(m.isEven())\n    z = new Barrett(m);\n  else\n    z = new Montgomery(m);\n\n  // precomputation\n  var g = new Array(), n = 3, k1 = k-1, km = (1<<k)-1;\n  g[1] = z.convert(this);\n  if(k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1],g2);\n    while(n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2,g[n-2],g[n]);\n      n += 2;\n    }\n  }\n\n  var j = e.t-1, w, is1 = true, r2 = nbi(), t;\n  i = nbits(e[j])-1;\n  while(j >= 0) {\n    if(i >= k1) w = (e[j]>>(i-k1))&km;\n    else {\n      w = (e[j]&((1<<(i+1))-1))<<(k1-i);\n      if(j > 0) w |= e[j-1]>>(this.DB+i-k1);\n    }\n\n    n = k;\n    while((w&1) == 0) { w >>= 1; --n; }\n    if((i -= n) < 0) { i += this.DB; --j; }\n    if(is1) {\t// ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    }\n    else {\n      while(n > 1) { z.sqrTo(r,r2); z.sqrTo(r2,r); n -= 2; }\n      if(n > 0) z.sqrTo(r,r2); else { t = r; r = r2; r2 = t; }\n      z.mulTo(r2,g[w],r);\n    }\n\n    while(j >= 0 && (e[j]&(1<<i)) == 0) {\n      z.sqrTo(r,r2); t = r; r = r2; r2 = t;\n      if(--i < 0) { i = this.DB-1; --j; }\n    }\n  }\n  return z.revert(r);\n}\n\n// (public) gcd(this,a) (HAC 14.54)\nfunction bnGCD(a) {\n  var x = (this.s<0)?this.negate():this.clone();\n  var y = (a.s<0)?a.negate():a.clone();\n  if(x.compareTo(y) < 0) { var t = x; x = y; y = t; }\n  var i = x.getLowestSetBit(), g = y.getLowestSetBit();\n  if(g < 0) return x;\n  if(i < g) g = i;\n  if(g > 0) {\n    x.rShiftTo(g,x);\n    y.rShiftTo(g,y);\n  }\n  while(x.signum() > 0) {\n    if((i = x.getLowestSetBit()) > 0) x.rShiftTo(i,x);\n    if((i = y.getLowestSetBit()) > 0) y.rShiftTo(i,y);\n    if(x.compareTo(y) >= 0) {\n      x.subTo(y,x);\n      x.rShiftTo(1,x);\n    }\n    else {\n      y.subTo(x,y);\n      y.rShiftTo(1,y);\n    }\n  }\n  if(g > 0) y.lShiftTo(g,y);\n  return y;\n}\n\n// (protected) this % n, n < 2^26\nfunction bnpModInt(n) {\n  if(n <= 0) return 0;\n  var d = this.DV%n, r = (this.s<0)?n-1:0;\n  if(this.t > 0)\n    if(d == 0) r = this[0]%n;\n    else for(var i = this.t-1; i >= 0; --i) r = (d*r+this[i])%n;\n  return r;\n}\n\n// (public) 1/this % m (HAC 14.61)\nfunction bnModInverse(m) {\n  var ac = m.isEven();\n  if((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\n  var u = m.clone(), v = this.clone();\n  var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\n  while(u.signum() != 0) {\n    while(u.isEven()) {\n      u.rShiftTo(1,u);\n      if(ac) {\n        if(!a.isEven() || !b.isEven()) { a.addTo(this,a); b.subTo(m,b); }\n        a.rShiftTo(1,a);\n      }\n      else if(!b.isEven()) b.subTo(m,b);\n      b.rShiftTo(1,b);\n    }\n    while(v.isEven()) {\n      v.rShiftTo(1,v);\n      if(ac) {\n        if(!c.isEven() || !d.isEven()) { c.addTo(this,c); d.subTo(m,d); }\n        c.rShiftTo(1,c);\n      }\n      else if(!d.isEven()) d.subTo(m,d);\n      d.rShiftTo(1,d);\n    }\n    if(u.compareTo(v) >= 0) {\n      u.subTo(v,u);\n      if(ac) a.subTo(c,a);\n      b.subTo(d,b);\n    }\n    else {\n      v.subTo(u,v);\n      if(ac) c.subTo(a,c);\n      d.subTo(b,d);\n    }\n  }\n  if(v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\n  if(d.compareTo(m) >= 0) return d.subtract(m);\n  if(d.signum() < 0) d.addTo(m,d); else return d;\n  if(d.signum() < 0) return d.add(m); else return d;\n}\n\nvar lowprimes = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];\nvar lplim = (1<<26)/lowprimes[lowprimes.length-1];\n\n// (public) test primality with certainty >= 1-.5^t\nfunction bnIsProbablePrime(t) {\n  var i, x = this.abs();\n  if(x.t == 1 && x[0] <= lowprimes[lowprimes.length-1]) {\n    for(i = 0; i < lowprimes.length; ++i)\n      if(x[0] == lowprimes[i]) return true;\n    return false;\n  }\n  if(x.isEven()) return false;\n  i = 1;\n  while(i < lowprimes.length) {\n    var m = lowprimes[i], j = i+1;\n    while(j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n    m = x.modInt(m);\n    while(i < j) if(m%lowprimes[i++] == 0) return false;\n  }\n  return x.millerRabin(t);\n}\n\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\nfunction bnpMillerRabin(t) {\n  var n1 = this.subtract(BigInteger.ONE);\n  var k = n1.getLowestSetBit();\n  if(k <= 0) return false;\n  var r = n1.shiftRight(k);\n  t = (t+1)>>1;\n  if(t > lowprimes.length) t = lowprimes.length;\n  var a = nbi();\n  for(var i = 0; i < t; ++i) {\n    //Pick bases at random, instead of starting at 2\n    a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);\n    var y = a.modPow(r,this);\n    if(y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n      var j = 1;\n      while(j++ < k && y.compareTo(n1) != 0) {\n        y = y.modPowInt(2,this);\n        if(y.compareTo(BigInteger.ONE) == 0) return false;\n      }\n      if(y.compareTo(n1) != 0) return false;\n    }\n  }\n  return true;\n}\n\n// protected\nBigInteger.prototype.chunkSize = bnpChunkSize;\nBigInteger.prototype.toRadix = bnpToRadix;\nBigInteger.prototype.fromRadix = bnpFromRadix;\nBigInteger.prototype.fromNumber = bnpFromNumber;\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\nBigInteger.prototype.changeBit = bnpChangeBit;\nBigInteger.prototype.addTo = bnpAddTo;\nBigInteger.prototype.dMultiply = bnpDMultiply;\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\nBigInteger.prototype.modInt = bnpModInt;\nBigInteger.prototype.millerRabin = bnpMillerRabin;\n\n// public\nBigInteger.prototype.clone = bnClone;\nBigInteger.prototype.intValue = bnIntValue;\nBigInteger.prototype.byteValue = bnByteValue;\nBigInteger.prototype.shortValue = bnShortValue;\nBigInteger.prototype.signum = bnSigNum;\nBigInteger.prototype.toByteArray = bnToByteArray;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.min = bnMin;\nBigInteger.prototype.max = bnMax;\nBigInteger.prototype.and = bnAnd;\nBigInteger.prototype.or = bnOr;\nBigInteger.prototype.xor = bnXor;\nBigInteger.prototype.andNot = bnAndNot;\nBigInteger.prototype.not = bnNot;\nBigInteger.prototype.shiftLeft = bnShiftLeft;\nBigInteger.prototype.shiftRight = bnShiftRight;\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\nBigInteger.prototype.bitCount = bnBitCount;\nBigInteger.prototype.testBit = bnTestBit;\nBigInteger.prototype.setBit = bnSetBit;\nBigInteger.prototype.clearBit = bnClearBit;\nBigInteger.prototype.flipBit = bnFlipBit;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.remainder = bnRemainder;\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\nBigInteger.prototype.modPow = bnModPow;\nBigInteger.prototype.modInverse = bnModInverse;\nBigInteger.prototype.pow = bnPow;\nBigInteger.prototype.gcd = bnGCD;\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n\n// JSBN-specific extension\nBigInteger.prototype.square = bnSquare;\n\n// BigInteger interfaces not implemented in jsbn:\n\n// BigInteger(int signum, byte[] magnitude)\n// double doubleValue()\n// float floatValue()\n// int hashCode()\n// long longValue()\n// static BigInteger valueOf(long val)\n\nangular.element(document).ready(function() {\n  function Menu(cutLabel, copyLabel, pasteLabel) {\n    var gui = require('nw.gui')\n      , menu = new gui.Menu()\n\n      , cut = new gui.MenuItem({\n        label: cutLabel || \"Cut\"\n        , click: function() {\n          document.execCommand(\"cut\");\n          console.log('Menu:', 'cutted to clipboard');\n        }\n      })\n\n      , copy = new gui.MenuItem({\n        label: copyLabel || \"Copy\"\n        , click: function() {\n          document.execCommand(\"copy\");\n          console.log('Menu:', 'copied to clipboard');\n        }\n      })\n\n      , paste = new gui.MenuItem({\n        label: pasteLabel || \"Paste\"\n        , click: function() {\n          document.execCommand(\"paste\");\n          console.log('Menu:', 'pasted to textarea');\n        }\n      })\n    ;\n\n    menu.append(cut);\n    menu.append(copy);\n    menu.append(paste);\n\n    return menu;\n  }\n\n  function isDisabled(parent) {\n    while (parent && parent.parentNode !== null) {\n      if (parent.hasAttribute('disable-nw-menu')) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n    return false;\n  }\n\n  function installMinimizeToTray() {\n    var gui = require('nw.gui');\n    var win = gui.Window.get();\n    var tray;\n\n    win.on('minimize', function() {\n      this.hide();\n      tray = new gui.Tray({ icon: 'images/fim_coin.png' });\n      tray.on('click', function() {\n        win.show();\n        this.remove();\n        tray = null;\n      });\n    });\n  }\n\n  try {\n    if (isNodeJS) {\n      var menu = new Menu(/* pass cut, copy, paste labels if you need i18n*/);\n      $(document).on(\"contextmenu\", function(e) {\n        if (!isDisabled(e.target)) {\n          e.preventDefault();\n          menu.popup(e.originalEvent.x, e.originalEvent.y);\n        }\n      });\n      /*if (navigator.appVersion.indexOf(\"Win\")!=-1) {\n        installMinimizeToTray();\n      }*/\n    }\n  } catch (e) {\n    console.log('nodewebkit-specific', e);\n  }\n});\n/**\n * @fileoverview\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n * \n * @author davidshimjs\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\nvar QRCode;\n\n(function () {\n\t//---------------------------------------------------------------------\n\t// QRCode for JavaScript\n\t//\n\t// Copyright (c) 2009 Kazuhiko Arase\n\t//\n\t// URL: http://www.d-project.com/\n\t//\n\t// Licensed under the MIT license:\n\t//   http://www.opensource.org/licenses/mit-license.php\n\t//\n\t// The word \"QR Code\" is registered trademark of \n\t// DENSO WAVE INCORPORATED\n\t//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n\t//\n\t//---------------------------------------------------------------------\n\tfunction QR8bitByte(data) {\n\t\tthis.mode = QRMode.MODE_8BIT_BYTE;\n\t\tthis.data = data;\n\t\tthis.parsedData = [];\n\n\t\t// Added to support UTF-8 Characters\n\t\tfor (var i = 0, l = this.data.length; i < l; i++) {\n\t\t\tvar byteArray = [];\n\t\t\tvar code = this.data.charCodeAt(i);\n\n\t\t\tif (code > 0x10000) {\n\t\t\t\tbyteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n\t\t\t\tbyteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[3] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x800) {\n\t\t\t\tbyteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[2] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x80) {\n\t\t\t\tbyteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n\t\t\t\tbyteArray[1] = 0x80 | (code & 0x3F);\n\t\t\t} else {\n\t\t\t\tbyteArray[0] = code;\n\t\t\t}\n\n\t\t\tthis.parsedData.push(byteArray);\n\t\t}\n\n\t\tthis.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n\t\tif (this.parsedData.length != this.data.length) {\n\t\t\tthis.parsedData.unshift(191);\n\t\t\tthis.parsedData.unshift(187);\n\t\t\tthis.parsedData.unshift(239);\n\t\t}\n\t}\n\n\tQR8bitByte.prototype = {\n\t\tgetLength: function (buffer) {\n\t\t\treturn this.parsedData.length;\n\t\t},\n\t\twrite: function (buffer) {\n\t\t\tfor (var i = 0, l = this.parsedData.length; i < l; i++) {\n\t\t\t\tbuffer.put(this.parsedData[i], 8);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n\t\tthis.typeNumber = typeNumber;\n\t\tthis.errorCorrectLevel = errorCorrectLevel;\n\t\tthis.modules = null;\n\t\tthis.moduleCount = 0;\n\t\tthis.dataCache = null;\n\t\tthis.dataList = [];\n\t}\n\n\tQRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\n\treturn this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\n\tthis.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\n\tif(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\n\tthis.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\n\treturn pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\n\treturn qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\n\tthis.modules[r][6]=(r%2==0);}\n\tfor(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\n\tthis.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\n\tfor(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\n\tfor(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\n\tfor(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\n\tthis.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\n\tvar mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\n\tthis.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\n\trow+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\n\tvar totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\n\tif(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n\t+buffer.getLengthInBits()\n\t+\">\"\n\t+totalDataCount*8\n\t+\")\");}\n\tif(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\n\twhile(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\n\twhile(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD1,8);}\n\treturn QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\n\toffset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\n\tvar totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\n\tvar data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\n\tfor(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\n\treturn data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\n\treturn((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\n\treturn(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\n\treturn digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\n\treturn a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\n\tfor(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\n\tif(r==0&&c==0){continue;}\n\tif(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\n\tif(sameCount>5){lostPoint+=(3+sameCount-5);}}}\n\tfor(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\n\tfor(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\n\tfor(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\n\tvar darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\n\tvar ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\n\treturn QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\n\twhile(n>=256){n-=255;}\n\treturn QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\n\tfor(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\n\tfor(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\n\tfunction QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\n\tvar offset=0;while(offset<num.length&&num[offset]==0){offset++;}\n\tthis.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\n\tQRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\n\treturn new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\n\tvar ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\n\tfor(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\n\treturn new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\n\tQRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\n\tvar length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\n\treturn list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\n\tQRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\n\tif(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\n\tthis.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\t\n\tfunction _isSupportCanvas() {\n\t\treturn typeof CanvasRenderingContext2D != \"undefined\";\n\t}\n\t\n\t// android 2.x doesn't support Data-URI spec\n\tfunction _getAndroid() {\n\t\tvar android = false;\n\t\tvar sAgent = navigator.userAgent;\n\t\t\n\t\tif (/android/i.test(sAgent)) { // android\n\t\t\tandroid = true;\n\t\t\tvar aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\n\t\t\t\n\t\t\tif (aMat && aMat[1]) {\n\t\t\t\tandroid = parseFloat(aMat[1]);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn android;\n\t}\n\t\n\tvar svgDrawer = (function() {\n\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\n\t\tDrawing.prototype.draw = function (oQRCode) {\n\t\t\tvar _htOption = this._htOption;\n\t\t\tvar _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\n\t\t\tthis.clear();\n\n\t\t\tfunction makeSVG(tag, attrs) {\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\t\t\t\tfor (var k in attrs)\n\t\t\t\t\tif (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tvar svg = makeSVG(\"svg\" , {'viewBox': '0 0 ' + String(nCount) + \" \" + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});\n\t\t\tsvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n\t\t\t_el.appendChild(svg);\n\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorLight, \"width\": \"100%\", \"height\": \"100%\"}));\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorDark, \"width\": \"1\", \"height\": \"1\", \"id\": \"template\"}));\n\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tif (oQRCode.isDark(row, col)) {\n\t\t\t\t\t\tvar child = makeSVG(\"use\", {\"x\": String(col), \"y\": String(row)});\n\t\t\t\t\t\tchild.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", \"#template\")\n\t\t\t\t\t\tsvg.appendChild(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tDrawing.prototype.clear = function () {\n\t\t\twhile (this._el.hasChildNodes())\n\t\t\t\tthis._el.removeChild(this._el.lastChild);\n\t\t};\n\t\treturn Drawing;\n\t})();\n\n\tvar useSVG = document.documentElement.tagName.toLowerCase() === \"svg\";\n\n\t// Drawing in DOM by using Table tag\n\tvar Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode\n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\t\t\tvar aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\taHTML.push('<tr>');\n\t\t\t\t\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\taHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\taHTML.push('</tr>');\n\t\t\t}\n\t\t\t\n\t\t\taHTML.push('</table>');\n\t\t\t_el.innerHTML = aHTML.join('');\n\t\t\t\n\t\t\t// Fix the margin values as real size.\n\t\t\tvar elTable = _el.childNodes[0];\n\t\t\tvar nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;\n\t\t\tvar nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;\n\t\t\t\n\t\t\tif (nLeftMarginTable > 0 && nTopMarginTable > 0) {\n\t\t\t\telTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";\t\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._el.innerHTML = '';\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})() : (function () { // Drawing in Canvas\n\t\tfunction _onMakeImage() {\n\t\t\tthis._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n\t\t\tthis._elImage.style.display = \"block\";\n\t\t\tthis._elCanvas.style.display = \"none\";\t\t\t\n\t\t}\n\t\t\n\t\t// Android 2.1 bug workaround\n\t\t// http://code.google.com/p/android/issues/detail?id=5141\n\t\tif (this._android && this._android <= 2.1) {\n\t    \tvar factor = 1 / window.devicePixelRatio;\n\t        var drawImage = CanvasRenderingContext2D.prototype.drawImage; \n\t    \tCanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {\n\t    \t\tif ((\"nodeName\" in image) && /img/i.test(image.nodeName)) {\n\t\t        \tfor (var i = arguments.length - 1; i >= 1; i--) {\n\t\t            \targuments[i] = arguments[i] * factor;\n\t\t        \t}\n\t    \t\t} else if (typeof dw == \"undefined\") {\n\t    \t\t\targuments[1] *= factor;\n\t    \t\t\targuments[2] *= factor;\n\t    \t\t\targuments[3] *= factor;\n\t    \t\t\targuments[4] *= factor;\n\t    \t\t}\n\t    \t\t\n\t        \tdrawImage.apply(this, arguments); \n\t    \t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Check whether the user's browser supports Data URI or not\n\t\t * \n\t\t * @private\n\t\t * @param {Function} fSuccess Occurs if it supports Data URI\n\t\t * @param {Function} fFail Occurs if it doesn't support Data URI\n\t\t */\n\t\tfunction _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function() {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function() {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n\t\t};\n\t\t\n\t\t/**\n\t\t * Drawing QRCode by using canvas\n\t\t * \n\t\t * @constructor\n\t\t * @param {HTMLElement} el\n\t\t * @param {Object} htOption QRCode Options \n\t\t */\n\t\tvar Drawing = function (el, htOption) {\n    \t\tthis._bIsPainted = false;\n    \t\tthis._android = _getAndroid();\n\t\t\n\t\t\tthis._htOption = htOption;\n\t\t\tthis._elCanvas = document.createElement(\"canvas\");\n\t\t\tthis._elCanvas.width = htOption.width;\n\t\t\tthis._elCanvas.height = htOption.height;\n\t\t\tel.appendChild(this._elCanvas);\n\t\t\tthis._el = el;\n\t\t\tthis._oContext = this._elCanvas.getContext(\"2d\");\n\t\t\tthis._bIsPainted = false;\n\t\t\tthis._elImage = document.createElement(\"img\");\n\t\t\tthis._elImage.alt = \"Scan me!\";\n\t\t\tthis._elImage.style.display = \"none\";\n\t\t\tthis._el.appendChild(this._elImage);\n\t\t\tthis._bSupportDataURI = null;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode \n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _elImage = this._elImage;\n            var _oContext = this._oContext;\n            var _htOption = this._htOption;\n            \n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = _htOption.width / nCount;\n\t\t\tvar nHeight = _htOption.height / nCount;\n\t\t\tvar nRoundedWidth = Math.round(nWidth);\n\t\t\tvar nRoundedHeight = Math.round(nHeight);\n\n\t\t\t_elImage.style.display = \"none\";\n\t\t\tthis.clear();\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tvar bIsDark = oQRCode.isDark(row, col);\n\t\t\t\t\tvar nLeft = col * nWidth;\n\t\t\t\t\tvar nTop = row * nHeight;\n\t\t\t\t\t_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n\t\t\t\t\t_oContext.lineWidth = 1;\n\t\t\t\t\t_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\t\t\t\t\t\n\t\t\t\t\t_oContext.fillRect(nLeft, nTop, nWidth, nHeight);\n\t\t\t\t\t\n\t\t\t\t\t// 안티 앨리어싱 방지 처리\n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.floor(nLeft) + 0.5,\n\t\t\t\t\t\tMath.floor(nTop) + 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.ceil(nLeft) - 0.5,\n\t\t\t\t\t\tMath.ceil(nTop) - 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._bIsPainted = true;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Make the image from Canvas if the browser supports Data URI.\n\t\t */\n\t\tDrawing.prototype.makeImage = function () {\n\t\t\tif (this._bIsPainted) {\n\t\t\t\t_safeSetDataURI.call(this, _onMakeImage);\n\t\t\t}\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Return whether the QRCode is painted or not\n\t\t * \n\t\t * @return {Boolean}\n\t\t */\n\t\tDrawing.prototype.isPainted = function () {\n\t\t\treturn this._bIsPainted;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n\t\t\tthis._bIsPainted = false;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @private\n\t\t * @param {Number} nNumber\n\t\t */\n\t\tDrawing.prototype.round = function (nNumber) {\n\t\t\tif (!nNumber) {\n\t\t\t\treturn nNumber;\n\t\t\t}\n\t\t\t\n\t\t\treturn Math.floor(nNumber * 1000) / 1000;\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})();\n\t\n\t/**\n\t * Get the type by string length\n\t * \n\t * @private\n\t * @param {String} sText\n\t * @param {Number} nCorrectLevel\n\t * @return {Number} type\n\t */\n\tfunction _getTypeNumber(sText, nCorrectLevel) {\t\t\t\n\t\tvar nType = 1;\n\t\tvar length = _getUTF8Length(sText);\n\t\t\n\t\tfor (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n\t\t\tvar nLimit = 0;\n\t\t\t\n\t\t\tswitch (nCorrectLevel) {\n\t\t\t\tcase QRErrorCorrectLevel.L :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][0];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.M :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.Q :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][2];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.H :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][3];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tif (length <= nLimit) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tnType++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (nType > QRCodeLimitLength.length) {\n\t\t\tthrow new Error(\"Too long data\");\n\t\t}\n\t\t\n\t\treturn nType;\n\t}\n\n\tfunction _getUTF8Length(sText) {\n\t\tvar replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n\t\treturn replacedText.length + (replacedText.length != sText ? 3 : 0);\n\t}\n\t\n\t/**\n\t * @class QRCode\n\t * @constructor\n\t * @example \n\t * new QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\n\t *\n\t * @example\n\t * var oQRCode = new QRCode(\"test\", {\n\t *    text : \"http://naver.com\",\n\t *    width : 128,\n\t *    height : 128\n\t * });\n\t * \n\t * oQRCode.clear(); // Clear the QRCode.\n\t * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the QRCode.\n\t *\n\t * @param {HTMLElement|String} el target element or 'id' attribute of element.\n\t * @param {Object|String} vOption\n\t * @param {String} vOption.text QRCode link data\n\t * @param {Number} [vOption.width=256]\n\t * @param {Number} [vOption.height=256]\n\t * @param {String} [vOption.colorDark=\"#000000\"]\n\t * @param {String} [vOption.colorLight=\"#ffffff\"]\n\t * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] \n\t */\n\tQRCode = function (el, vOption) {\n\t\tthis._htOption = {\n\t\t\twidth : 256, \n\t\t\theight : 256,\n\t\t\ttypeNumber : 4,\n\t\t\tcolorDark : \"#000000\",\n\t\t\tcolorLight : \"#ffffff\",\n\t\t\tcorrectLevel : QRErrorCorrectLevel.H\n\t\t};\n\t\t\n\t\tif (typeof vOption === 'string') {\n\t\t\tvOption\t= {\n\t\t\t\ttext : vOption\n\t\t\t};\n\t\t}\n\t\t\n\t\t// Overwrites options\n\t\tif (vOption) {\n\t\t\tfor (var i in vOption) {\n\t\t\t\tthis._htOption[i] = vOption[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (typeof el == \"string\") {\n\t\t\tel = document.getElementById(el);\n\t\t}\n\n\t\tif (this._htOption.useSVG) {\n\t\t\tDrawing = svgDrawer;\n\t\t}\n\t\t\n\t\tthis._android = _getAndroid();\n\t\tthis._el = el;\n\t\tthis._oQRCode = null;\n\t\tthis._oDrawing = new Drawing(this._el, this._htOption);\n\t\t\n\t\tif (this._htOption.text) {\n\t\t\tthis.makeCode(this._htOption.text);\t\n\t\t}\n\t};\n\t\n\t/**\n\t * Make the QRCode\n\t * \n\t * @param {String} sText link data\n\t */\n\tQRCode.prototype.makeCode = function (sText) {\n\t\tthis._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n\t\tthis._oQRCode.addData(sText);\n\t\tthis._oQRCode.make();\n\t\tthis._el.title = sText;\n\t\tthis._oDrawing.draw(this._oQRCode);\t\t\t\n\t\tthis.makeImage();\n\t};\n\t\n\t/**\n\t * Make the Image from Canvas element\n\t * - It occurs automatically\n\t * - Android below 3 doesn't support Data-URI spec.\n\t * \n\t * @private\n\t */\n\tQRCode.prototype.makeImage = function () {\n\t\tif (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\n\t\t\tthis._oDrawing.makeImage();\n\t\t}\n\t};\n\t\n\t/**\n\t * Clear the QRCode\n\t */\n\tQRCode.prototype.clear = function () {\n\t\tthis._oDrawing.clear();\n\t};\n\t\n\t/**\n\t * @name QRCode.CorrectLevel\n\t */\n\tQRCode.CorrectLevel = QRErrorCorrectLevel;\n})();\n\n/*jslint indent: 2, browser: true, bitwise: true, plusplus: true */\nvar twemoji = (function (\n  /*! Copyright Twitter Inc. and other contributors. Licensed under MIT *//*\n    https://github.com/twitter/twemoji/blob/gh-pages/LICENSE\n  */\n\n  // WARNING:   this file is generated automatically via\n  //            `node twemoji-generator.js`\n  //            please update its `createTwemoji` function\n  //            at the bottom of the same file instead.\n\n) {\n  'use strict';\n\n  /*jshint maxparams:4 */\n\n  var\n    // the exported module object\n    twemoji = {\n\n\n    /////////////////////////\n    //      properties     //\n    /////////////////////////\n\n      // default assets url, by default will be Twitter Inc. CDN\n      base: (location.protocol === 'https:' ? 'https:' : 'http:') +\n            '//twemoji.maxcdn.com/',\n\n      // default assets file extensions, by default '.png'\n      ext: '.png',\n\n      // default assets/folder size, by default \"36x36\"\n      // available via Twitter CDN: 16, 36, 72\n      size: '36x36',\n\n      // default class name, by default 'emoji'\n      className: 'emoji',\n\n      // basic utilities / helpers to convert code points\n      // to JavaScript surrogates and vice versa\n      convert: {\n\n        /**\n         * Given an HEX codepoint, returns UTF16 surrogate pairs.\n         *\n         * @param   string  generic codepoint, i.e. '1F4A9'\n         * @return  string  codepoint transformed into utf16 surrogates pair,\n         *          i.e. \\uD83D\\uDCA9\n         *\n         * @example\n         *  twemoji.convert.fromCodePoint('1f1e8');\n         *  // \"\\ud83c\\udde8\"\n         *\n         *  '1f1e8-1f1f3'.split('-').map(twemoji.convert.fromCodePoint).join('')\n         *  // \"\\ud83c\\udde8\\ud83c\\uddf3\"\n         */\n        fromCodePoint: fromCodePoint,\n\n        /**\n         * Given UTF16 surrogate pairs, returns the equivalent HEX codepoint.\n         *\n         * @param   string  generic utf16 surrogates pair, i.e. \\uD83D\\uDCA9\n         * @param   string  optional separator for double code points, default='-'\n         * @return  string  utf16 transformed into codepoint, i.e. '1F4A9'\n         *\n         * @example\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3');\n         *  // \"1f1e8-1f1f3\"\n         *\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3', '~');\n         *  // \"1f1e8~1f1f3\"\n         */\n        toCodePoint: toCodePoint\n      },\n\n\n    /////////////////////////\n    //       methods       //\n    /////////////////////////\n\n      /**\n       * User first: used to remove missing images\n       * preserving the original text intent when\n       * a fallback for network problems is desired.\n       * Automatically added to Image nodes via DOM\n       * It could be recycled for string operations via:\n       *  $('img.emoji').on('error', twemoji.onerror)\n       */\n      onerror: function onerror() {\n        if (this.parentNode) {\n          this.parentNode.replaceChild(createText(this.alt), this);\n        }\n      },\n\n      /**\n       * Main method/logic to generate either <img> tags or HTMLImage nodes.\n       *  \"emojify\" a generic text or DOM Element.\n       *\n       * @overloads\n       *\n       * String replacement for `innerHTML` or server side operations\n       *  twemoji.parse(string);\n       *  twemoji.parse(string, Function);\n       *  twemoji.parse(string, Object);\n       *\n       * HTMLElement tree parsing for safer operations over existing DOM\n       *  twemoji.parse(HTMLElement);\n       *  twemoji.parse(HTMLElement, Function);\n       *  twemoji.parse(HTMLElement, Object);\n       *\n       * @param   string|HTMLElement  the source to parse and enrich with emoji.\n       *\n       *          string              replace emoji matches with <img> tags.\n       *                              Mainly used to inject emoji via `innerHTML`\n       *                              It does **not** parse the string or validate it,\n       *                              it simply replaces found emoji with a tag.\n       *                              NOTE: be sure this won't affect security.\n       *\n       *          HTMLElement         walk through the DOM tree and find emoji\n       *                              that are inside **text node only** (nodeType === 3)\n       *                              Mainly used to put emoji in already generated DOM\n       *                              without compromising surrounding nodes and\n       *                              **avoiding** the usage of `innerHTML`.\n       *                              NOTE: Using DOM elements instead of strings should\n       *                              improve security without compromising too much\n       *                              performance compared with a less safe `innerHTML`.\n       *\n       * @param   Function|Object  [optional]\n       *                              either the callback that will be invoked or an object\n       *                              with all properties to use per each found emoji.\n       *\n       *          Function            if specified, this will be invoked per each emoji\n       *                              that has been found through the RegExp except\n       *                              those follwed by the invariant \\uFE0E (\"as text\").\n       *                              Once invoked, parameters will be:\n       *\n       *                                codePoint:string  the lower case HEX code point\n       *                                                  i.e. \"1f4a9\"\n       *\n       *                                options:Object    all info for this parsing operation\n       *\n       *                                variant:char      the optional \\uFE0F (\"as image\")\n       *                                                  variant, in case this info\n       *                                                  is anyhow meaningful.\n       *                                                  By default this is ignored.\n       *\n       *                              If such callback will return a falsy value instead\n       *                              of a valid `src` to use for the image, nothing will\n       *                              actually change for that specific emoji.\n       *\n       *\n       *          Object              if specified, an object containing the following properties\n       *\n       *            callback   Function  the callback to invoke per each found emoji.\n       *            base       string    the base url, by default twemoji.base\n       *            ext        string    the image extension, by default twemoji.ext\n       *            size       string    the assets size, by default twemoji.size\n       *\n       * @example\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\");\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/2764.gif\"> emoji!\n       *\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\", function(icon, options, variant) {\n       *    return '/assets/' + icon + '.gif';\n       *  });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/2764.gif\"> emoji!\n       *\n       *\n       * twemoji.parse(\"I \\u2764\\uFE0F emoji!\", {\n       *   size: 72,\n       *   callback: function(icon, options, variant) {\n       *     return '/assets/' + options.size + '/' + icon + options.ext;\n       *   }\n       * });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"❤️\" src=\"/assets/72x72/2764.png\"> emoji!\n       *\n       */\n      parse: parse,\n\n      /**\n       * Given a string, invokes the callback argument\n       *  per each emoji found in such string.\n       * This is the most raw version used by\n       *  the .parse(string) method itself.\n       *\n       * @param   string    generic string to parse\n       * @param   Function  a generic callback that will be\n       *                    invoked to replace the content.\n       *                    This calback wil receive standard\n       *                    String.prototype.replace(str, callback)\n       *                    arguments such:\n       *  callback(\n       *    match,  // the emoji match\n       *    icon,   // the emoji text (same as text)\n       *    variant // either '\\uFE0E' or '\\uFE0F', if present\n       *  );\n       *\n       *                    and others commonly received via replace.\n       *\n       *  NOTE: When the variant \\uFE0E is found, remember this is an explicit intent\n       *  from the user: the emoji should **not** be replaced with an image.\n       *  In \\uFE0F case one, it's the opposite, it should be graphic.\n       *  This utility convetion is that only \\uFE0E are not translated into images.\n       */\n      replace: replace,\n\n      /**\n       * Simplify string tests against emoji.\n       *\n       * @param   string  some text that might contain emoji\n       * @return  boolean true if any emoji was found, false otherwise.\n       *\n       * @example\n       *\n       *  if (twemoji.test(someContent)) {\n       *    console.log(\"emoji All The Things!\");\n       *  }\n       */\n      test: test\n    },\n\n    // used to escape HTML special chars in attributes\n    escaper = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      \"'\": '&#39;',\n      '\"': '&quot;'\n    },\n\n    // RegExp based on emoji's official Unicode standards\n    // http://www.unicode.org/Public/UNIDATA/EmojiSources.txt\n    re = /((?:\\ud83c\\udde8\\ud83c\\uddf3|\\ud83c\\uddfa\\ud83c\\uddf8|\\ud83c\\uddf7\\ud83c\\uddfa|\\ud83c\\uddf0\\ud83c\\uddf7|\\ud83c\\uddef\\ud83c\\uddf5|\\ud83c\\uddee\\ud83c\\uddf9|\\ud83c\\uddec\\ud83c\\udde7|\\ud83c\\uddeb\\ud83c\\uddf7|\\ud83c\\uddea\\ud83c\\uddf8|\\ud83c\\udde9\\ud83c\\uddea|\\u0039\\ufe0f?\\u20e3|\\u0038\\ufe0f?\\u20e3|\\u0037\\ufe0f?\\u20e3|\\u0036\\ufe0f?\\u20e3|\\u0035\\ufe0f?\\u20e3|\\u0034\\ufe0f?\\u20e3|\\u0033\\ufe0f?\\u20e3|\\u0032\\ufe0f?\\u20e3|\\u0031\\ufe0f?\\u20e3|\\u0030\\ufe0f?\\u20e3|\\u0023\\ufe0f?\\u20e3|\\ud83d\\udeb3|\\ud83d\\udeb1|\\ud83d\\udeb0|\\ud83d\\udeaf|\\ud83d\\udeae|\\ud83d\\udea6|\\ud83d\\udea3|\\ud83d\\udea1|\\ud83d\\udea0|\\ud83d\\ude9f|\\ud83d\\ude9e|\\ud83d\\ude9d|\\ud83d\\ude9c|\\ud83d\\ude9b|\\ud83d\\ude98|\\ud83d\\ude96|\\ud83d\\ude94|\\ud83d\\ude90|\\ud83d\\ude8e|\\ud83d\\ude8d|\\ud83d\\ude8b|\\ud83d\\ude8a|\\ud83d\\ude88|\\ud83d\\ude86|\\ud83d\\ude82|\\ud83d\\ude81|\\ud83d\\ude36|\\ud83d\\ude34|\\ud83d\\ude2f|\\ud83d\\ude2e|\\ud83d\\ude2c|\\ud83d\\ude27|\\ud83d\\ude26|\\ud83d\\ude1f|\\ud83d\\ude1b|\\ud83d\\ude19|\\ud83d\\ude17|\\ud83d\\ude15|\\ud83d\\ude11|\\ud83d\\ude10|\\ud83d\\ude0e|\\ud83d\\ude08|\\ud83d\\ude07|\\ud83d\\ude00|\\ud83d\\udd67|\\ud83d\\udd66|\\ud83d\\udd65|\\ud83d\\udd64|\\ud83d\\udd63|\\ud83d\\udd62|\\ud83d\\udd61|\\ud83d\\udd60|\\ud83d\\udd5f|\\ud83d\\udd5e|\\ud83d\\udd5d|\\ud83d\\udd5c|\\ud83d\\udd2d|\\ud83d\\udd2c|\\ud83d\\udd15|\\ud83d\\udd09|\\ud83d\\udd08|\\ud83d\\udd07|\\ud83d\\udd06|\\ud83d\\udd05|\\ud83d\\udd04|\\ud83d\\udd02|\\ud83d\\udd01|\\ud83d\\udd00|\\ud83d\\udcf5|\\ud83d\\udcef|\\ud83d\\udced|\\ud83d\\udcec|\\ud83d\\udcb7|\\ud83d\\udcb6|\\ud83d\\udcad|\\ud83d\\udc6d|\\ud83d\\udc6c|\\ud83d\\udc65|\\ud83d\\udc2a|\\ud83d\\udc16|\\ud83d\\udc15|\\ud83d\\udc13|\\ud83d\\udc10|\\ud83d\\udc0f|\\ud83d\\udc0b|\\ud83d\\udc0a|\\ud83d\\udc09|\\ud83d\\udc08|\\ud83d\\udc07|\\ud83d\\udc06|\\ud83d\\udc05|\\ud83d\\udc04|\\ud83d\\udc03|\\ud83d\\udc02|\\ud83d\\udc01|\\ud83d\\udc00|\\ud83c\\udfe4|\\ud83c\\udfc9|\\ud83c\\udfc7|\\ud83c\\udf7c|\\ud83c\\udf50|\\ud83c\\udf4b|\\ud83c\\udf33|\\ud83c\\udf32|\\ud83c\\udf1e|\\ud83c\\udf1d|\\ud83c\\udf1c|\\ud83c\\udf1a|\\ud83c\\udf18|\\ud83c\\udccf|\\ud83c\\udd8e|\\ud83c\\udd91|\\ud83c\\udd92|\\ud83c\\udd93|\\ud83c\\udd94|\\ud83c\\udd95|\\ud83c\\udd96|\\ud83c\\udd97|\\ud83c\\udd98|\\ud83c\\udd99|\\ud83c\\udd9a|\\ud83d\\udc77|\\ud83d\\udec5|\\ud83d\\udec4|\\ud83d\\udec3|\\ud83d\\udec2|\\ud83d\\udec1|\\ud83d\\udebf|\\ud83d\\udeb8|\\ud83d\\udeb7|\\ud83d\\udeb5|\\ud83c\\ude01|\\ud83c\\ude32|\\ud83c\\ude33|\\ud83c\\ude34|\\ud83c\\ude35|\\ud83c\\ude36|\\ud83c\\ude38|\\ud83c\\ude39|\\ud83c\\ude3a|\\ud83c\\ude50|\\ud83c\\ude51|\\ud83c\\udf00|\\ud83c\\udf01|\\ud83c\\udf02|\\ud83c\\udf03|\\ud83c\\udf04|\\ud83c\\udf05|\\ud83c\\udf06|\\ud83c\\udf07|\\ud83c\\udf08|\\ud83c\\udf09|\\ud83c\\udf0a|\\ud83c\\udf0b|\\ud83c\\udf0c|\\ud83c\\udf0f|\\ud83c\\udf11|\\ud83c\\udf13|\\ud83c\\udf14|\\ud83c\\udf15|\\ud83c\\udf19|\\ud83c\\udf1b|\\ud83c\\udf1f|\\ud83c\\udf20|\\ud83c\\udf30|\\ud83c\\udf31|\\ud83c\\udf34|\\ud83c\\udf35|\\ud83c\\udf37|\\ud83c\\udf38|\\ud83c\\udf39|\\ud83c\\udf3a|\\ud83c\\udf3b|\\ud83c\\udf3c|\\ud83c\\udf3d|\\ud83c\\udf3e|\\ud83c\\udf3f|\\ud83c\\udf40|\\ud83c\\udf41|\\ud83c\\udf42|\\ud83c\\udf43|\\ud83c\\udf44|\\ud83c\\udf45|\\ud83c\\udf46|\\ud83c\\udf47|\\ud83c\\udf48|\\ud83c\\udf49|\\ud83c\\udf4a|\\ud83c\\udf4c|\\ud83c\\udf4d|\\ud83c\\udf4e|\\ud83c\\udf4f|\\ud83c\\udf51|\\ud83c\\udf52|\\ud83c\\udf53|\\ud83c\\udf54|\\ud83c\\udf55|\\ud83c\\udf56|\\ud83c\\udf57|\\ud83c\\udf58|\\ud83c\\udf59|\\ud83c\\udf5a|\\ud83c\\udf5b|\\ud83c\\udf5c|\\ud83c\\udf5d|\\ud83c\\udf5e|\\ud83c\\udf5f|\\ud83c\\udf60|\\ud83c\\udf61|\\ud83c\\udf62|\\ud83c\\udf63|\\ud83c\\udf64|\\ud83c\\udf65|\\ud83c\\udf66|\\ud83c\\udf67|\\ud83c\\udf68|\\ud83c\\udf69|\\ud83c\\udf6a|\\ud83c\\udf6b|\\ud83c\\udf6c|\\ud83c\\udf6d|\\ud83c\\udf6e|\\ud83c\\udf6f|\\ud83c\\udf70|\\ud83c\\udf71|\\ud83c\\udf72|\\ud83c\\udf73|\\ud83c\\udf74|\\ud83c\\udf75|\\ud83c\\udf76|\\ud83c\\udf77|\\ud83c\\udf78|\\ud83c\\udf79|\\ud83c\\udf7a|\\ud83c\\udf7b|\\ud83c\\udf80|\\ud83c\\udf81|\\ud83c\\udf82|\\ud83c\\udf83|\\ud83c\\udf84|\\ud83c\\udf85|\\ud83c\\udf86|\\ud83c\\udf87|\\ud83c\\udf88|\\ud83c\\udf89|\\ud83c\\udf8a|\\ud83c\\udf8b|\\ud83c\\udf8c|\\ud83c\\udf8d|\\ud83c\\udf8e|\\ud83c\\udf8f|\\ud83c\\udf90|\\ud83c\\udf91|\\ud83c\\udf92|\\ud83c\\udf93|\\ud83c\\udfa0|\\ud83c\\udfa1|\\ud83c\\udfa2|\\ud83c\\udfa3|\\ud83c\\udfa4|\\ud83c\\udfa5|\\ud83c\\udfa6|\\ud83c\\udfa7|\\ud83c\\udfa8|\\ud83c\\udfa9|\\ud83c\\udfaa|\\ud83c\\udfab|\\ud83c\\udfac|\\ud83c\\udfad|\\ud83c\\udfae|\\ud83c\\udfaf|\\ud83c\\udfb0|\\ud83c\\udfb1|\\ud83c\\udfb2|\\ud83c\\udfb3|\\ud83c\\udfb4|\\ud83c\\udfb5|\\ud83c\\udfb6|\\ud83c\\udfb7|\\ud83c\\udfb8|\\ud83c\\udfb9|\\ud83c\\udfba|\\ud83c\\udfbb|\\ud83c\\udfbc|\\ud83c\\udfbd|\\ud83c\\udfbe|\\ud83c\\udfbf|\\ud83c\\udfc0|\\ud83c\\udfc1|\\ud83c\\udfc2|\\ud83c\\udfc3|\\ud83c\\udfc4|\\ud83c\\udfc6|\\ud83c\\udfc8|\\ud83c\\udfca|\\ud83c\\udfe0|\\ud83c\\udfe1|\\ud83c\\udfe2|\\ud83c\\udfe3|\\ud83c\\udfe5|\\ud83c\\udfe6|\\ud83c\\udfe7|\\ud83c\\udfe8|\\ud83c\\udfe9|\\ud83c\\udfea|\\ud83c\\udfeb|\\ud83c\\udfec|\\ud83c\\udfed|\\ud83c\\udfee|\\ud83c\\udfef|\\ud83c\\udff0|\\ud83d\\udc0c|\\ud83d\\udc0d|\\ud83d\\udc0e|\\ud83d\\udc11|\\ud83d\\udc12|\\ud83d\\udc14|\\ud83d\\udc17|\\ud83d\\udc18|\\ud83d\\udc19|\\ud83d\\udc1a|\\ud83d\\udc1b|\\ud83d\\udc1c|\\ud83d\\udc1d|\\ud83d\\udc1e|\\ud83d\\udc1f|\\ud83d\\udc20|\\ud83d\\udc21|\\ud83d\\udc22|\\ud83d\\udc23|\\ud83d\\udc24|\\ud83d\\udc25|\\ud83d\\udc26|\\ud83d\\udc27|\\ud83d\\udc28|\\ud83d\\udc29|\\ud83d\\udc2b|\\ud83d\\udc2c|\\ud83d\\udc2d|\\ud83d\\udc2e|\\ud83d\\udc2f|\\ud83d\\udc30|\\ud83d\\udc31|\\ud83d\\udc32|\\ud83d\\udc33|\\ud83d\\udc34|\\ud83d\\udc35|\\ud83d\\udc36|\\ud83d\\udc37|\\ud83d\\udc38|\\ud83d\\udc39|\\ud83d\\udc3a|\\ud83d\\udc3b|\\ud83d\\udc3c|\\ud83d\\udc3d|\\ud83d\\udc3e|\\ud83d\\udc40|\\ud83d\\udc42|\\ud83d\\udc43|\\ud83d\\udc44|\\ud83d\\udc45|\\ud83d\\udc46|\\ud83d\\udc47|\\ud83d\\udc48|\\ud83d\\udc49|\\ud83d\\udc4a|\\ud83d\\udc4b|\\ud83d\\udc4c|\\ud83d\\udc4d|\\ud83d\\udc4e|\\ud83d\\udc4f|\\ud83d\\udc50|\\ud83d\\udc51|\\ud83d\\udc52|\\ud83d\\udc53|\\ud83d\\udc54|\\ud83d\\udc55|\\ud83d\\udc56|\\ud83d\\udc57|\\ud83d\\udc58|\\ud83d\\udc59|\\ud83d\\udc5a|\\ud83d\\udc5b|\\ud83d\\udc5c|\\ud83d\\udc5d|\\ud83d\\udc5e|\\ud83d\\udc5f|\\ud83d\\udc60|\\ud83d\\udc61|\\ud83d\\udc62|\\ud83d\\udc63|\\ud83d\\udc64|\\ud83d\\udc66|\\ud83d\\udc67|\\ud83d\\udc68|\\ud83d\\udc69|\\ud83d\\udc6a|\\ud83d\\udc6b|\\ud83d\\udc6e|\\ud83d\\udc6f|\\ud83d\\udc70|\\ud83d\\udc71|\\ud83d\\udc72|\\ud83d\\udc73|\\ud83d\\udc74|\\ud83d\\udc75|\\ud83d\\udc76|\\ud83d\\udeb4|\\ud83d\\udc78|\\ud83d\\udc79|\\ud83d\\udc7a|\\ud83d\\udc7b|\\ud83d\\udc7c|\\ud83d\\udc7d|\\ud83d\\udc7e|\\ud83d\\udc7f|\\ud83d\\udc80|\\ud83d\\udc81|\\ud83d\\udc82|\\ud83d\\udc83|\\ud83d\\udc84|\\ud83d\\udc85|\\ud83d\\udc86|\\ud83d\\udc87|\\ud83d\\udc88|\\ud83d\\udc89|\\ud83d\\udc8a|\\ud83d\\udc8b|\\ud83d\\udc8c|\\ud83d\\udc8d|\\ud83d\\udc8e|\\ud83d\\udc8f|\\ud83d\\udc90|\\ud83d\\udc91|\\ud83d\\udc92|\\ud83d\\udc93|\\ud83d\\udc94|\\ud83d\\udc95|\\ud83d\\udc96|\\ud83d\\udc97|\\ud83d\\udc98|\\ud83d\\udc99|\\ud83d\\udc9a|\\ud83d\\udc9b|\\ud83d\\udc9c|\\ud83d\\udc9d|\\ud83d\\udc9e|\\ud83d\\udc9f|\\ud83d\\udca0|\\ud83d\\udca1|\\ud83d\\udca2|\\ud83d\\udca3|\\ud83d\\udca4|\\ud83d\\udca5|\\ud83d\\udca6|\\ud83d\\udca7|\\ud83d\\udca8|\\ud83d\\udca9|\\ud83d\\udcaa|\\ud83d\\udcab|\\ud83d\\udcac|\\ud83d\\udcae|\\ud83d\\udcaf|\\ud83d\\udcb0|\\ud83d\\udcb1|\\ud83d\\udcb2|\\ud83d\\udcb3|\\ud83d\\udcb4|\\ud83d\\udcb5|\\ud83d\\udcb8|\\ud83d\\udcb9|\\ud83d\\udcba|\\ud83d\\udcbb|\\ud83d\\udcbc|\\ud83d\\udcbd|\\ud83d\\udcbe|\\ud83d\\udcbf|\\ud83d\\udcc0|\\ud83d\\udcc1|\\ud83d\\udcc2|\\ud83d\\udcc3|\\ud83d\\udcc4|\\ud83d\\udcc5|\\ud83d\\udcc6|\\ud83d\\udcc7|\\ud83d\\udcc8|\\ud83d\\udcc9|\\ud83d\\udcca|\\ud83d\\udccb|\\ud83d\\udccc|\\ud83d\\udccd|\\ud83d\\udcce|\\ud83d\\udccf|\\ud83d\\udcd0|\\ud83d\\udcd1|\\ud83d\\udcd2|\\ud83d\\udcd3|\\ud83d\\udcd4|\\ud83d\\udcd5|\\ud83d\\udcd6|\\ud83d\\udcd7|\\ud83d\\udcd8|\\ud83d\\udcd9|\\ud83d\\udcda|\\ud83d\\udcdb|\\ud83d\\udcdc|\\ud83d\\udcdd|\\ud83d\\udcde|\\ud83d\\udcdf|\\ud83d\\udce0|\\ud83d\\udce1|\\ud83d\\udce2|\\ud83d\\udce3|\\ud83d\\udce4|\\ud83d\\udce5|\\ud83d\\udce6|\\ud83d\\udce7|\\ud83d\\udce8|\\ud83d\\udce9|\\ud83d\\udcea|\\ud83d\\udceb|\\ud83d\\udcee|\\ud83d\\udcf0|\\ud83d\\udcf1|\\ud83d\\udcf2|\\ud83d\\udcf3|\\ud83d\\udcf4|\\ud83d\\udcf6|\\ud83d\\udcf7|\\ud83d\\udcf9|\\ud83d\\udcfa|\\ud83d\\udcfb|\\ud83d\\udcfc|\\ud83d\\udd03|\\ud83d\\udd0a|\\ud83d\\udd0b|\\ud83d\\udd0c|\\ud83d\\udd0d|\\ud83d\\udd0e|\\ud83d\\udd0f|\\ud83d\\udd10|\\ud83d\\udd11|\\ud83d\\udd12|\\ud83d\\udd13|\\ud83d\\udd14|\\ud83d\\udd16|\\ud83d\\udd17|\\ud83d\\udd18|\\ud83d\\udd19|\\ud83d\\udd1a|\\ud83d\\udd1b|\\ud83d\\udd1c|\\ud83d\\udd1d|\\ud83d\\udd1e|\\ud83d\\udd1f|\\ud83d\\udd20|\\ud83d\\udd21|\\ud83d\\udd22|\\ud83d\\udd23|\\ud83d\\udd24|\\ud83d\\udd25|\\ud83d\\udd26|\\ud83d\\udd27|\\ud83d\\udd28|\\ud83d\\udd29|\\ud83d\\udd2a|\\ud83d\\udd2b|\\ud83d\\udd2e|\\ud83d\\udd2f|\\ud83d\\udd30|\\ud83d\\udd31|\\ud83d\\udd32|\\ud83d\\udd33|\\ud83d\\udd34|\\ud83d\\udd35|\\ud83d\\udd36|\\ud83d\\udd37|\\ud83d\\udd38|\\ud83d\\udd39|\\ud83d\\udd3a|\\ud83d\\udd3b|\\ud83d\\udd3c|\\ud83d\\udd3d|\\ud83d\\udd50|\\ud83d\\udd51|\\ud83d\\udd52|\\ud83d\\udd53|\\ud83d\\udd54|\\ud83d\\udd55|\\ud83d\\udd56|\\ud83d\\udd57|\\ud83d\\udd58|\\ud83d\\udd59|\\ud83d\\udd5a|\\ud83d\\udd5b|\\ud83d\\uddfb|\\ud83d\\uddfc|\\ud83d\\uddfd|\\ud83d\\uddfe|\\ud83d\\uddff|\\ud83d\\ude01|\\ud83d\\ude02|\\ud83d\\ude03|\\ud83d\\ude04|\\ud83d\\ude05|\\ud83d\\ude06|\\ud83d\\ude09|\\ud83d\\ude0a|\\ud83d\\ude0b|\\ud83d\\ude0c|\\ud83d\\ude0d|\\ud83d\\ude0f|\\ud83d\\ude12|\\ud83d\\ude13|\\ud83d\\ude14|\\ud83d\\ude16|\\ud83d\\ude18|\\ud83d\\ude1a|\\ud83d\\ude1c|\\ud83d\\ude1d|\\ud83d\\ude1e|\\ud83d\\ude20|\\ud83d\\ude21|\\ud83d\\ude22|\\ud83d\\ude23|\\ud83d\\ude24|\\ud83d\\ude25|\\ud83d\\ude28|\\ud83d\\ude29|\\ud83d\\ude2a|\\ud83d\\ude2b|\\ud83d\\ude2d|\\ud83d\\ude30|\\ud83d\\ude31|\\ud83d\\ude32|\\ud83d\\ude33|\\ud83d\\ude35|\\ud83d\\ude37|\\ud83d\\ude38|\\ud83d\\ude39|\\ud83d\\ude3a|\\ud83d\\ude3b|\\ud83d\\ude3c|\\ud83d\\ude3d|\\ud83d\\ude3e|\\ud83d\\ude3f|\\ud83d\\ude40|\\ud83d\\ude45|\\ud83d\\ude46|\\ud83d\\ude47|\\ud83d\\ude48|\\ud83d\\ude49|\\ud83d\\ude4a|\\ud83d\\ude4b|\\ud83d\\ude4c|\\ud83d\\ude4d|\\ud83d\\ude4e|\\ud83d\\ude4f|\\ud83d\\ude80|\\ud83d\\ude83|\\ud83d\\ude84|\\ud83d\\ude85|\\ud83d\\ude87|\\ud83d\\ude89|\\ud83d\\ude8c|\\ud83d\\ude8f|\\ud83d\\ude91|\\ud83d\\ude92|\\ud83d\\ude93|\\ud83d\\ude95|\\ud83d\\ude97|\\ud83d\\ude99|\\ud83d\\ude9a|\\ud83d\\udea2|\\ud83d\\udea4|\\ud83d\\udea5|\\ud83d\\udea7|\\ud83d\\udea8|\\ud83d\\udea9|\\ud83d\\udeaa|\\ud83d\\udeab|\\ud83d\\udeac|\\ud83d\\udead|\\ud83d\\udeb2|\\ud83d\\udeb6|\\ud83d\\udeb9|\\ud83d\\udeba|\\ud83d\\udebb|\\ud83d\\udebc|\\ud83d\\udebd|\\ud83d\\udebe|\\ud83d\\udec0|\\ud83c\\udde6|\\ud83c\\udde7|\\ud83c\\udde8|\\ud83c\\udde9|\\ud83c\\uddea|\\ud83c\\uddeb|\\ud83c\\uddec|\\ud83c\\udded|\\ud83c\\uddee|\\ud83c\\uddef|\\ud83c\\uddf0|\\ud83c\\uddf1|\\ud83c\\uddf2|\\ud83c\\uddf3|\\ud83c\\uddf4|\\ud83c\\uddf5|\\ud83c\\uddf6|\\ud83c\\uddf7|\\ud83c\\uddf8|\\ud83c\\uddf9|\\ud83c\\uddfa|\\ud83c\\uddfb|\\ud83c\\uddfc|\\ud83c\\uddfd|\\ud83c\\uddfe|\\ud83c\\uddff|\\ud83c\\udf0d|\\ud83c\\udf0e|\\ud83c\\udf10|\\ud83c\\udf12|\\ud83c\\udf16|\\ud83c\\udf17|\\ue50a|\\u27b0|\\u2797|\\u2796|\\u2795|\\u2755|\\u2754|\\u2753|\\u274e|\\u274c|\\u2728|\\u270b|\\u270a|\\u2705|\\u26ce|\\u23f3|\\u23f0|\\u23ec|\\u23eb|\\u23ea|\\u23e9|\\u27bf|\\u00a9|\\u00ae)|(?:(?:\\ud83c\\udc04|\\ud83c\\udd70|\\ud83c\\udd71|\\ud83c\\udd7e|\\ud83c\\udd7f|\\ud83c\\ude02|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c\\ude37|\\u3299|\\u303d|\\u3030|\\u2b55|\\u2b50|\\u2b1c|\\u2b1b|\\u2b07|\\u2b06|\\u2b05|\\u2935|\\u2934|\\u27a1|\\u2764|\\u2757|\\u2747|\\u2744|\\u2734|\\u2733|\\u2716|\\u2714|\\u2712|\\u270f|\\u270c|\\u2709|\\u2708|\\u2702|\\u26fd|\\u26fa|\\u26f5|\\u26f3|\\u26f2|\\u26ea|\\u26d4|\\u26c5|\\u26c4|\\u26be|\\u26bd|\\u26ab|\\u26aa|\\u26a1|\\u26a0|\\u2693|\\u267f|\\u267b|\\u3297|\\u2666|\\u2665|\\u2663|\\u2660|\\u2653|\\u2652|\\u2651|\\u2650|\\u264f|\\u264e|\\u264d|\\u264c|\\u264b|\\u264a|\\u2649|\\u2648|\\u263a|\\u261d|\\u2615|\\u2614|\\u2611|\\u260e|\\u2601|\\u2600|\\u25fe|\\u25fd|\\u25fc|\\u25fb|\\u25c0|\\u25b6|\\u25ab|\\u25aa|\\u24c2|\\u231b|\\u231a|\\u21aa|\\u21a9|\\u2199|\\u2198|\\u2197|\\u2196|\\u2195|\\u2194|\\u2139|\\u2122|\\u2049|\\u203c|\\u2668)([\\uFE0E\\uFE0F]?)))/g,\n\n    // used to find HTML special chars in attributes\n    rescaper = /[&<>'\"]/g,\n\n    // nodes with type 1 which should **not** be parsed (including lower case svg)\n    shouldntBeParsed = /IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,\n\n    // just a private shortcut\n    fromCharCode = String.fromCharCode;\n\n  return twemoji;\n\n\n  /////////////////////////\n  //  private functions  //\n  //     declaration     //\n  /////////////////////////\n\n  /**\n   * Shortcut to create text nodes\n   * @param   string  text used to create DOM text node\n   * @return  Node  a DOM node with that text\n   */\n  function createText(text) {\n    return document.createTextNode(text);\n  }\n\n  /**\n   * Utility function to escape html attribute text\n   * @param   string  text use in HTML attribute\n   * @return  string  text encoded to use in HTML attribute\n   */\n  function escapeHTML(s) {\n    return s.replace(rescaper, replacer);\n  }\n\n  /**\n   * Default callback used to generate emoji src\n   *  based on Twitter CDN\n   * @param   string    the emoji codepoint string\n   * @param   string    the default size to use, i.e. \"36x36\"\n   * @param   string    optional \"\\uFE0F\" variant char, ignored by default\n   * @return  string    the image source to use\n   */\n  function defaultImageSrcGenerator(icon, options) {\n    return ''.concat(options.base, options.size, '/', icon, options.ext);\n  }\n\n  /**\n   * Given a generic DOM nodeType 1, walk through all children\n   * and store every nodeType 3 (#text) found in the tree.\n   * @param   Element a DOM Element with probably some text in it\n   * @param   Array the list of previously discovered text nodes\n   * @return  Array same list with new discovered nodes, if any\n   */\n  function grabAllTextNodes(node, allText) {\n    var\n      childNodes = node.childNodes,\n      length = childNodes.length,\n      subnode,\n      nodeType;\n    while (length--) {\n      subnode = childNodes[length];\n      nodeType = subnode.nodeType;\n      // parse emoji only in text nodes\n      if (nodeType === 3) {\n        // collect them to process emoji later\n        allText.push(subnode);\n      }\n      // ignore all nodes that are not type 1 or that\n      // should not be parsed as script, style, and others\n      else if (nodeType === 1 && !shouldntBeParsed.test(subnode.nodeName)) {\n        grabAllTextNodes(subnode, allText);\n      }\n    }\n    return allText;\n  }\n\n  /**\n   * Used to both remove the possible variant\n   *  and to convert utf16 into code points\n   * @param   string    the emoji surrogate pair\n   * @param   string    the optional variant char, if any\n   */\n  function grabTheRightIcon(icon, variant) {\n    // if variant is present as \\uFE0F\n    return toCodePoint(\n      variant === '\\uFE0F' ?\n        // the icon should not contain it\n        icon.slice(0, -1) :\n        // fix non standard OSX behavior\n        (icon.length === 3 && icon.charAt(1) === '\\uFE0F' ?\n          icon.charAt(0) + icon.charAt(2) : icon)\n    );\n  }\n\n  /**\n   * DOM version of the same logic / parser:\n   *  emojify all found sub-text nodes placing images node instead.\n   * @param   Element   generic DOM node with some text in some child node\n   * @param   Object    options  containing info about how to parse\n    *\n    *            .callback   Function  the callback to invoke per each found emoji.\n    *            .base       string    the base url, by default twemoji.base\n    *            .ext        string    the image extension, by default twemoji.ext\n    *            .size       string    the assets size, by default twemoji.size\n    *\n   * @return  Element same generic node with emoji in place, if any.\n   */\n  function parseNode(node, options) {\n    var\n      allText = grabAllTextNodes(node, []),\n      length = allText.length,\n      attrib,\n      attrname,\n      modified,\n      fragment,\n      subnode,\n      text,\n      match,\n      i,\n      index,\n      img,\n      alt,\n      icon,\n      variant,\n      src;\n    while (length--) {\n      modified = false;\n      fragment = document.createDocumentFragment();\n      subnode = allText[length];\n      text = subnode.nodeValue;\n      i = 0;\n      while ((match = re.exec(text))) {\n        index = match.index;\n        if (index !== i) {\n          fragment.appendChild(\n            createText(text.slice(i, index))\n          );\n        }\n        alt = match[0];\n        icon = match[1];\n        variant = match[2];\n        i = index + alt.length;\n        if (variant !== '\\uFE0E') {\n          src = options.callback(\n            grabTheRightIcon(icon, variant),\n            options,\n            variant\n          );\n          if (src) {\n            img = new Image();\n            img.onerror = options.onerror;\n            img.setAttribute('draggable', 'false');\n            attrib = options.attributes(icon, variant);\n            for (attrname in attrib) {\n              if (\n                attrib.hasOwnProperty(attrname) &&\n                // don't allow any handlers to be set + don't allow overrides\n                attrname.indexOf('on') !== 0 &&\n                !img.hasAttribute(attrname)\n              ) {\n                img.setAttribute(attrname, attrib[attrname]);\n              }\n            }\n            img.className = options.className;\n            img.alt = alt;\n            img.src = src;\n            modified = true;\n            fragment.appendChild(img);\n          }\n        }\n        if (!img) fragment.appendChild(createText(alt));\n        img = null;\n      }\n      // is there actually anything to replace in here ?\n      if (modified) {\n        // any text left to be added ?\n        if (i < text.length) {\n          fragment.appendChild(\n            createText(text.slice(i))\n          );\n        }\n        // replace the text node only, leave intact\n        // anything else surrounding such text\n        subnode.parentNode.replaceChild(fragment, subnode);\n      }\n    }\n    return node;\n  }\n\n  /**\n   * String/HTML version of the same logic / parser:\n   *  emojify a generic text placing images tags instead of surrogates pair.\n   * @param   string    generic string with possibly some emoji in it\n   * @param   Object    options  containing info about how to parse\n   *\n   *            .callback   Function  the callback to invoke per each found emoji.\n   *            .base       string    the base url, by default twemoji.base\n   *            .ext        string    the image extension, by default twemoji.ext\n   *            .size       string    the assets size, by default twemoji.size\n   *\n   * @return  the string with <img tags> replacing all found and parsed emoji\n   */\n  function parseString(str, options) {\n    return replace(str, function (match, icon, variant) {\n      var\n        ret = match,\n        attrib,\n        attrname,\n        src;\n      // verify the variant is not the FE0E one\n      // this variant means \"emoji as text\" and should not\n      // require any action/replacement\n      // http://unicode.org/Public/UNIDATA/StandardizedVariants.html\n      if (variant !== '\\uFE0E') {\n        src = options.callback(\n          grabTheRightIcon(icon, variant),\n          options,\n          variant\n        );\n        if (src) {\n          // recycle the match string replacing the emoji\n          // with its image counter part\n          ret = '<img '.concat(\n            'class=\"', options.className, '\" ',\n            'draggable=\"false\" ',\n            // needs to preserve user original intent\n            // when variants should be copied and pasted too\n            'alt=\"',\n            match,\n            '\"',\n            ' src=\"',\n            src,\n            '\"'\n          );\n          attrib = options.attributes(icon, variant);\n          for (attrname in attrib) { \n            if (\n              attrib.hasOwnProperty(attrname) &&\n              // don't allow any handlers to be set + don't allow overrides\n              attrname.indexOf('on') !== 0 &&\n              ret.indexOf(' ' + attrname + '=') === -1\n            ) {\n              ret = ret.concat(' ', attrname, '=\"', escapeHTML(attrib[attrname]), '\"');\n            }\n          }\n          ret = ret.concat('>');\n        }\n      }\n      return ret;\n    });\n  }\n\n  /**\n   * Function used to actually replace HTML special chars\n   * @param   string  HTML special char\n   * @return  string  encoded HTML special char\n   */\n  function replacer(m) {\n    return escaper[m];\n  }\n\n  /**\n   * Default options.attribute callback\n   * @return  null\n   */\n  function returnNull() {\n    return null;\n  }\n\n  /**\n   * Given a generic value, creates its squared counterpart if it's a number.\n   *  As example, number 36 will return '36x36'.\n   * @param   any     a generic value.\n   * @return  any     a string representing asset size, i.e. \"36x36\"\n   *                  only in case the value was a number.\n   *                  Returns initial value otherwise.\n   */\n  function toSizeSquaredAsset(value) {\n    return typeof value === 'number' ?\n      value + 'x' + value :\n      value;\n  }\n\n\n  /////////////////////////\n  //  exported functions //\n  //     declaration     //\n  /////////////////////////\n\n  function fromCodePoint(codepoint) {\n    var code = typeof codepoint === 'string' ?\n          parseInt(codepoint, 16) : codepoint;\n    if (code < 0x10000) {\n      return fromCharCode(code);\n    }\n    code -= 0x10000;\n    return fromCharCode(\n      0xD800 + (code >> 10),\n      0xDC00 + (code & 0x3FF)\n    );\n  }\n\n  function parse(what, how) {\n    if (!how || typeof how === 'function') {\n      how = {callback: how};\n    }\n    // if first argument is string, inject html <img> tags\n    // otherwise use the DOM tree and parse text nodes only\n    return (typeof what === 'string' ? parseString : parseNode)(what, {\n      callback:   how.callback || defaultImageSrcGenerator,\n      attributes: typeof how.attributes === 'function' ? how.attributes : returnNull,\n      base:       typeof how.base === 'string' ? how.base : twemoji.base,\n      ext:        how.ext || twemoji.ext,\n      size:       how.folder || toSizeSquaredAsset(how.size || twemoji.size),\n      className:  how.className || twemoji.className,\n      onerror:    how.onerror || twemoji.onerror\n    });\n  }\n\n  function replace(text, callback) {\n    return String(text).replace(re, callback);\n  }\n\n  function test(text) {\n    // IE6 needs a reset before too\n    re.lastIndex = 0;\n    var result = re.test(text);\n    re.lastIndex = 0;\n    return result;\n  }\n\n  function toCodePoint(unicodeSurrogates, sep) {\n    var\n      r = [],\n      c = 0,\n      p = 0,\n      i = 0;\n    while (i < unicodeSurrogates.length) {\n      c = unicodeSurrogates.charCodeAt(i++);\n      if (p) {\n        r.push((0x10000 + ((p - 0xD800) << 10) + (c - 0xDC00)).toString(16));\n        p = 0;\n      } else if (0xD800 <= c && c <= 0xDBFF) {\n        p = c;\n      } else {\n        r.push(c.toString(16));\n      }\n    }\n    return r.join(sep || '-');\n  }\n\n}());\n/* Ported to JavaScript from Java 07/01/14.\n *\n * Ported from C to Java by Dmitry Skiba [sahn0], 23/02/08.\n * Original: http://cds.xs4all.nl:8081/ecdh/\n */\n/* Generic 64-bit integer implementation of Curve25519 ECDH\n * Written by Matthijs van Duin, 200608242056\n * Public domain.\n *\n * Based on work by Daniel J Bernstein, http://cr.yp.to/ecdh.html\n */\n\nvar curve25519 = function () {\n\n    //region Constants\n\n    var KEY_SIZE = 32;\n\n    /* array length */\n    var UNPACKED_SIZE = 16;\n\n    /* group order (a prime near 2^252+2^124) */\n    var ORDER = [\n        237, 211, 245, 92,\n        26, 99, 18, 88,\n        214, 156, 247, 162,\n        222, 249, 222, 20,\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 16\n    ];\n\n    /* smallest multiple of the order that's >= 2^255 */\n    var ORDER_TIMES_8 = [\n        104, 159, 174, 231,\n        210, 24, 147, 192,\n        178, 230, 188, 23,\n        245, 206, 247, 166,\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 128\n    ];\n\n    /* constants 2Gy and 1/(2Gy) */\n    var BASE_2Y = [\n        22587, 610, 29883, 44076,\n        15515, 9479, 25859, 56197,\n        23910, 4462, 17831, 16322,\n        62102, 36542, 52412, 16035\n    ];\n\n    var BASE_R2Y = [\n        5744, 16384, 61977, 54121,\n        8776, 18501, 26522, 34893,\n        23833, 5823, 55924, 58749,\n        24147, 14085, 13606, 6080\n    ];\n\n    var C1 = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    var C9 = [9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    var C486671 = [0x6D0F, 0x0007, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    var C39420360 = [0x81C8, 0x0259, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n    var P25 = 33554431; /* (1 << 25) - 1 */\n    var P26 = 67108863; /* (1 << 26) - 1 */\n\n    //#endregion\n\n    //region Key Agreement\n\n    /* Private key clamping\n     *   k [out] your private key for key agreement\n     *   k  [in]  32 random bytes\n     */\n    function clamp (k) {\n        k[31] &= 0x7F;\n        k[31] |= 0x40;\n        k[ 0] &= 0xF8;\n    }\n\n    //endregion\n\n    //region radix 2^8 math\n\n    function cpy32 (d, s) {\n        for (var i = 0; i < 32; i++)\n            d[i] = s[i];\n    }\n\n    /* p[m..n+m-1] = q[m..n+m-1] + z * x */\n    /* n is the size of x */\n    /* n+m is the size of p and q */\n    function mula_small (p, q, m, x, n, z) {\n        m = m | 0;\n        n = n | 0;\n        z = z | 0;\n\n        var v = 0;\n        for (var i = 0; i < n; ++i) {\n            v += (q[i + m] & 0xFF) + z * (x[i] & 0xFF);\n            p[i + m] = (v & 0xFF);\n            v >>= 8;\n        }\n\n        return v;\n    }\n\n    /* p += x * y * z  where z is a small integer\n     * x is size 32, y is size t, p is size 32+t\n     * y is allowed to overlap with p+32 if you don't care about the upper half  */\n    function mula32 (p, x, y, t, z) {\n        t = t | 0;\n        z = z | 0;\n\n        var n = 31;\n        var w = 0;\n        var i = 0;\n        for (; i < t; i++) {\n            var zy = z * (y[i] & 0xFF);\n            w += mula_small(p, p, i, x, n, zy) + (p[i+n] & 0xFF) + zy * (x[n] & 0xFF);\n            p[i + n] = w & 0xFF;\n            w >>= 8;\n        }\n        p[i + n] = (w + (p[i + n] & 0xFF)) & 0xFF;\n        return w >> 8;\n    }\n\n    /* divide r (size n) by d (size t), returning quotient q and remainder r\n     * quotient is size n-t+1, remainder is size t\n     * requires t > 0 && d[t-1] !== 0\n     * requires that r[-1] and d[-1] are valid memory locations\n     * q may overlap with r+t */\n    function divmod (q, r, n, d, t) {\n        n = n | 0;\n        t = t | 0;\n\n        var rn = 0;\n        var dt = (d[t - 1] & 0xFF) << 8;\n        if (t > 1)\n            dt |= (d[t - 2] & 0xFF);\n\n        while (n-- >= t) {\n            var z = (rn << 16) | ((r[n] & 0xFF) << 8);\n            if (n > 0)\n                z |= (r[n - 1] & 0xFF);\n\n            var i = n - t + 1;\n            z /= dt;\n            rn += mula_small(r, r, i, d, t, -z);\n            q[i] = (z + rn) & 0xFF;\n            /* rn is 0 or -1 (underflow) */\n            mula_small(r, r, i, d, t, -rn);\n            rn = r[n] & 0xFF;\n            r[n] = 0;\n        }\n\n        r[t-1] = rn & 0xFF;\n    }\n\n    function numsize (x, n) {\n        while (n-- !== 0 && x[n] === 0) { }\n        return n + 1;\n    }\n\n    /* Returns x if a contains the gcd, y if b.\n     * Also, the returned buffer contains the inverse of a mod b,\n     * as 32-byte signed.\n     * x and y must have 64 bytes space for temporary use.\n     * requires that a[-1] and b[-1] are valid memory locations  */\n    function egcd32 (x, y, a, b) {\n        var an, bn = 32, qn, i;\n        for (i = 0; i < 32; i++)\n            x[i] = y[i] = 0;\n        x[0] = 1;\n        an = numsize(a, 32);\n        if (an === 0)\n            return y; /* division by zero */\n        var temp = new Array(32);\n        while (true) {\n            qn = bn - an + 1;\n            divmod(temp, b, bn, a, an);\n            bn = numsize(b, bn);\n            if (bn === 0)\n                return x;\n            mula32(y, x, temp, qn, -1);\n\n            qn = an - bn + 1;\n            divmod(temp, a, an, b, bn);\n            an = numsize(a, an);\n            if (an === 0)\n                return y;\n            mula32(x, y, temp, qn, -1);\n        }\n    }\n\n    //endregion\n\n    //region radix 2^25.5 GF(2^255-19) math\n\n    //region pack / unpack\n\n    /* Convert to internal format from little-endian byte format */\n    function unpack (x, m) {\n        for (var i = 0; i < KEY_SIZE; i += 2)\n            x[i / 2] = m[i] & 0xFF | ((m[i + 1] & 0xFF) << 8);\n    }\n\n    /* Check if reduced-form input >= 2^255-19 */\n    function is_overflow (x) {\n        return (\n            ((x[0] > P26 - 19)) &&\n                ((x[1] & x[3] & x[5] & x[7] & x[9]) === P25) &&\n                ((x[2] & x[4] & x[6] & x[8]) === P26)\n            ) || (x[9] > P25);\n    }\n\n    /* Convert from internal format to little-endian byte format.  The\n     * number must be in a reduced form which is output by the following ops:\n     *     unpack, mul, sqr\n     *     set --  if input in range 0 .. P25\n     * If you're unsure if the number is reduced, first multiply it by 1.  */\n    function pack (x, m) {\n        for (var i = 0; i < UNPACKED_SIZE; ++i) {\n            m[2 * i] = x[i] & 0x00FF;\n            m[2 * i + 1] = (x[i] & 0xFF00) >> 8;\n        }\n    }\n\n    //endregion\n\n    function createUnpackedArray () {\n        return new Uint16Array(UNPACKED_SIZE);\n    }\n\n    /* Copy a number */\n    function cpy (d, s) {\n        for (var i = 0; i < UNPACKED_SIZE; ++i)\n            d[i] = s[i];\n    }\n\n    /* Set a number to value, which must be in range -185861411 .. 185861411 */\n    function set (d, s) {\n        d[0] = s;\n        for (var i = 1; i < UNPACKED_SIZE; ++i)\n            d[i] = 0;\n    }\n\n    /* Add/subtract two numbers.  The inputs must be in reduced form, and the\n     * output isn't, so to do another addition or subtraction on the output,\n     * first multiply it by one to reduce it. */\n    var add = c255laddmodp;\n    var sub = c255lsubmodp;\n\n    /* Multiply a number by a small integer in range -185861411 .. 185861411.\n     * The output is in reduced form, the input x need not be.  x and xy may point\n     * to the same buffer. */\n    var mul_small = c255lmulasmall;\n\n    /* Multiply two numbers.  The output is in reduced form, the inputs need not be. */\n    var mul = c255lmulmodp;\n\n    /* Square a number.  Optimization of  mul25519(x2, x, x)  */\n    var sqr = c255lsqrmodp;\n\n    /* Calculates a reciprocal.  The output is in reduced form, the inputs need not\n     * be.  Simply calculates  y = x^(p-2)  so it's not too fast. */\n    /* When sqrtassist is true, it instead calculates y = x^((p-5)/8) */\n    function recip (y, x, sqrtassist) {\n        var t0 = createUnpackedArray();\n        var t1 = createUnpackedArray();\n        var t2 = createUnpackedArray();\n        var t3 = createUnpackedArray();\n        var t4 = createUnpackedArray();\n\n        /* the chain for x^(2^255-21) is straight from djb's implementation */\n        var i;\n        sqr(t1, x); /*  2 === 2 * 1\t*/\n        sqr(t2, t1); /*  4 === 2 * 2\t*/\n        sqr(t0, t2); /*  8 === 2 * 4\t*/\n        mul(t2, t0, x); /*  9 === 8 + 1\t*/\n        mul(t0, t2, t1); /* 11 === 9 + 2\t*/\n        sqr(t1, t0); /* 22 === 2 * 11\t*/\n        mul(t3, t1, t2); /* 31 === 22 + 9 === 2^5   - 2^0\t*/\n        sqr(t1, t3); /* 2^6   - 2^1\t*/\n        sqr(t2, t1); /* 2^7   - 2^2\t*/\n        sqr(t1, t2); /* 2^8   - 2^3\t*/\n        sqr(t2, t1); /* 2^9   - 2^4\t*/\n        sqr(t1, t2); /* 2^10  - 2^5\t*/\n        mul(t2, t1, t3); /* 2^10  - 2^0\t*/\n        sqr(t1, t2); /* 2^11  - 2^1\t*/\n        sqr(t3, t1); /* 2^12  - 2^2\t*/\n        for (i = 1; i < 5; i++) {\n            sqr(t1, t3);\n            sqr(t3, t1);\n        } /* t3 */ /* 2^20  - 2^10\t*/\n        mul(t1, t3, t2); /* 2^20  - 2^0\t*/\n        sqr(t3, t1); /* 2^21  - 2^1\t*/\n        sqr(t4, t3); /* 2^22  - 2^2\t*/\n        for (i = 1; i < 10; i++) {\n            sqr(t3, t4);\n            sqr(t4, t3);\n        } /* t4 */ /* 2^40  - 2^20\t*/\n        mul(t3, t4, t1); /* 2^40  - 2^0\t*/\n        for (i = 0; i < 5; i++) {\n            sqr(t1, t3);\n            sqr(t3, t1);\n        } /* t3 */ /* 2^50  - 2^10\t*/\n        mul(t1, t3, t2); /* 2^50  - 2^0\t*/\n        sqr(t2, t1); /* 2^51  - 2^1\t*/\n        sqr(t3, t2); /* 2^52  - 2^2\t*/\n        for (i = 1; i < 25; i++) {\n            sqr(t2, t3);\n            sqr(t3, t2);\n        } /* t3 */ /* 2^100 - 2^50 */\n        mul(t2, t3, t1); /* 2^100 - 2^0\t*/\n        sqr(t3, t2); /* 2^101 - 2^1\t*/\n        sqr(t4, t3); /* 2^102 - 2^2\t*/\n        for (i = 1; i < 50; i++) {\n            sqr(t3, t4);\n            sqr(t4, t3);\n        } /* t4 */ /* 2^200 - 2^100 */\n        mul(t3, t4, t2); /* 2^200 - 2^0\t*/\n        for (i = 0; i < 25; i++) {\n            sqr(t4, t3);\n            sqr(t3, t4);\n        } /* t3 */ /* 2^250 - 2^50\t*/\n        mul(t2, t3, t1); /* 2^250 - 2^0\t*/\n        sqr(t1, t2); /* 2^251 - 2^1\t*/\n        sqr(t2, t1); /* 2^252 - 2^2\t*/\n        if (sqrtassist !== 0) {\n            mul(y, x, t2); /* 2^252 - 3 */\n        } else {\n            sqr(t1, t2); /* 2^253 - 2^3\t*/\n            sqr(t2, t1); /* 2^254 - 2^4\t*/\n            sqr(t1, t2); /* 2^255 - 2^5\t*/\n            mul(y, t1, t0); /* 2^255 - 21\t*/\n        }\n    }\n\n    /* checks if x is \"negative\", requires reduced input */\n    function is_negative (x) {\n        var isOverflowOrNegative = is_overflow(x) || x[9] < 0;\n        var leastSignificantBit = x[0] & 1;\n        return ((isOverflowOrNegative ? 1 : 0) ^ leastSignificantBit) & 0xFFFFFFFF;\n    }\n\n    /* a square root */\n    function sqrt (x, u) {\n        var v = createUnpackedArray();\n        var t1 = createUnpackedArray();\n        var t2 = createUnpackedArray();\n\n        add(t1, u, u); /* t1 = 2u\t\t*/\n        recip(v, t1, 1); /* v = (2u)^((p-5)/8)\t*/\n        sqr(x, v); /* x = v^2\t\t*/\n        mul(t2, t1, x); /* t2 = 2uv^2\t\t*/\n        sub(t2, t2, C1); /* t2 = 2uv^2-1\t\t*/\n        mul(t1, v, t2); /* t1 = v(2uv^2-1)\t*/\n        mul(x, u, t1); /* x = uv(2uv^2-1)\t*/\n    }\n\n    //endregion\n\n    //region JavaScript Fast Math\n\n    function c255lsqr8h (a7, a6, a5, a4, a3, a2, a1, a0) {\n        var r = [];\n        var v;\n        r[0] = (v = a0*a0) & 0xFFFF;\n        r[1] = (v = ((v / 0x10000) | 0) + 2*a0*a1) & 0xFFFF;\n        r[2] = (v = ((v / 0x10000) | 0) + 2*a0*a2 + a1*a1) & 0xFFFF;\n        r[3] = (v = ((v / 0x10000) | 0) + 2*a0*a3 + 2*a1*a2) & 0xFFFF;\n        r[4] = (v = ((v / 0x10000) | 0) + 2*a0*a4 + 2*a1*a3 + a2*a2) & 0xFFFF;\n        r[5] = (v = ((v / 0x10000) | 0) + 2*a0*a5 + 2*a1*a4 + 2*a2*a3) & 0xFFFF;\n        r[6] = (v = ((v / 0x10000) | 0) + 2*a0*a6 + 2*a1*a5 + 2*a2*a4 + a3*a3) & 0xFFFF;\n        r[7] = (v = ((v / 0x10000) | 0) + 2*a0*a7 + 2*a1*a6 + 2*a2*a5 + 2*a3*a4) & 0xFFFF;\n        r[8] = (v = ((v / 0x10000) | 0) + 2*a1*a7 + 2*a2*a6 + 2*a3*a5 + a4*a4) & 0xFFFF;\n        r[9] = (v = ((v / 0x10000) | 0) + 2*a2*a7 + 2*a3*a6 + 2*a4*a5) & 0xFFFF;\n        r[10] = (v = ((v / 0x10000) | 0) + 2*a3*a7 + 2*a4*a6 + a5*a5) & 0xFFFF;\n        r[11] = (v = ((v / 0x10000) | 0) + 2*a4*a7 + 2*a5*a6) & 0xFFFF;\n        r[12] = (v = ((v / 0x10000) | 0) + 2*a5*a7 + a6*a6) & 0xFFFF;\n        r[13] = (v = ((v / 0x10000) | 0) + 2*a6*a7) & 0xFFFF;\n        r[14] = (v = ((v / 0x10000) | 0) + a7*a7) & 0xFFFF;\n        r[15] = ((v / 0x10000) | 0);\n        return r;\n    }\n\n    function c255lsqrmodp (r, a) {\n        var x = c255lsqr8h(a[15], a[14], a[13], a[12], a[11], a[10], a[9], a[8]);\n        var z = c255lsqr8h(a[7], a[6], a[5], a[4], a[3], a[2], a[1], a[0]);\n        var y = c255lsqr8h(a[15] + a[7], a[14] + a[6], a[13] + a[5], a[12] + a[4], a[11] + a[3], a[10] + a[2], a[9] + a[1], a[8] + a[0]);\n\n        var v;\n        r[0] = (v = 0x800000 + z[0] + (y[8] -x[8] -z[8] + x[0] -0x80) * 38) & 0xFFFF;\n        r[1] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[1] + (y[9] -x[9] -z[9] + x[1]) * 38) & 0xFFFF;\n        r[2] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[2] + (y[10] -x[10] -z[10] + x[2]) * 38) & 0xFFFF;\n        r[3] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[3] + (y[11] -x[11] -z[11] + x[3]) * 38) & 0xFFFF;\n        r[4] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[4] + (y[12] -x[12] -z[12] + x[4]) * 38) & 0xFFFF;\n        r[5] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[5] + (y[13] -x[13] -z[13] + x[5]) * 38) & 0xFFFF;\n        r[6] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[6] + (y[14] -x[14] -z[14] + x[6]) * 38) & 0xFFFF;\n        r[7] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[7] + (y[15] -x[15] -z[15] + x[7]) * 38) & 0xFFFF;\n        r[8] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[8] + y[0] -x[0] -z[0] + x[8] * 38) & 0xFFFF;\n        r[9] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[9] + y[1] -x[1] -z[1] + x[9] * 38) & 0xFFFF;\n        r[10] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[10] + y[2] -x[2] -z[2] + x[10] * 38) & 0xFFFF;\n        r[11] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[11] + y[3] -x[3] -z[3] + x[11] * 38) & 0xFFFF;\n        r[12] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[12] + y[4] -x[4] -z[4] + x[12] * 38) & 0xFFFF;\n        r[13] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[13] + y[5] -x[5] -z[5] + x[13] * 38) & 0xFFFF;\n        r[14] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[14] + y[6] -x[6] -z[6] + x[14] * 38) & 0xFFFF;\n        var r15 = 0x7fff80 + ((v / 0x10000) | 0) + z[15] + y[7] -x[7] -z[7] + x[15] * 38;\n        c255lreduce(r, r15);\n    }\n\n    function c255lmul8h (a7, a6, a5, a4, a3, a2, a1, a0, b7, b6, b5, b4, b3, b2, b1, b0) {\n        var r = [];\n        var v;\n        r[0] = (v = a0*b0) & 0xFFFF;\n        r[1] = (v = ((v / 0x10000) | 0) + a0*b1 + a1*b0) & 0xFFFF;\n        r[2] = (v = ((v / 0x10000) | 0) + a0*b2 + a1*b1 + a2*b0) & 0xFFFF;\n        r[3] = (v = ((v / 0x10000) | 0) + a0*b3 + a1*b2 + a2*b1 + a3*b0) & 0xFFFF;\n        r[4] = (v = ((v / 0x10000) | 0) + a0*b4 + a1*b3 + a2*b2 + a3*b1 + a4*b0) & 0xFFFF;\n        r[5] = (v = ((v / 0x10000) | 0) + a0*b5 + a1*b4 + a2*b3 + a3*b2 + a4*b1 + a5*b0) & 0xFFFF;\n        r[6] = (v = ((v / 0x10000) | 0) + a0*b6 + a1*b5 + a2*b4 + a3*b3 + a4*b2 + a5*b1 + a6*b0) & 0xFFFF;\n        r[7] = (v = ((v / 0x10000) | 0) + a0*b7 + a1*b6 + a2*b5 + a3*b4 + a4*b3 + a5*b2 + a6*b1 + a7*b0) & 0xFFFF;\n        r[8] = (v = ((v / 0x10000) | 0) + a1*b7 + a2*b6 + a3*b5 + a4*b4 + a5*b3 + a6*b2 + a7*b1) & 0xFFFF;\n        r[9] = (v = ((v / 0x10000) | 0) + a2*b7 + a3*b6 + a4*b5 + a5*b4 + a6*b3 + a7*b2) & 0xFFFF;\n        r[10] = (v = ((v / 0x10000) | 0) + a3*b7 + a4*b6 + a5*b5 + a6*b4 + a7*b3) & 0xFFFF;\n        r[11] = (v = ((v / 0x10000) | 0) + a4*b7 + a5*b6 + a6*b5 + a7*b4) & 0xFFFF;\n        r[12] = (v = ((v / 0x10000) | 0) + a5*b7 + a6*b6 + a7*b5) & 0xFFFF;\n        r[13] = (v = ((v / 0x10000) | 0) + a6*b7 + a7*b6) & 0xFFFF;\n        r[14] = (v = ((v / 0x10000) | 0) + a7*b7) & 0xFFFF;\n        r[15] = ((v / 0x10000) | 0);\n        return r;\n    }\n\n    function c255lmulmodp (r, a, b) {\n        // Karatsuba multiplication scheme: x*y = (b^2+b)*x1*y1 - b*(x1-x0)*(y1-y0) + (b+1)*x0*y0\n        var x = c255lmul8h(a[15], a[14], a[13], a[12], a[11], a[10], a[9], a[8], b[15], b[14], b[13], b[12], b[11], b[10], b[9], b[8]);\n        var z = c255lmul8h(a[7], a[6], a[5], a[4], a[3], a[2], a[1], a[0], b[7], b[6], b[5], b[4], b[3], b[2], b[1], b[0]);\n        var y = c255lmul8h(a[15] + a[7], a[14] + a[6], a[13] + a[5], a[12] + a[4], a[11] + a[3], a[10] + a[2], a[9] + a[1], a[8] + a[0],\n            b[15] + b[7], b[14] + b[6], b[13] + b[5], b[12] + b[4], b[11] + b[3], b[10] + b[2], b[9] + b[1], b[8] + b[0]);\n\n        var v;\n        r[0] = (v = 0x800000 + z[0] + (y[8] -x[8] -z[8] + x[0] -0x80) * 38) & 0xFFFF;\n        r[1] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[1] + (y[9] -x[9] -z[9] + x[1]) * 38) & 0xFFFF;\n        r[2] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[2] + (y[10] -x[10] -z[10] + x[2]) * 38) & 0xFFFF;\n        r[3] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[3] + (y[11] -x[11] -z[11] + x[3]) * 38) & 0xFFFF;\n        r[4] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[4] + (y[12] -x[12] -z[12] + x[4]) * 38) & 0xFFFF;\n        r[5] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[5] + (y[13] -x[13] -z[13] + x[5]) * 38) & 0xFFFF;\n        r[6] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[6] + (y[14] -x[14] -z[14] + x[6]) * 38) & 0xFFFF;\n        r[7] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[7] + (y[15] -x[15] -z[15] + x[7]) * 38) & 0xFFFF;\n        r[8] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[8] + y[0] -x[0] -z[0] + x[8] * 38) & 0xFFFF;\n        r[9] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[9] + y[1] -x[1] -z[1] + x[9] * 38) & 0xFFFF;\n        r[10] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[10] + y[2] -x[2] -z[2] + x[10] * 38) & 0xFFFF;\n        r[11] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[11] + y[3] -x[3] -z[3] + x[11] * 38) & 0xFFFF;\n        r[12] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[12] + y[4] -x[4] -z[4] + x[12] * 38) & 0xFFFF;\n        r[13] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[13] + y[5] -x[5] -z[5] + x[13] * 38) & 0xFFFF;\n        r[14] = (v = 0x7fff80 + ((v / 0x10000) | 0) + z[14] + y[6] -x[6] -z[6] + x[14] * 38) & 0xFFFF;\n        var r15 = 0x7fff80 + ((v / 0x10000) | 0) + z[15] + y[7] -x[7] -z[7] + x[15] * 38;\n        c255lreduce(r, r15);\n    }\n\n    function c255lreduce (a, a15) {\n        var v = a15;\n        a[15] = v & 0x7FFF;\n        v = ((v / 0x8000) | 0) * 19;\n        for (var i = 0; i <= 14; ++i) {\n            a[i] = (v += a[i]) & 0xFFFF;\n            v = ((v / 0x10000) | 0);\n        }\n\n        a[15] += v;\n    }\n\n    function c255laddmodp (r, a, b) {\n        var v;\n        r[0] = (v = (((a[15] / 0x8000) | 0) + ((b[15] / 0x8000) | 0)) * 19 + a[0] + b[0]) & 0xFFFF;\n        for (var i = 1; i <= 14; ++i)\n            r[i] = (v = ((v / 0x10000) | 0) + a[i] + b[i]) & 0xFFFF;\n\n        r[15] = ((v / 0x10000) | 0) + (a[15] & 0x7FFF) + (b[15] & 0x7FFF);\n    }\n\n    function c255lsubmodp (r, a, b) {\n        var v;\n        r[0] = (v = 0x80000 + (((a[15] / 0x8000) | 0) - ((b[15] / 0x8000) | 0) - 1) * 19 + a[0] - b[0]) & 0xFFFF;\n        for (var i = 1; i <= 14; ++i)\n            r[i] = (v = ((v / 0x10000) | 0) + 0x7fff8 + a[i] - b[i]) & 0xFFFF;\n\n        r[15] = ((v / 0x10000) | 0) + 0x7ff8 + (a[15] & 0x7FFF) - (b[15] & 0x7FFF);\n    }\n\n    function c255lmulasmall (r, a, m) {\n        var v;\n        r[0] = (v = a[0] * m) & 0xFFFF;\n        for (var i = 1; i <= 14; ++i)\n            r[i] = (v = ((v / 0x10000) | 0) + a[i]*m) & 0xFFFF;\n\n        var r15 = ((v / 0x10000) | 0) + a[15]*m;\n        c255lreduce(r, r15);\n    }\n\n    //endregion\n\n    /********************* Elliptic curve *********************/\n\n    /* y^2 = x^3 + 486662 x^2 + x  over GF(2^255-19) */\n\n    /* t1 = ax + az\n     * t2 = ax - az  */\n    function mont_prep (t1, t2, ax, az) {\n        add(t1, ax, az);\n        sub(t2, ax, az);\n    }\n\n    /* A = P + Q   where\n     *  X(A) = ax/az\n     *  X(P) = (t1+t2)/(t1-t2)\n     *  X(Q) = (t3+t4)/(t3-t4)\n     *  X(P-Q) = dx\n     * clobbers t1 and t2, preserves t3 and t4  */\n    function mont_add (t1, t2, t3, t4, ax, az, dx) {\n        mul(ax, t2, t3);\n        mul(az, t1, t4);\n        add(t1, ax, az);\n        sub(t2, ax, az);\n        sqr(ax, t1);\n        sqr(t1, t2);\n        mul(az, t1, dx);\n    }\n\n    /* B = 2 * Q   where\n     *  X(B) = bx/bz\n     *  X(Q) = (t3+t4)/(t3-t4)\n     * clobbers t1 and t2, preserves t3 and t4  */\n    function mont_dbl (t1, t2, t3, t4, bx, bz) {\n        sqr(t1, t3);\n        sqr(t2, t4);\n        mul(bx, t1, t2);\n        sub(t2, t1, t2);\n        mul_small(bz, t2, 121665);\n        add(t1, t1, bz);\n        mul(bz, t1, t2);\n    }\n\n    /* Y^2 = X^3 + 486662 X^2 + X\n     * t is a temporary  */\n    function x_to_y2 (t, y2, x) {\n        sqr(t, x);\n        mul_small(y2, x, 486662);\n        add(t, t, y2);\n        add(t, t, C1);\n        mul(y2, t, x);\n    }\n\n    /* P = kG   and  s = sign(P)/k  */\n    function core (Px, s, k, Gx) {\n        var dx = createUnpackedArray();\n        var t1 = createUnpackedArray();\n        var t2 = createUnpackedArray();\n        var t3 = createUnpackedArray();\n        var t4 = createUnpackedArray();\n        var x = [createUnpackedArray(), createUnpackedArray()];\n        var z = [createUnpackedArray(), createUnpackedArray()];\n        var i, j;\n\n        /* unpack the base */\n        if (Gx !== null)\n            unpack(dx, Gx);\n        else\n            set(dx, 9);\n\n        /* 0G = point-at-infinity */\n        set(x[0], 1);\n        set(z[0], 0);\n\n        /* 1G = G */\n        cpy(x[1], dx);\n        set(z[1], 1);\n\n        for (i = 32; i-- !== 0;) {\n            for (j = 8; j-- !== 0;) {\n                /* swap arguments depending on bit */\n                var bit1 = (k[i] & 0xFF) >> j & 1;\n                var bit0 = ~(k[i] & 0xFF) >> j & 1;\n                var ax = x[bit0];\n                var az = z[bit0];\n                var bx = x[bit1];\n                var bz = z[bit1];\n\n                /* a' = a + b\t*/\n                /* b' = 2 b\t*/\n                mont_prep(t1, t2, ax, az);\n                mont_prep(t3, t4, bx, bz);\n                mont_add(t1, t2, t3, t4, ax, az, dx);\n                mont_dbl(t1, t2, t3, t4, bx, bz);\n            }\n        }\n\n        recip(t1, z[0], 0);\n        mul(dx, x[0], t1);\n\n        pack(dx, Px);\n\n        /* calculate s such that s abs(P) = G  .. assumes G is std base point */\n        if (s !== null) {\n            x_to_y2(t2, t1, dx); /* t1 = Py^2  */\n            recip(t3, z[1], 0); /* where Q=P+G ... */\n            mul(t2, x[1], t3); /* t2 = Qx  */\n            add(t2, t2, dx); /* t2 = Qx + Px  */\n            add(t2, t2, C486671); /* t2 = Qx + Px + Gx + 486662  */\n            sub(dx, dx, C9); /* dx = Px - Gx  */\n            sqr(t3, dx); /* t3 = (Px - Gx)^2  */\n            mul(dx, t2, t3); /* dx = t2 (Px - Gx)^2  */\n            sub(dx, dx, t1); /* dx = t2 (Px - Gx)^2 - Py^2  */\n            sub(dx, dx, C39420360); /* dx = t2 (Px - Gx)^2 - Py^2 - Gy^2  */\n            mul(t1, dx, BASE_R2Y); /* t1 = -Py  */\n\n            if (is_negative(t1) !== 0)    /* sign is 1, so just copy  */\n                cpy32(s, k);\n            else            /* sign is -1, so negate  */\n                mula_small(s, ORDER_TIMES_8, 0, k, 32, -1);\n\n            /* reduce s mod q\n             * (is this needed?  do it just in case, it's fast anyway) */\n            //divmod((dstptr) t1, s, 32, order25519, 32);\n\n            /* take reciprocal of s mod q */\n            var temp1 = new Array(32);\n            var temp2 = new Array(64);\n            var temp3 = new Array(64);\n            cpy32(temp1, ORDER);\n            cpy32(s, egcd32(temp2, temp3, s, temp1));\n            if ((s[31] & 0x80) !== 0)\n                mula_small(s, s, 0, ORDER, 32, 1);\n\n        }\n    }\n\n    /********* DIGITAL SIGNATURES *********/\n\n    /* deterministic EC-KCDSA\n     *\n     *    s is the private key for signing\n     *    P is the corresponding public key\n     *    Z is the context data (signer public key or certificate, etc)\n     *\n     * signing:\n     *\n     *    m = hash(Z, message)\n     *    x = hash(m, s)\n     *    keygen25519(Y, NULL, x);\n     *    r = hash(Y);\n     *    h = m XOR r\n     *    sign25519(v, h, x, s);\n     *\n     *    output (v,r) as the signature\n     *\n     * verification:\n     *\n     *    m = hash(Z, message);\n     *    h = m XOR r\n     *    verify25519(Y, v, h, P)\n     *\n     *    confirm  r === hash(Y)\n     *\n     * It would seem to me that it would be simpler to have the signer directly do\n     * h = hash(m, Y) and send that to the recipient instead of r, who can verify\n     * the signature by checking h === hash(m, Y).  If there are any problems with\n     * such a scheme, please let me know.\n     *\n     * Also, EC-KCDSA (like most DS algorithms) picks x random, which is a waste of\n     * perfectly good entropy, but does allow Y to be calculated in advance of (or\n     * parallel to) hashing the message.\n     */\n\n    /* Signature generation primitive, calculates (x-h)s mod q\n     *   h  [in]  signature hash (of message, signature pub key, and context data)\n     *   x  [in]  signature private key\n     *   s  [in]  private key for signing\n     * returns signature value on success, undefined on failure (use different x or h)\n     */\n\n    function sign (h, x, s) {\n        // v = (x - h) s  mod q\n        var w, i;\n        var h1 = new Array(32)\n        var x1 = new Array(32);\n        var tmp1 = new Array(64);\n        var tmp2 = new Array(64);\n\n        // Don't clobber the arguments, be nice!\n        cpy32(h1, h);\n        cpy32(x1, x);\n\n        // Reduce modulo group order\n        var tmp3 = new Array(32);\n        divmod(tmp3, h1, 32, ORDER, 32);\n        divmod(tmp3, x1, 32, ORDER, 32);\n\n        // v = x1 - h1\n        // If v is negative, add the group order to it to become positive.\n        // If v was already positive we don't have to worry about overflow\n        // when adding the order because v < ORDER and 2*ORDER < 2^256\n        var v = new Array(32);\n        mula_small(v, x1, 0, h1, 32, -1);\n        mula_small(v, v , 0, ORDER, 32, 1);\n\n        // tmp1 = (x-h)*s mod q\n        mula32(tmp1, v, s, 32, 1);\n        divmod(tmp2, tmp1, 64, ORDER, 32);\n\n        for (w = 0, i = 0; i < 32; i++)\n            w |= v[i] = tmp1[i];\n\n        return w !== 0 ? v : undefined;\n    }\n\n    /* Signature verification primitive, calculates Y = vP + hG\n     *   v  [in]  signature value\n     *   h  [in]  signature hash\n     *   P  [in]  public key\n     *   Returns signature public key\n     */\n    function verify (v, h, P) {\n        /* Y = v abs(P) + h G  */\n        var d = new Array(32);\n        var p = [createUnpackedArray(), createUnpackedArray()];\n        var s = [createUnpackedArray(), createUnpackedArray()];\n        var yx = [createUnpackedArray(), createUnpackedArray(), createUnpackedArray()];\n        var yz = [createUnpackedArray(), createUnpackedArray(), createUnpackedArray()];\n        var t1 = [createUnpackedArray(), createUnpackedArray(), createUnpackedArray()];\n        var t2 = [createUnpackedArray(), createUnpackedArray(), createUnpackedArray()];\n\n        var vi = 0, hi = 0, di = 0, nvh = 0, i, j, k;\n\n        /* set p[0] to G and p[1] to P  */\n\n        set(p[0], 9);\n        unpack(p[1], P);\n\n        /* set s[0] to P+G and s[1] to P-G  */\n\n        /* s[0] = (Py^2 + Gy^2 - 2 Py Gy)/(Px - Gx)^2 - Px - Gx - 486662  */\n        /* s[1] = (Py^2 + Gy^2 + 2 Py Gy)/(Px - Gx)^2 - Px - Gx - 486662  */\n\n        x_to_y2(t1[0], t2[0], p[1]); /* t2[0] = Py^2  */\n        sqrt(t1[0], t2[0]); /* t1[0] = Py or -Py  */\n        j = is_negative(t1[0]); /*      ... check which  */\n        add(t2[0], t2[0], C39420360); /* t2[0] = Py^2 + Gy^2  */\n        mul(t2[1], BASE_2Y, t1[0]); /* t2[1] = 2 Py Gy or -2 Py Gy  */\n        sub(t1[j], t2[0], t2[1]); /* t1[0] = Py^2 + Gy^2 - 2 Py Gy  */\n        add(t1[1 - j], t2[0], t2[1]); /* t1[1] = Py^2 + Gy^2 + 2 Py Gy  */\n        cpy(t2[0], p[1]); /* t2[0] = Px  */\n        sub(t2[0], t2[0], C9); /* t2[0] = Px - Gx  */\n        sqr(t2[1], t2[0]); /* t2[1] = (Px - Gx)^2  */\n        recip(t2[0], t2[1], 0); /* t2[0] = 1/(Px - Gx)^2  */\n        mul(s[0], t1[0], t2[0]); /* s[0] = t1[0]/(Px - Gx)^2  */\n        sub(s[0], s[0], p[1]); /* s[0] = t1[0]/(Px - Gx)^2 - Px  */\n        sub(s[0], s[0], C486671); /* s[0] = X(P+G)  */\n        mul(s[1], t1[1], t2[0]); /* s[1] = t1[1]/(Px - Gx)^2  */\n        sub(s[1], s[1], p[1]); /* s[1] = t1[1]/(Px - Gx)^2 - Px  */\n        sub(s[1], s[1], C486671); /* s[1] = X(P-G)  */\n        mul_small(s[0], s[0], 1); /* reduce s[0] */\n        mul_small(s[1], s[1], 1); /* reduce s[1] */\n\n        /* prepare the chain  */\n        for (i = 0; i < 32; i++) {\n            vi = (vi >> 8) ^ (v[i] & 0xFF) ^ ((v[i] & 0xFF) << 1);\n            hi = (hi >> 8) ^ (h[i] & 0xFF) ^ ((h[i] & 0xFF) << 1);\n            nvh = ~(vi ^ hi);\n            di = (nvh & (di & 0x80) >> 7) ^ vi;\n            di ^= nvh & (di & 0x01) << 1;\n            di ^= nvh & (di & 0x02) << 1;\n            di ^= nvh & (di & 0x04) << 1;\n            di ^= nvh & (di & 0x08) << 1;\n            di ^= nvh & (di & 0x10) << 1;\n            di ^= nvh & (di & 0x20) << 1;\n            di ^= nvh & (di & 0x40) << 1;\n            d[i] = di & 0xFF;\n        }\n\n        di = ((nvh & (di & 0x80) << 1) ^ vi) >> 8;\n\n        /* initialize state */\n        set(yx[0], 1);\n        cpy(yx[1], p[di]);\n        cpy(yx[2], s[0]);\n        set(yz[0], 0);\n        set(yz[1], 1);\n        set(yz[2], 1);\n\n        /* y[0] is (even)P + (even)G\n         * y[1] is (even)P + (odd)G  if current d-bit is 0\n         * y[1] is (odd)P + (even)G  if current d-bit is 1\n         * y[2] is (odd)P + (odd)G\n         */\n\n        vi = 0;\n        hi = 0;\n\n        /* and go for it! */\n        for (i = 32; i-- !== 0;) {\n            vi = (vi << 8) | (v[i] & 0xFF);\n            hi = (hi << 8) | (h[i] & 0xFF);\n            di = (di << 8) | (d[i] & 0xFF);\n\n            for (j = 8; j-- !== 0;) {\n                mont_prep(t1[0], t2[0], yx[0], yz[0]);\n                mont_prep(t1[1], t2[1], yx[1], yz[1]);\n                mont_prep(t1[2], t2[2], yx[2], yz[2]);\n\n                k = ((vi ^ vi >> 1) >> j & 1)\n                    + ((hi ^ hi >> 1) >> j & 1);\n                mont_dbl(yx[2], yz[2], t1[k], t2[k], yx[0], yz[0]);\n\n                k = (di >> j & 2) ^ ((di >> j & 1) << 1);\n                mont_add(t1[1], t2[1], t1[k], t2[k], yx[1], yz[1],\n                    p[di >> j & 1]);\n\n                mont_add(t1[2], t2[2], t1[0], t2[0], yx[2], yz[2],\n                    s[((vi ^ hi) >> j & 2) >> 1]);\n            }\n        }\n\n        k = (vi & 1) + (hi & 1);\n        recip(t1[0], yz[k], 0);\n        mul(t1[1], yx[k], t1[0]);\n\n        var Y = [];\n        pack(t1[1], Y);\n        return Y;\n    }\n\n    /* Key-pair generation\n     *   P  [out] your public key\n     *   s  [out] your private key for signing\n     *   k  [out] your private key for key agreement\n     *   k  [in]  32 random bytes\n     * s may be NULL if you don't care\n     *\n     * WARNING: if s is not NULL, this function has data-dependent timing */\n    function keygen (k) {\n        var P = [];\n        var s = [];\n        k = k || [];\n        clamp(k);\n        core(P, s, k, null);\n\n        return { p: P, s: s, k: k };\n    }\n\n    return {\n        sign: sign,\n        verify: verify,\n        keygen: keygen\n    };\n}();\n\n// Copyright (c) 2007 Michele Bini\n// Konstantin Welke, 2008:\n// - moved into .js file, renamed all c255lname to curve25519_name\n// - added curve25519_clamp()\n// - functions to read from/to 8bit string\n// - removed base32/hex functions (cleanup)\n// - removed setbit function (cleanup, had a bug anyway)\n// BloodyRookie 2014:\n// - ported part of the java implementation by Dmitry Skiba to js and merged into this file \n// - profiled for higher speed\n//\n// This program is free software; you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation; either version 2 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along\n// with this program; if not, write to the Free Software Foundation, Inc.,\n// 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA. */\n//\n// The original curve25519 library was released into the public domain\n// by Daniel J. Bernstein\n\n\ncurve25519_zero = function() {\n  return [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_one = function() {\n  return [1,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_two = function() {\n  return [2,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_nine = function() {\n  return [9,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_486671 = function() {\n  return [27919,7,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_39420360 = function() {\n  return [33224,601,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n}\n\ncurve25519_r2y = function() {\n  return [0x1670,0x4000,0xf219,0xd369,0x2248,0x4845,0x679a,0x884d,0x5d19,0x16bf,0xda74,0xe57d,0x5e53,0x3705,0x3526,0x17c0];\n}\n\ncurve25519_2y = function() {\n  return [0x583b,0x0262,0x74bb,0xac2c,0x3c9b,0x2507,0x6503,0xdb85,0x5d66,0x116e,0x45a7,0x3fc2,0xf296,0x8ebe,0xccbc,0x3ea3];\n}\n\ncurve25519_clamp = function(curve) {\n  curve[0] &= 0xFFF8;\n  curve[15] &= 0x7FFF;\n  curve[15] |= 0x4000;\n  return curve;\n}\n\ncurve25519_getbit = function(curve, c) {\n  return ~~(curve[~~(c / 16)] / Math.pow(2, c % 16)) % 2;\n}\n  \ncurve25519_prime = [0xffff-18, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0x7fff];\n\n/* group order (a prime near 2^252+2^124) */\ncurve25519_order = [\n\t    237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20,\n\t    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16];\n\ncurve25519_order_times_8 = [\n\t    104, 159, 174, 231, 210, 24, 147, 192, 178, 230, 188, 23, 245, 206, 247, 166,\n\t    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128];\n\n\ncurve25519_convertToByteArray = function(a) {\n\tvar b = new Int8Array(32);\n\tvar i;\n\tfor (i=0; i<16; i++)\n\t{\n\t\tb[2*i] = a[i] & 0xff;\n\t\tb[2*i+1] = a[i] >> 8;\n\t}\n\t\n\treturn b;\n}\n\ncurve25519_convertToShortArray = function(a) {\n\tvar b = new Array(16);\n\tvar i, val1, val2;\n\tfor (i=0; i<16; i++)\n\t{\n\t\tval1 = a[i*2];\n\t\tif (val1 < 0)\n\t\t{\n\t\t\tval1 +=256;\n\t\t}\n\t\tval2 = a[i*2+1];\n\t\tif (val2 < 0)\n\t\t{\n\t\t\tval2 +=256;\n\t\t}\n\t\tb[i] = val1 + val2*256;\n\t}\n\treturn b;\n\t\n}\n\ncurve25519_fillShortArray = function(src, dest) {\n\tvar i;\n\tfor (i=0; i<16; i++)\n\t{\n\t\tdest[i] = src[i];\n\t}\n}\n\ncurve25519_fillByteArray = function(src, dest) {\n\tvar i;\n\tfor (i=0; i<32; i++)\n\t{\n\t\tdest[i] = src[i];\n\t}\n}\n\ncurve25519_log16 = function(text, a) {\n\tvar b = shortArray_to_hex_string(a);\n\taddText(text + b);\n}\n\ncurve25519_log32 = function(text, a) {\n\tvar b = byteArray_to_hex_string(a);\n\taddText(text + b);\n}\n\ncurve25519_cpy32 = function(a) {\n\tvar b = new Int8Array(32);\n\tfor (i = 0; i < 32; i++)\n\t{\n\t\tb[i] = a[i];\n\t}\n\treturn b;\n}\n\ncurve25519_mula_small = function(p, q, m, x, n, z) {\n\tvar v=0;\n\tfor (j=0; j<n; ++j) \n\t{\n\t\tv += (q[j+m] & 0xFF) + z * (x[j] & 0xFF);\n\t\tp[j+m] = (v & 0xFF);\n\t\tv >>= 8;\n\t}\n\treturn v;\t\t\n}\n\ncurve25519_mula32 = function(p, x, y, t, z) {\n\tvar n = 31;\n\tvar w = 0;\n\tfor (i=0; i < t; i++) \n\t{\n\t\tzy = z * (y[i] & 0xFF);\n\t\tw += curve25519_mula_small(p, p, i, x, n, zy) + (p[i+n] & 0xFF) + zy * (x[n] & 0xFF);\n\t\tp[i+n] = (w & 0xFF);\n\t\tw >>= 8;\n\t}\n\tp[i+n] = ((w + (p[i+n] & 0xFF)) & 0xFF);\n\treturn w >> 8;\n}\n\ncurve25519_divmod = function(q, r, n, d, t) {\n\tvar rn = 0, z=0;\n\tvar dt = ((d[t-1] & 0xFF) << 8);\n\tif (t>1) \n\t{\n\t\tdt |= (d[t-2] & 0xFF);\n\t}\n\twhile (n-- >= t) \n\t{\n\t\tz = (rn << 16) | ((r[n] & 0xFF) << 8);\n\t\tif (n>0) \n\t\t{\n\t\t\tz |= (r[n-1] & 0xFF);\n\t\t}\n\t\tz = parseInt(z/dt);\n\t\trn += curve25519_mula_small(r,r, n-t+1, d, t, -z);\n\t\tq[n-t+1] = ((z + rn) & 0xFF); // rn is 0 or -1 (underflow)\n\t\tcurve25519_mula_small(r,r, n-t+1, d, t, -rn);\n\t\trn = (r[n] & 0xFF);\n\t\tr[n] = 0;\n\t}\n\tr[t-1] = (rn & 0xFF);\n}\n\ncurve25519_numsize = function(x, n)  {\n\twhile (n--!=0 && x[n]==0)\n\t\t;\n\treturn n+1;\n}\n\ncurve25519_egcd32 = function(x, y, a, b) {\n\tvar an = 0, bn = 32, qn=0, i=0;\n\tfor (i = 0; i < 32; i++)\n\t{\n\t\tx[i] = y[i] = 0;\n\t}\n\tx[0] = 1;\n\tan = curve25519_numsize(a, 32);\n\tif (an==0)\n\t{\n\t\treturn y;\t// division by zero\n\t}\n\ttemp=new Int8Array(32);\n\twhile (true) \n\t{\n\t\tqn = bn - an + 1;\n\t\tcurve25519_divmod(temp, b, bn, a, an);\n\t\tbn = curve25519_numsize(b, bn);\n\t\tif (bn==0)\n\t\t{\n\t\t\treturn x;\n\t\t}\n\t\tcurve25519_mula32(y, x, temp, qn, -1);\n\n\t\tqn = an - bn + 1;\n\t\tcurve25519_divmod(temp, a, an, b, bn);\n\t\tan = curve25519_numsize(a, an);\n\t\tif (an==0)\n\t\t{\n\t\t\treturn y;\n\t\t}\n\t\tcurve25519_mula32(x, y, temp, qn, -1);\n\t}\n}\n\ncurve25519_compare = function (a ,b) {\n  var c;\n  for (c = 15; c >= 0; c--) {\n    var x = a[c];\n    var y = b[c];\n    if (x > y) {\n      return 1;\n    }\n    if (x < y) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\ncurve25519_cpy16 = function(a) {\n\tvar r = new Array(16);\n\tvar i;\n\tfor (i=0; i<16;i++)\n\t{\n\t\tr[i] = a[i];\n\t}\n\treturn r;\n}\n\n/***\n * BloodyRookie: odd numbers are negativ\n */\ncurve25519_isNegative = function(x) {\n\treturn (x[0] & 1);\n}\n\ncurve25519_isOverflow = function(x) {\n\tif (x[15] >= 0x8000) return 1;\n\tif (x[0] >= 0x10000)\n\t{\n\t\tvar i;\n\t\tfor (i=1; i<15; i++)\n\t\t{\n\t\t\tif (x[i] < 0xFFFF)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t\treturn 1;\n\t}\n\telse\t\n\t{\n\t\treturn 0;\n\t}\n}\n\ncurve25519_sqr8h = function (r, a7, a6, a5, a4, a3, a2, a1, a0) {\n  var v=0;\n  r[0] = (v = a0*a0) & 0xffff;\n  r[1] = (v = ~~(v / 0x10000) + 2*a0*a1) & 0xffff;\n  r[2] = (v = ~~(v / 0x10000) + 2*a0*a2 + a1*a1) & 0xffff;\n  r[3] = (v = ~~(v / 0x10000) + 2*a0*a3 + 2*a1*a2) & 0xffff;\n  r[4] = (v = ~~(v / 0x10000) + 2*a0*a4 + 2*a1*a3 + a2*a2) & 0xffff;\n  r[5] = (v = ~~(v / 0x10000) + 2*a0*a5 + 2*a1*a4 + 2*a2*a3) & 0xffff;\n  r[6] = (v = ~~(v / 0x10000) + 2*a0*a6 + 2*a1*a5 + 2*a2*a4 + a3*a3) & 0xffff;\n  r[7] = (v = ~~(v / 0x10000) + 2*a0*a7 + 2*a1*a6 + 2*a2*a5 + 2*a3*a4) & 0xffff;\n  r[8] = (v = ~~(v / 0x10000) + 2*a1*a7 + 2*a2*a6 + 2*a3*a5 + a4*a4) & 0xffff;\n  r[9] = (v = ~~(v / 0x10000) + 2*a2*a7 + 2*a3*a6 + 2*a4*a5) & 0xffff;\n  r[10] = (v = ~~(v / 0x10000) + 2*a3*a7 + 2*a4*a6 + a5*a5) & 0xffff;\n  r[11] = (v = ~~(v / 0x10000) + 2*a4*a7 + 2*a5*a6) & 0xffff;\n  r[12] = (v = ~~(v / 0x10000) + 2*a5*a7 + a6*a6) & 0xffff;\n  r[13] = (v = ~~(v / 0x10000) + 2*a6*a7) & 0xffff;\n  r[14] = (v = ~~(v / 0x10000) + a7*a7) & 0xffff;\n  r[15] = ~~(v / 0x10000);\n}\n\ncurve25519_sqrmodp = function(r, a) {\n  var x = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var y = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var z = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_sqr8h(x, a[15], a[14], a[13], a[12], a[11], a[10], a[9], a[8]);\n  curve25519_sqr8h(z, a[7], a[6], a[5], a[4], a[3], a[2], a[1], a[0]);\n  curve25519_sqr8h(y, a[15] + a[7], a[14] + a[6], a[13] + a[5], a[12] + a[4], a[11] + a[3], a[10] + a[2], a[9] + a[1], a[8] + a[0]);\n  var v=0;\n  r[0] = (v = 0x800000 + z[0] + (y[8] -x[8] -z[8] + x[0] -0x80) * 38) & 0xffff;\n  r[1] = (v = 0x7fff80 + ~~(v / 0x10000) + z[1] + (y[9] -x[9] -z[9] + x[1]) * 38) & 0xffff;\n  r[2] = (v = 0x7fff80 + ~~(v / 0x10000) + z[2] + (y[10] -x[10] -z[10] + x[2]) * 38) & 0xffff;\n  r[3] = (v = 0x7fff80 + ~~(v / 0x10000) + z[3] + (y[11] -x[11] -z[11] + x[3]) * 38) & 0xffff;\n  r[4] = (v = 0x7fff80 + ~~(v / 0x10000) + z[4] + (y[12] -x[12] -z[12] + x[4]) * 38) & 0xffff;\n  r[5] = (v = 0x7fff80 + ~~(v / 0x10000) + z[5] + (y[13] -x[13] -z[13] + x[5]) * 38) & 0xffff;\n  r[6] = (v = 0x7fff80 + ~~(v / 0x10000) + z[6] + (y[14] -x[14] -z[14] + x[6]) * 38) & 0xffff;\n  r[7] = (v = 0x7fff80 + ~~(v / 0x10000) + z[7] + (y[15] -x[15] -z[15] + x[7]) * 38) & 0xffff;\n  r[8] = (v = 0x7fff80 + ~~(v / 0x10000) + z[8] + y[0] -x[0] -z[0] + x[8] * 38) & 0xffff;\n  r[9] = (v = 0x7fff80 + ~~(v / 0x10000) + z[9] + y[1] -x[1] -z[1] + x[9] * 38) & 0xffff;\n  r[10] = (v = 0x7fff80 + ~~(v / 0x10000) + z[10] + y[2] -x[2] -z[2] + x[10] * 38) & 0xffff;\n  r[11] = (v = 0x7fff80 + ~~(v / 0x10000) + z[11] + y[3] -x[3] -z[3] + x[11] * 38) & 0xffff;\n  r[12] = (v = 0x7fff80 + ~~(v / 0x10000) + z[12] + y[4] -x[4] -z[4] + x[12] * 38) & 0xffff;\n  r[13] = (v = 0x7fff80 + ~~(v / 0x10000) + z[13] + y[5] -x[5] -z[5] + x[13] * 38) & 0xffff;\n  r[14] = (v = 0x7fff80 + ~~(v / 0x10000) + z[14] + y[6] -x[6] -z[6] + x[14] * 38) & 0xffff;\n  r[15] = 0x7fff80 + ~~(v / 0x10000) + z[15] + y[7] -x[7] -z[7] + x[15] * 38;\n  curve25519_reduce(r);\n}\n\ncurve25519_mul8h = function(r, a7, a6, a5, a4, a3, a2, a1, a0, b7, b6, b5, b4, b3, b2, b1, b0) {\n  var v=0;\n  r[0] = (v = a0*b0) & 0xffff;\n  r[1] = (v = ~~(v / 0x10000) + a0*b1 + a1*b0) & 0xffff;\n  r[2] = (v = ~~(v / 0x10000) + a0*b2 + a1*b1 + a2*b0) & 0xffff;\n  r[3] = (v = ~~(v / 0x10000) + a0*b3 + a1*b2 + a2*b1 + a3*b0) & 0xffff;\n  r[4] = (v = ~~(v / 0x10000) + a0*b4 + a1*b3 + a2*b2 + a3*b1 + a4*b0) & 0xffff;\n  r[5] = (v = ~~(v / 0x10000) + a0*b5 + a1*b4 + a2*b3 + a3*b2 + a4*b1 + a5*b0) & 0xffff;\n  r[6] = (v = ~~(v / 0x10000) + a0*b6 + a1*b5 + a2*b4 + a3*b3 + a4*b2 + a5*b1 + a6*b0) & 0xffff;\n  r[7] = (v = ~~(v / 0x10000) + a0*b7 + a1*b6 + a2*b5 + a3*b4 + a4*b3 + a5*b2 + a6*b1 + a7*b0) & 0xffff;\n  r[8] = (v = ~~(v / 0x10000) + a1*b7 + a2*b6 + a3*b5 + a4*b4 + a5*b3 + a6*b2 + a7*b1) & 0xffff;\n  r[9] = (v = ~~(v / 0x10000) + a2*b7 + a3*b6 + a4*b5 + a5*b4 + a6*b3 + a7*b2) & 0xffff;\n  r[10] = (v = ~~(v / 0x10000) + a3*b7 + a4*b6 + a5*b5 + a6*b4 + a7*b3) & 0xffff;\n  r[11] = (v = ~~(v / 0x10000) + a4*b7 + a5*b6 + a6*b5 + a7*b4) & 0xffff;\n  r[12] = (v = ~~(v / 0x10000) + a5*b7 + a6*b6 + a7*b5) & 0xffff;\n  r[13] = (v = ~~(v / 0x10000) + a6*b7 + a7*b6) & 0xffff;\n  r[14] = (v = ~~(v / 0x10000) + a7*b7) & 0xffff;\n  r[15] = ~~(v / 0x10000);\n}\n\ncurve25519_mulmodp = function(r, a, b) {\n  var x = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var y = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var z = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_mul8h(x, a[15], a[14], a[13], a[12], a[11], a[10], a[9], a[8], b[15], b[14], b[13], b[12], b[11], b[10], b[9], b[8]);\n  curve25519_mul8h(z, a[7], a[6], a[5], a[4], a[3], a[2], a[1], a[0], b[7], b[6], b[5], b[4], b[3], b[2], b[1], b[0]);\n  curve25519_mul8h(y, a[15] + a[7], a[14] + a[6], a[13] + a[5], a[12] + a[4], a[11] + a[3], a[10] + a[2], a[9] + a[1], a[8] + a[0],\n                   b[15] + b[7], b[14] + b[6], b[13] + b[5], b[12] + b[4], b[11] + b[3], b[10] + b[2], b[9] + b[1], b[8] + b[0]);\n  var v=0;\n  r[0] = (v = 0x800000 + z[0] + (y[8] -x[8] -z[8] + x[0] -0x80) * 38) & 0xffff;\n  r[1] = (v = 0x7fff80 + ~~(v / 0x10000) + z[1] + (y[9] -x[9] -z[9] + x[1]) * 38) & 0xffff;\n  r[2] = (v = 0x7fff80 + ~~(v / 0x10000) + z[2] + (y[10] -x[10] -z[10] + x[2]) * 38) & 0xffff;\n  r[3] = (v = 0x7fff80 + ~~(v / 0x10000) + z[3] + (y[11] -x[11] -z[11] + x[3]) * 38) & 0xffff;\n  r[4] = (v = 0x7fff80 + ~~(v / 0x10000) + z[4] + (y[12] -x[12] -z[12] + x[4]) * 38) & 0xffff;\n  r[5] = (v = 0x7fff80 + ~~(v / 0x10000) + z[5] + (y[13] -x[13] -z[13] + x[5]) * 38) & 0xffff;\n  r[6] = (v = 0x7fff80 + ~~(v / 0x10000) + z[6] + (y[14] -x[14] -z[14] + x[6]) * 38) & 0xffff;\n  r[7] = (v = 0x7fff80 + ~~(v / 0x10000) + z[7] + (y[15] -x[15] -z[15] + x[7]) * 38) & 0xffff;\n  r[8] = (v = 0x7fff80 + ~~(v / 0x10000) + z[8] + y[0] -x[0] -z[0] + x[8] * 38) & 0xffff;\n  r[9] = (v = 0x7fff80 + ~~(v / 0x10000) + z[9] + y[1] -x[1] -z[1] + x[9] * 38) & 0xffff;\n  r[10] = (v = 0x7fff80 + ~~(v / 0x10000) + z[10] + y[2] -x[2] -z[2] + x[10] * 38) & 0xffff;\n  r[11] = (v = 0x7fff80 + ~~(v / 0x10000) + z[11] + y[3] -x[3] -z[3] + x[11] * 38) & 0xffff;\n  r[12] = (v = 0x7fff80 + ~~(v / 0x10000) + z[12] + y[4] -x[4] -z[4] + x[12] * 38) & 0xffff;\n  r[13] = (v = 0x7fff80 + ~~(v / 0x10000) + z[13] + y[5] -x[5] -z[5] + x[13] * 38) & 0xffff;\n  r[14] = (v = 0x7fff80 + ~~(v / 0x10000) + z[14] + y[6] -x[6] -z[6] + x[14] * 38) & 0xffff;\n  r[15] = 0x7fff80 + ~~(v / 0x10000) + z[15] + y[7] -x[7] -z[7] + x[15] * 38;\n  curve25519_reduce(r);\n}\n\ncurve25519_mulasmall = function(r, a, m) {\n  var v=0;\n  r[0] = (v = a[0] * m) & 0xffff;\n  r[1] = (v = ~~(v / 0x10000) + a[1]*m) & 0xffff;\n  r[2] = (v = ~~(v / 0x10000) + a[2]*m) & 0xffff;\n  r[3] = (v = ~~(v / 0x10000) + a[3]*m) & 0xffff;\n  r[4] = (v = ~~(v / 0x10000) + a[4]*m) & 0xffff;\n  r[5] = (v = ~~(v / 0x10000) + a[5]*m) & 0xffff;\n  r[6] = (v = ~~(v / 0x10000) + a[6]*m) & 0xffff;\n  r[7] = (v = ~~(v / 0x10000) + a[7]*m) & 0xffff;\n  r[8] = (v = ~~(v / 0x10000) + a[8]*m) & 0xffff;\n  r[9] = (v = ~~(v / 0x10000) + a[9]*m) & 0xffff;\n  r[10] = (v = ~~(v / 0x10000) + a[10]*m) & 0xffff;\n  r[11] = (v = ~~(v / 0x10000) + a[11]*m) & 0xffff;\n  r[12] = (v = ~~(v / 0x10000) + a[12]*m) & 0xffff;\n  r[13] = (v = ~~(v / 0x10000) + a[13]*m) & 0xffff;\n  r[14] = (v = ~~(v / 0x10000) + a[14]*m) & 0xffff;\n  r[15] = ~~(v / 0x10000) + a[15]*m;\n  curve25519_reduce(r);\n}\n\ncurve25519_addmodp = function(r, a, b) {\n  var v=0;\n  r[0] = (v = (~~(a[15] / 0x8000) + ~~(b[15] / 0x8000)) * 19 + a[0] + b[0]) & 0xffff;\n  r[1] = (v = ~~(v / 0x10000) + a[1] + b[1]) & 0xffff;\n  r[2] = (v = ~~(v / 0x10000) + a[2] + b[2]) & 0xffff;\n  r[3] = (v = ~~(v / 0x10000) + a[3] + b[3]) & 0xffff;\n  r[4] = (v = ~~(v / 0x10000) + a[4] + b[4]) & 0xffff;\n  r[5] = (v = ~~(v / 0x10000) + a[5] + b[5]) & 0xffff;\n  r[6] = (v = ~~(v / 0x10000) + a[6] + b[6]) & 0xffff;\n  r[7] = (v = ~~(v / 0x10000) + a[7] + b[7]) & 0xffff;\n  r[8] = (v = ~~(v / 0x10000) + a[8] + b[8]) & 0xffff;\n  r[9] = (v = ~~(v / 0x10000) + a[9] + b[9]) & 0xffff;\n  r[10] = (v = ~~(v / 0x10000) + a[10] + b[10]) & 0xffff;\n  r[11] = (v = ~~(v / 0x10000) + a[11] + b[11]) & 0xffff;\n  r[12] = (v = ~~(v / 0x10000) + a[12] + b[12]) & 0xffff;\n  r[13] = (v = ~~(v / 0x10000) + a[13] + b[13]) & 0xffff;\n  r[14] = (v = ~~(v / 0x10000) + a[14] + b[14]) & 0xffff;\n  r[15] = ~~(v / 0x10000) + a[15] % 0x8000 + b[15] % 0x8000;\n}\n\ncurve25519_submodp = function(r, a, b) {\n  var v=0;\n  r[0] = (v = 0x80000 + (~~(a[15] / 0x8000) - ~~(b[15] / 0x8000) - 1) * 19 + a[0] - b[0]) & 0xffff;\n  r[1] = (v = ~~(v / 0x10000) + 0x7fff8 + a[1] - b[1]) & 0xffff;\n  r[2] = (v = ~~(v / 0x10000) + 0x7fff8 + a[2] - b[2]) & 0xffff;\n  r[3] = (v = ~~(v / 0x10000) + 0x7fff8 + a[3] - b[3]) & 0xffff;\n  r[4] = (v = ~~(v / 0x10000) + 0x7fff8 + a[4] - b[4]) & 0xffff;\n  r[5] = (v = ~~(v / 0x10000) + 0x7fff8 + a[5] - b[5]) & 0xffff;\n  r[6] = (v = ~~(v / 0x10000) + 0x7fff8 + a[6] - b[6]) & 0xffff;\n  r[7] = (v = ~~(v / 0x10000) + 0x7fff8 + a[7] - b[7]) & 0xffff;\n  r[8] = (v = ~~(v / 0x10000) + 0x7fff8 + a[8] - b[8]) & 0xffff;\n  r[9] = (v = ~~(v / 0x10000) + 0x7fff8 + a[9] - b[9]) & 0xffff;\n  r[10] = (v = ~~(v / 0x10000) + 0x7fff8 + a[10] - b[10]) & 0xffff;\n  r[11] = (v = ~~(v / 0x10000) + 0x7fff8 + a[11] - b[11]) & 0xffff;\n  r[12] = (v = ~~(v / 0x10000) + 0x7fff8 + a[12] - b[12]) & 0xffff;\n  r[13] = (v = ~~(v / 0x10000) + 0x7fff8 + a[13] - b[13]) & 0xffff;\n  r[14] = (v = ~~(v / 0x10000) + 0x7fff8 + a[14] - b[14]) & 0xffff;\n  r[15] = ~~(v / 0x10000) + 0x7ff8 + a[15]%0x8000 - b[15]%0x8000;\n}\n/****\n * BloodyRookie: a^-1 is found via Fermats little theorem:\n * a^p congruent a mod p and therefore a^(p-2) congruent a^-1 mod p\n */\ncurve25519_invmodp = function (r, a, sqrtassist) {\n  var r1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r4 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r5 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var i=0;\n  curve25519_sqrmodp(r2, a);\t\t\t\t\t//  2 == 2 * 1\t\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t//  4 == 2 * 2\t\n  curve25519_sqrmodp(r1, r3);\t\t\t\t\t//  8 == 2 * 4\t\n  curve25519_mulmodp(r3, r1, a);\t\t\t\t//  9 == 8 + 1\t\n  curve25519_mulmodp(r1, r3, r2);\t\t\t\t// 11 == 9 + 2\t\n  curve25519_sqrmodp(r2, r1);\t\t\t\t\t// 22 == 2 * 11\t\n  curve25519_mulmodp(r4, r2, r3);\t\t\t\t// 31 == 22 + 9\n \t\t\t\t\t\t\t\t\t\t\t\t//\t== 2^5   - 2^0\t\n  curve25519_sqrmodp(r2, r4);\t\t\t\t\t// 2^6   - 2^1\t\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t// 2^7   - 2^2\t\n  curve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^8   - 2^3\t\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t// 2^9   - 2^4\t\n  curve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^10  - 2^5\t\n  curve25519_mulmodp(r3, r2, r4);\t\t\t\t// 2^10  - 2^0\t\n  curve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^11  - 2^1\t\n  curve25519_sqrmodp(r4, r2);\t\t\t\t\t// 2^12  - 2^2\t\n  for (i = 1; i < 5; i++) {\n\tcurve25519_sqrmodp(r2, r4);\n\tcurve25519_sqrmodp(r4, r2);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^20  - 2^10\t\n  curve25519_mulmodp(r2, r4, r3);\t\t\t\t// 2^20  - 2^0\t\n  curve25519_sqrmodp(r4, r2);\t\t\t\t\t// 2^21  - 2^1\t\n  curve25519_sqrmodp(r5, r4);\t\t\t\t\t// 2^22  - 2^2\t\n  for (i = 1; i < 10; i++) {\n\tcurve25519_sqrmodp(r4, r5);\n\tcurve25519_sqrmodp(r5, r4);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^40  - 2^20\t\n  curve25519_mulmodp(r4, r5, r2);\t\t\t\t// 2^40  - 2^0\t\n  for (i = 0; i < 5; i++) {\n\tcurve25519_sqrmodp(r2, r4);\n\tcurve25519_sqrmodp(r4, r2);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^50  - 2^10\t\n  curve25519_mulmodp(r2, r4, r3);\t\t\t\t// 2^50  - 2^0\t\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t// 2^51  - 2^1\t\n  curve25519_sqrmodp(r4, r3);\t\t\t\t\t// 2^52  - 2^2\t\n  for (i = 1; i < 25; i++) {\n\tcurve25519_sqrmodp(r3, r4);\n\tcurve25519_sqrmodp(r4, r3);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^100 - 2^50 \n  curve25519_mulmodp(r3, r4, r2);\t\t\t\t// 2^100 - 2^0\t\n  curve25519_sqrmodp(r4, r3);\t\t\t\t\t// 2^101 - 2^1\t\n  curve25519_sqrmodp(r5, r4);\t\t\t\t\t// 2^102 - 2^2\t\n  for (i = 1; i < 50; i++) {\n\tcurve25519_sqrmodp(r4, r5);\n\tcurve25519_sqrmodp(r5, r4);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^200 - 2^100 \n  curve25519_mulmodp(r4, r5, r3);\t\t\t\t// 2^200 - 2^0\t\n  for (i = 0; i < 25; i++) {\n\tcurve25519_sqrmodp(r5, r4);\n\tcurve25519_sqrmodp(r4, r5);\n  } \t\t\t\t\t\t\t\t\t\t\t// 2^250 - 2^50\t\n  curve25519_mulmodp(r3, r4, r2);\t\t\t\t// 2^250 - 2^0\t\n  curve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^251 - 2^1\t\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t// 2^252 - 2^2\t\n  if (sqrtassist == 1) {\n\tcurve25519_mulmodp(r, a, r3);\t\t\t\t// 2^252 - 3 \n  } else {\n\tcurve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^253 - 2^3\t\n\tcurve25519_sqrmodp(r3, r2);\t\t\t\t\t// 2^254 - 2^4\t\n\tcurve25519_sqrmodp(r2, r3);\t\t\t\t\t// 2^255 - 2^5\t\n\tcurve25519_mulmodp(r, r2, r1);\t\t\t\t// 2^255 - 21\t\n  }\n}\n\n/******\n * BloodyRookie: Finding a square root mod p of x if we already know it exists and p congruent 3 mod 8.\n * Using x^((p-1)/2) congruent 1 mod p and 2^((p-1)/2) congruent -1 mod p\n * because of Eulers criterium we see that when we set v=(2x)^((p-5)/8) then\n * i:=2xv^2 is a square root of -1 and thus r=+xv(i-1) and r=-xv(i-1) are the square roots of x.\n */\ncurve25519_sqrtmodp = function(r, x) {\n  var r1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r4 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_addmodp(r1, x,x);\t\t\t\t\t\t\t\t// r1 = 2x\n  curve25519_invmodp(r2, r1, 1);\t\t\t\t\t\t\t// r2 = (2x)^((p-5)/8) =: v\n  curve25519_sqrmodp(r3, r2);\t\t\t\t\t\t\t\t// r3 = v^2\n  curve25519_mulmodp(r4, r1, r3);\t\t\t\t\t\t\t// r4 = 2xv^2 =: i\n  curve25519_submodp(r, r4, curve25519_one());\t\t\t\t//  r = i-1\n  curve25519_mulmodp(r1, r2, r);\t\t\t\t\t\t\t// r1 = v(i-1)\n  curve25519_mulmodp(r, x, r1);\t\t\t\t\t\t\t\t//  r = xv(i-1)\n}\n\ncurve25519_reduce = function (a) {\n  curve25519_reduce2(a);\n  \n  /**\n   * BloodyRookie: special case for p <= a < 2^255\n   */\n  if ((a[15] != 0x7FFF || a[14] != 0xFFFF || a[13] != 0xFFFF || a[12] != 0xFFFF || a[11] != 0xFFFF || a[10] != 0xFFFF || a[9] != 0xFFFF ||  a[8] != 0xFFFF || \n\t   a[7] != 0xFFFF  || a[6] != 0xFFFF  || a[5] != 0xFFFF  || a[4] != 0xFFFF  || a[3] != 0xFFFF  || a[2] != 0xFFFF || a[1] != 0xFFFF || a[0] < 0xFFED))\n  {\n\t  return;\n  }\n  \n  var i;\n  for (i=1; i<16; i++)\n  {\n\t  a[i] = 0;\n  }\n  a[0] = a[0] - 0xFFED;\n}\ncurve25519_reduce2 = function (a) {\n  var v = a[15];\n  if (v < 0x8000) return;\n  a[15] = v % 0x8000;\n  v = ~~(v / 0x8000) * 19;\n  a[0] = (v += a[0]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[1] = (v += a[1]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[2] = (v += a[2]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[3] = (v += a[3]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[4] = (v += a[4]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[5] = (v += a[5]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[6] = (v += a[6]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[7] = (v += a[7]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[8] = (v += a[8]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[9] = (v += a[9]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[10] = (v += a[10]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[11] = (v += a[11]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[12] = (v += a[12]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[13] = (v += a[13]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[14] = (v += a[14]) & 0xffff;\n  if ((v = ~~(v / 0x10000)) < 1) return;\n  a[15] += v;\n}\n\n/**\n * Montgomery curve with A=486662 and B=1\n */\ncurve25519_x_to_y2 = function(r, x) {\n  var r1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_sqrmodp(r1, x);\t\t\t\t\t\t\t\t\t// r1 = x^2\n  curve25519_mulasmall(r2, x, 486662);\t\t\t\t\t\t\t// r2 = Ax\n  curve25519_addmodp(r, r1, r2);\t\t\t\t\t\t\t\t//  r = x^2 + Ax\n  curve25519_addmodp(r1, r, curve25519_one());\t\t\t\t\t// r1 = x^2 + Ax + 1\n  curve25519_mulmodp(r, r1, x);\t\t\t\t\t\t\t\t\t//  r = x^3 + Ax^2 + x\n}\n\ncurve25519_prep = function(r, s, a, b) {\n  curve25519_addmodp(r, a, b);\n  curve25519_submodp(s, a, b);\n}\n\n/****\n * BloodyRookie: Doubling a point on a Montgomery curve:\n * Point is given in projective coordinates p=x/z\n * 2*P = r/s, \n * r = (x+z)^2 * (x-z)^2\n * s = ((((x+z)^2 - (x-z)^2) * 121665) + (x+z)^2) * ((x+z)^2 - (x-z)^2) \n *   = 4*x*z * (x^2 + 486662*x*z + z^2)\n *   = 4*x*z * ((x-z)^2 + ((486662+2)/4)(4*x*z))\n */\ncurve25519_dbl = function(r, s, t1, t2) {\n  var r1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r4 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_sqrmodp(r1, t1);\t\t\t\t\t\t\t\t\t// r1 = t1^2\n  curve25519_sqrmodp(r2, t2);\t\t\t\t\t\t\t\t\t// r2 = t2^2\n  curve25519_submodp(r3, r1, r2);\t\t\t\t\t\t\t\t// r3 = t1^2 - t2^2\n  curve25519_mulmodp(r, r2, r1);\t\t\t\t\t\t\t\t//  r = t1^2 * t2^2\n  curve25519_mulasmall(r2, r3, 121665);\t\t\t\t\t\t\t// r2 = (t1^2 - t2^2) * 121665\n  curve25519_addmodp(r4, r2, r1)\t\t\t\t\t\t\t\t// r4 = (t1^2 - t2^2) * 121665 + t1^2\n  curve25519_mulmodp(s, r4, r3);\t\t\t\t\t\t\t\t//  s = ((t1^2 - t2^2) * 121665 + t1^2) * (t1^2 - t2^2)\n}\n\n/****\n * BloodyRookie: Adding 2 points on a Montgomery curve:\n * R = Q + P = r/s when given\n * Q = x/z, P = x_p/z_p, P-Q = x_1/1\n * r = ((x-z)*(x_p+z_p) + (x+z)*(x_p-z_p))^2\n * s = x_1*((x-z)*(x_p+z_p) - (x+z)*(x_p-z_p))^2\n */\nfunction curve25519_sum(r, s, t1, t2, t3, t4, x_1) {\n  var r1 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r2 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r3 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  var r4 = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\n  curve25519_mulmodp(r1, t2, t3);\t\t\t\t\t\t\t\t// r1 = t2 * t3\n  curve25519_mulmodp(r2, t1, t4);\t\t\t\t\t\t\t\t// r2 = t1 * t4\n  curve25519_addmodp(r3, r1, r2);\t\t\t\t\t\t\t\t// r3 = t2 * t3 + t1 * t4\n  curve25519_submodp(r4, r1, r2);\t\t\t\t\t\t\t\t// r4 = t2 * t3 - t1 * t4\n  curve25519_sqrmodp(r, r3);\t\t\t\t\t\t\t\t\t//  r = (t2 * t3 + t1 * t4)^2\n  curve25519_sqrmodp(r1, r4);\t\t\t\t\t\t\t\t\t// r1 = (t2 * t3 - t1 * t4)^2\n  curve25519_mulmodp(s, r1, x_1);\t\t\t\t\t\t\t\t//  s = (t2 * t3 - t1 * t4)^2 * x_1\n}\n\nfunction curve25519_(f, c, s) {\n  var j, a, x_1, q, fb, counter=0; \n  var t = new Array(16), t1 = new Array(16), t2 = new Array(16), t3 = new Array(16), t4 = new Array(16);\n  var sb = new Int8Array(32);\n  var temp1 = new Int8Array(32);\n  var temp2 = new Int8Array(64);\n  var temp3 = new Int8Array(64);\n\n  x_1 = c;\n  q = [ curve25519_one(), curve25519_zero() ];\n  a = [ x_1, curve25519_one() ];\n\n  var n = 255;\n\n  /**********************************************************************\n   * BloodyRookie:                                                      *\n   * Given f = f0*2^0 + f1*2^1 + ... + f255*2^255 and Basepoint a=9/1   * \n   * calculate f*a by applying the Montgomery ladder (const time algo): *\n   * r0 := 0 (point at infinity)                                        *\n   * r1 := a                                                            *\n   * for i from 255 to 0 do                                             *\n   *   if fi = 0 then                                                   *\n   *      r1 := r0 + r1                                                 *          \n   *      r0 := 2r0                                                     *\n   *   else                                                             *\n   *      r0 := r0 + r1                                                 *\n   *      r1 := 2r1                                                     *\n   *                                                                    *\n   * Result: r0 = x-coordinate of f*a                                   *\n   **********************************************************************/\n  var r0 = new Array(new Array(16), new Array(16));\n  var r1 = new Array(new Array(16), new Array(16));\n  var t1 = new Array(16), t2 = new Array(16);\n  var t3 = new Array(16), t4 = new Array(16);\n  var fi;\n  while (n >= 0) \n  {\n    fi = curve25519_getbit(f, n);\n    if (fi == 0) \n    {\n       curve25519_prep(t1, t2, a[0], a[1]); \n       curve25519_prep(t3, t4, q[0], q[1]); \n       curve25519_sum(r1[0], r1[1], t1, t2, t3, t4, x_1);\n       curve25519_dbl(r0[0], r0[1], t3, t4);\n    } \n    else \n    {\n       curve25519_prep(t1, t2, q[0], q[1]); \n       curve25519_prep(t3, t4, a[0], a[1]); \n       curve25519_sum(r0[0], r0[1], t1, t2, t3, t4, x_1);\n       curve25519_dbl(r1[0], r1[1], t3, t4);\n    }\n    q = r0; a = r1;\n    n--;\n  }\n  curve25519_invmodp(t, q[1], 0);\n  curve25519_mulmodp(t1, q[0], t);\n  q[0] = curve25519_cpy16(t1);\n  \n  // q[0]=x-coordinate of k*G=:Px\n  // q[1]=z-coordinate of k*G=:Pz\n  // a = q + G = P + G\n  if (s != null)\n  {\n\t  /*************************************************************************\n\t   * BloodyRookie: Recovery of the y-coordinate of point P:                *\n\t   *                                                                       *\n\t   * If P=(x,y), P1=(x1, y1), P2=(x2,y2) and P2 = P1 + P then              *\n\t   *                                                                       *\n\t   * y1 = ((x1 * x + 1)(x1 + x + 2A) - 2A - (x1 - x)^2 * x2)/2y            *\n\t   *                                                                       *\n\t   * Setting P2=Q, P1=P and P=G in the above formula we get                *\n\t   *                                                                       *\n\t   * Py =  ((Px * Gx + 1) * (Px + Gx + 2A) - 2A - (Px - Gx)^2 * Qx)/(2*Gy) *\n\t   *    = -((Qx + Px + Gx + A) * (Px - Gx)^2 - Py^2 - Gy^2)/(2*Gy)         *\n\t   *************************************************************************/\n\t  t = curve25519_cpy16(q[0]);\n\t  curve25519_x_to_y2(t1, t);\t\t\t\t\t\t\t\t// t1 = Py^2\n\t  curve25519_invmodp(t3, a[1], 0);\n\t  curve25519_mulmodp(t2, a[0], t3);\t\t\t\t\t\t\t// t2 = (P+G)x = Qx\n\t  curve25519_addmodp(t4, t2, t);\t\t\t\t\t\t\t// t4 =  Qx + Px\n\t  curve25519_addmodp(t2, t4, curve25519_486671());\t\t\t// t2 = Qx + Px + Gx + A  \n\t  curve25519_submodp(t4, t, curve25519_nine());\t\t\t\t// t4 = Px - Gx\n\t  curve25519_sqrmodp(t3, t4);\t\t\t\t\t\t\t\t// t3 = (Px - Gx)^2\n\t  curve25519_mulmodp(t4, t2, t3);\t\t\t\t\t\t\t// t4 = (Qx + Px + Gx + A) * (Px - Gx)^2\n\t  curve25519_submodp(t, t4, t1);\t\t\t\t\t\t\t//  t = (Qx + Px + Gx + A) * (Px - Gx)^2 - Py^2\n\t  curve25519_submodp(t4, t, curve25519_39420360());\t\t\t// t4 = (Qx + Px + Gx + A) * (Px - Gx)^2 - Py^2 - Gy^2\n\t  curve25519_mulmodp(t1, t4, curve25519_r2y())\t\t\t\t// t1 = ((Qx + Px + Gx + A) * (Px - Gx)^2 - Py^2 - Gy^2)/(2Gy) = -Py\n\t  fb = curve25519_convertToByteArray(f);\n\t  j = curve25519_isNegative(t1);\n\t  if (j != 0)\n\t  {\n\t\t  /***\n\t\t   * Py is positiv, so just copy\n\t\t   */\n\t\t  sb = curve25519_cpy32(fb);\n\t  }\n\t  else\n\t  {\n\t\t  /***\n\t\t   * Py is negative:\n\t\t   * We will take s = -f^-1 mod q instead of s=f^-1 mod q\n\t\t   */\n\t\t  curve25519_mula_small(sb, curve25519_order_times_8, 0, fb, 32, -1);\n\t  }\n\t  \n\t  temp1 = curve25519_cpy32(curve25519_order);\n\t  temp1 = curve25519_egcd32(temp2, temp3, sb, temp1);\n\t  sb = curve25519_cpy32(temp1);\n\t  if ((sb[31] & 0x80)!=0)\n\t  {\n\t\t  curve25519_mula_small(sb, sb, 0, curve25519_order, 32, 1);\n\t  }\n\t  var stmp = curve25519_convertToShortArray(sb);\n\t  curve25519_fillShortArray(stmp, s);\n  }\n\n  return q[0];\n}\n\ncurve25519_keygen = function(s, curve) {\n\tcurve25519_clamp(curve);\n\treturn curve25519_(curve, curve25519_nine(), s);\n}\n\n/* Signature generation primitive, calculates (x-h)s mod q\n *   v  [out] signature value\n *   h  [in]  signature hash (of message, signature pub key, and context data)\n *   x  [in]  signature private key\n *   s  [in]  private key for signing\n * returns true on success, false on failure (use different x or h)\n */\ncurve25519_sign = function(v, h, x, s) {\n\ttmp1=new Int8Array(65);\n\ttmp2=new Int8Array(33);\n\tfor (i = 0; i < 32; i++)\n\t{\n\t\tv[i] = 0;\n\t}\n\tcurve25519_mula_small(v, x, 0, h, 32, -1);\n\tcurve25519_mula_small(v, v, 0, curve25519_order, 32, parseInt((15-v[31])/16));\n\tcurve25519_mula32(tmp1, v, s, 32, 1);\n\tcurve25519_divmod(tmp2, tmp1, 64, curve25519_order, 32);\n\tw=0;\n\tfor (k = 0; k < 32; k++)\n\t{\n\t\tv[k] = tmp1[k];\n\t\tw |= v[k];\n\t}\n\treturn w != 0;\n}\n\ncurve25519_verify = function(Y, v, h, P) {\n\td=new Int8Array(32);\n\tyx=new Array(new Array(16), new Array(16), new Array(16));\n\tyz=new Array(new Array(16), new Array(16), new Array(16));\n\tvar s=new Array(new Array(16), new Array(16));\n\tvar q=new Array(new Array(16), new Array(16));\n\tvar t1=new Array(new Array(16), new Array(16), new Array(16));\n\tvar t2=new Array(new Array(16), new Array(16), new Array(16));\n\tvar vi = 0, hi = 0, di = 0, nvh=0, i=0, j=0, k=0, counter=1;\n\n\t/******************************************************************\n     * Set s[0] to P+G and s[1] to P-G.                               *\n     * If sqrt(Py^2) is negativ we switch s[0] and s[1]               *\n\t *                                                                *\n     * s[0] = (Py^2 + Gy^2 - 2 Py Gy)/(Px - Gx)^2 - Px - Gx - 486662  *\n     * s[1] = (Py^2 + Gy^2 + 2 Py Gy)/(Px - Gx)^2 - Px - Gx - 486662  *\n     ******************************************************************/\n\n\tvar p = [ curve25519_nine(), curve25519_convertToShortArray(P) ];\n\tcurve25519_x_to_y2(q[0], p[1]);\t\t\t\t\t\t\t\t// q[0] = Py^2\n\tcurve25519_sqrtmodp(t1[0], q[0]);\t\t\t\t\t\t\t// t1[0] = +-Py\n\tj = curve25519_isNegative(t1[0]);\n\tcurve25519_addmodp(t2[0], q[0], curve25519_39420360());\t\t// t2[0] = Py^2 + Gy^2\n\tcurve25519_mulmodp(t2[1], curve25519_2y(), t1[0]);\t\t\t// t2[1] = +-Py * 2Gy\n\tcurve25519_submodp(t1[j], t2[0], t2[1]);\t\t\t\t\t// t1[j] = Py^2 + Gy^2 - +-Py * 2Gy\n\tcurve25519_addmodp(t1[1-j], t2[0], t2[1]);\t\t\t\t\t// t1[1-j] = Py^2 + Gy^2 + +-Py * 2Gy\n\tq[0] = curve25519_cpy16(p[1]);\t\t\t\t\t\t\t\t// q[0] = Px\n\tcurve25519_submodp(t2[0], q[0], curve25519_nine());\t\t\t// t2[0] = Px-Gx\n\tcurve25519_sqrmodp(t2[1], t2[0]);\t\t\t\t\t\t\t// t2[1] = (Px-Gx)^2\n\tcurve25519_invmodp(t2[0], t2[1], 0);\t\t\t\t\t\t// t2[0] = 1/(Px-Gx)^2\n\tcurve25519_mulmodp(q[0], t1[0], t2[0]);\t\t\t\t\t\t// q[0] = (Py^2 + Gy^2 - Py * 2Gy)/(Px-Gx)^2\n\tcurve25519_submodp(q[1], q[0], p[1]);\t\t\t\t\t\t// q[1] = (Py^2 + Gy^2 - Py * 2Gy)/(Px-Gx)^2 - Px\n\tcurve25519_submodp(s[0], q[1], curve25519_486671());\t\t// s[0] = (Py^2 + Gy^2 - Py * 2Gy)/(Px-Gx)^2 - Px - Gx - A = P+Q\n\tcurve25519_mulmodp(q[0], t1[1], t2[0]);\t\t\t\t\t\t// q[0] = (Py^2 + Gy^2 + Py * 2Gy)/(Px-Gx)^2\n\tcurve25519_submodp(q[1], q[0], p[1]);\t\t\t\t\t\t// q[1] = (Py^2 + Gy^2 + Py * 2Gy)/(Px-Gx)^2 - Px\n\tcurve25519_submodp(s[1], q[1], curve25519_486671());\t\t// s[1] = (Py^2 + Gy^2 + Py * 2Gy)/(Px-Gx)^2 - Px - Gx - A = P-Q\n\t\n\t/**\n\t * Fast algorithm for computing vP+hG\n\t */\n\tfor (i = 0; i < 32; i++) \n\t{\n\t\tvi = (vi >> 8) ^ (v[i] & 0xFF) ^ ((v[i] & 0xFF) << 1);\n\t\thi = (hi >> 8) ^ (h[i] & 0xFF) ^ ((h[i] & 0xFF) << 1);\n\t\tnvh = ~(vi ^ hi);\n\t\tdi = (nvh & (di & 0x80) >> 7) ^ vi;\n\t\tdi ^= nvh & (di & 0x01) << 1;\n\t\tdi ^= nvh & (di & 0x02) << 1;\n\t\tdi ^= nvh & (di & 0x04) << 1;\n\t\tdi ^= nvh & (di & 0x08) << 1;\n\t\tdi ^= nvh & (di & 0x10) << 1;\n\t\tdi ^= nvh & (di & 0x20) << 1;\n\t\tdi ^= nvh & (di & 0x40) << 1;\n\t\td[i] = (di & 0xFF);\n\t}\n\n\tdi = ((nvh & (di & 0x80) << 1) ^ vi) >> 8;\n\n\t/**\n\t * yx[0]/yz[0] = point at infinity\n\t */\n\tyx[0] = curve25519_cpy16(curve25519_one());\n\tyx[1] = curve25519_cpy16(p[di]);\n\tyx[2] = curve25519_cpy16(s[0]);\n\tyz[0] = curve25519_cpy16(curve25519_zero());\n\tyz[1] = curve25519_cpy16(curve25519_one());\n\tyz[2] = curve25519_cpy16(curve25519_one());\n\t\n\tvi = 0;\n\thi = 0;\n\n\tfor (i = 32; i-- != 0; i=i) \n\t{\n\t\tvi = (vi << 8) | (v[i] & 0xFF);\n\t\thi = (hi << 8) | (h[i] & 0xFF);\n\t\tdi = (di << 8) | (d[i] & 0xFF);\n\n\t\tfor (j = 8; j-- !=0 ; j=j) \n\t\t{\n\t\t\tk = ((vi ^ vi >> 1) >> j & 1) + ((hi ^ hi >> 1) >> j & 1);\n\t\t\tcurve25519_prep(t1[0], t2[0], yx[0], yz[0]);\n\t\t\tcurve25519_prep(t1[1], t2[1], yx[1], yz[1]);\n\t\t\tcurve25519_prep(t1[2], t2[2], yx[2], yz[2]);\n\t\t\t\n\t\t\tcurve25519_dbl(yx[0], yz[0], t1[k], t2[k]);\n\t\t\tk = (di >> j & 2) ^ ((di >> j & 1) << 1);\n\t\t\tcurve25519_sum(yx[1], yz[1], t1[1], t2[1], t1[k], t2[k], p[di >> j & 1]);\n\t\t\tcurve25519_sum(yx[2], yz[2], t1[2], t2[2], t1[0], t2[0], s[((vi ^ hi) >> j & 2) >> 1]);\n\t\t}\n\t}\n\n\tk = (vi & 1) + (hi & 1);\n\tcurve25519_invmodp(t1[0], yz[k], 0);\n\tcurve25519_mulmodp(t1[1], yx[k], t1[0]);\n\tvar YY = curve25519_convertToByteArray(t1[1]);\n\tcurve25519_fillByteArray(YY, Y);\n}\n\n/*\n *  jssha256 version 0.1  -  Copyright 2006 B. Poettering\n *\n *  This program is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU General Public License as\n *  published by the Free Software Foundation; either version 2 of the\n *  License, or (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with this program; if not, write to the Free Software\n *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA\n *  02111-1307 USA\n */\n\n/*\n * http://point-at-infinity.org/jssha256/\n *\n * This is a JavaScript implementation of the SHA256 secure hash function\n * and the HMAC-SHA256 message authentication code (MAC).\n *\n * The routines' well-functioning has been verified with the test vectors \n * given in FIPS-180-2, Appendix B and IETF RFC 4231. The HMAC algorithm \n * conforms to IETF RFC 2104. \n *\n * The following code example computes the hash value of the string \"abc\".\n *\n *    SHA256_init();\n *    SHA256_write(\"abc\");\n *    digest = SHA256_finalize();  \n *    digest_hex = array_to_hex_string(digest);\n * \n * Get the same result by calling the shortcut function SHA256_hash:\n * \n *    digest_hex = SHA256_hash(\"abc\");\n * \n * In the following example the calculation of the HMAC of the string \"abc\" \n * using the key \"secret key\" is shown:\n * \n *    HMAC_SHA256_init(\"secret key\");\n *    HMAC_SHA256_write(\"abc\");\n *    mac = HMAC_SHA256_finalize();\n *    mac_hex = array_to_hex_string(mac);\n *\n * Again, the same can be done more conveniently:\n * \n *    mac_hex = HMAC_SHA256_MAC(\"secret key\", \"abc\");\n *\n * Note that the internal state of the hash function is held in global\n * variables. Therefore one hash value calculation has to be completed \n * before the next is begun. The same applies the the HMAC routines.\n *\n * Report bugs to: jssha256 AT point-at-infinity.org\n *\n */\n\n/******************************************************************************/\n\n/* Two all purpose helper functions follow */\n\n/* string_to_array: convert a string to a character (byte) array */\n\nfunction string_to_array(str) {\n  var len = str.length;\n  var res = new Array(len);\n  for(var i = 0; i < len; i++)\n    res[i] = str.charCodeAt(i);\n  return res;\n}\n\n/* array_to_hex_string: convert a byte array to a hexadecimal string */\n\nfunction array_to_hex_string(ary) {\n  var res = \"\";\n  for(var i = 0; i < ary.length; i++)\n    res += SHA256_hexchars[ary[i] >> 4] + SHA256_hexchars[ary[i] & 0x0f];\n  return res;\n}\n\n/******************************************************************************/\n\n/* The following are the SHA256 routines */\n\n/* \n   SHA256_init: initialize the internal state of the hash function. Call this\n   function before calling the SHA256_write function.\n*/\n\n var SHA256_buf = new Array();\n  var SHA256_len = 0;\nvar SHA256_H = new Array();\n\nfunction SHA256_init() {\t\n  SHA256_H = new Array(0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, \n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19);\n\t\n  SHA256_buf = new Array();\n  SHA256_len = 0;\n}\n\n/*\n   SHA256_write: add a message fragment to the hash function's internal state. \n   'msg' may be given as string or as byte array and may have arbitrary length.\n\n*/\n\nfunction SHA256_write(msg) {\t\n  if (typeof(msg) == \"string\")\n    SHA256_buf = SHA256_buf.concat(string_to_array(msg));\n  else\n    SHA256_buf = SHA256_buf.concat(msg);\n                    \n  for(var i = 0; i + 64 <= SHA256_buf.length; i += 64)\n    SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf.slice(i, i + 64));\n        \n  SHA256_buf = SHA256_buf.slice(i);\n        \n  SHA256_len += msg.length;\n}\n\n/*\n   SHA256_finalize: finalize the hash value calculation. Call this function\n   after the last call to SHA256_write. An array of 32 bytes (= 256 bits) \n   is returned.\n*/\n\nfunction SHA256_finalize() {\n  SHA256_buf[SHA256_buf.length] = 0x80;\n\n  if (SHA256_buf.length > 64 - 8) {\n    for(var i = SHA256_buf.length; i < 64; i++)\n      SHA256_buf[i] = 0;\n    SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);\n    SHA256_buf.length = 0;\n  }\n\n  for(var i = SHA256_buf.length; i < 64 - 5; i++)\n    SHA256_buf[i] = 0;\n  SHA256_buf[59] = (SHA256_len >>> 29) & 0xff;\n  SHA256_buf[60] = (SHA256_len >>> 21) & 0xff;\n  SHA256_buf[61] = (SHA256_len >>> 13) & 0xff;\n  SHA256_buf[62] = (SHA256_len >>> 5) & 0xff;\n  SHA256_buf[63] = (SHA256_len << 3) & 0xff;\n  SHA256_Hash_Byte_Block(SHA256_H, SHA256_buf);\n\n  var res = new Array(32);\n  for(var i = 0; i < 8; i++) {\n    res[4 * i + 0] = SHA256_H[i] >>> 24;\n    res[4 * i + 1] = (SHA256_H[i] >> 16) & 0xff;\n    res[4 * i + 2] = (SHA256_H[i] >> 8) & 0xff;\n    res[4 * i + 3] = SHA256_H[i] & 0xff;\n  }\n\n  delete SHA256_H;\n  delete SHA256_buf;\n  delete SHA256_len;\n  \n  return res;\n}\n\n/*\n   SHA256_hash: calculate the hash value of the string or byte array 'msg' \n   and return it as hexadecimal string. This shortcut function may be more \n   convenient than calling SHA256_init, SHA256_write, SHA256_finalize \n   and array_to_hex_string explicitly.\n*/\n\nfunction SHA256_hash(msg, no_hex) {\n  var res;\n  SHA256_init();\n   \n  SHA256_write(msg);\n  \n  res = SHA256_finalize();\n    \n  if (no_hex) {\n\t  return res;\n  }\n  \n  return array_to_hex_string(res);\n}\n\n/******************************************************************************/\n\n/* The following are the HMAC-SHA256 routines */\n\n/*\n   HMAC_SHA256_init: initialize the MAC's internal state. The MAC key 'key'\n   may be given as string or as byte array and may have arbitrary length.\n*/\n\nfunction HMAC_SHA256_init(key) {\n  if (typeof(key) == \"string\")\n    HMAC_SHA256_key = string_to_array(key);\n  else\n    HMAC_SHA256_key = new Array().concat(key);\n\n  if (HMAC_SHA256_key.length > 64) {\n    SHA256_init();\n    SHA256_write(HMAC_SHA256_key);\n    HMAC_SHA256_key = SHA256_finalize();\n  }\n\n  for(var i = HMAC_SHA256_key.length; i < 64; i++)\n    HMAC_SHA256_key[i] = 0;\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] ^=  0x36;\n  SHA256_init();\n  SHA256_write(HMAC_SHA256_key);\n}\n\n/*\n   HMAC_SHA256_write: process a message fragment. 'msg' may be given as \n   string or as byte array and may have arbitrary length.\n*/\n\nfunction HMAC_SHA256_write(msg) {\n  SHA256_write(msg);\n}\n\n/*\n   HMAC_SHA256_finalize: finalize the HMAC calculation. An array of 32 bytes\n   (= 256 bits) is returned.\n*/\n\nfunction HMAC_SHA256_finalize() {\n  var md = SHA256_finalize();\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] ^= 0x36 ^ 0x5c;\n  SHA256_init();\n  SHA256_write(HMAC_SHA256_key);\n  SHA256_write(md);\n  for(var i = 0; i < 64; i++)\n    HMAC_SHA256_key[i] = 0;\n  delete HMAC_SHA256_key;\n  return SHA256_finalize();\n}\n\n/*\n   HMAC_SHA256_MAC: calculate the HMAC value of message 'msg' under key 'key'\n   (both may be of type string or byte array); return the MAC as hexadecimal \n   string. This shortcut function may be more convenient than calling \n   HMAC_SHA256_init, HMAC_SHA256_write, HMAC_SHA256_finalize and \n   array_to_hex_string explicitly.\n*/\n\nfunction HMAC_SHA256_MAC(key, msg) {\n  var res;\n  HMAC_SHA256_init(key);\n  HMAC_SHA256_write(msg);\n  res = HMAC_SHA256_finalize();\n  return array_to_hex_string(res);\n}\n\n/******************************************************************************/\n\n/* The following lookup tables and functions are for internal use only! */\n\nSHA256_hexchars = new Array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', \n  'a', 'b', 'c', 'd', 'e', 'f');\n\nSHA256_K = new Array(\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, \n  0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, \n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, \n  0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, \n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, \n  0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, \n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b, \n  0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, \n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, \n  0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, \n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2 \n);\n\nfunction SHA256_sigma0(x) {\n  return ((x >>> 7) | (x << 25)) ^ ((x >>> 18) | (x << 14)) ^ (x >>> 3);\n}\n\nfunction SHA256_sigma1(x) {\n  return ((x >>> 17) | (x << 15)) ^ ((x >>> 19) | (x << 13)) ^ (x >>> 10);\n}\n\nfunction SHA256_Sigma0(x) {\n  return ((x >>> 2) | (x << 30)) ^ ((x >>> 13) | (x << 19)) ^ \n    ((x >>> 22) | (x << 10));\n}\n\nfunction SHA256_Sigma1(x) {\n  return ((x >>> 6) | (x << 26)) ^ ((x >>> 11) | (x << 21)) ^ \n    ((x >>> 25) | (x << 7));\n}\n\nfunction SHA256_Ch(x, y, z) {\n  return z ^ (x & (y ^ z));\n}\n\nfunction SHA256_Maj(x, y, z) {\n  return (x & y) ^ (z & (x ^ y));\n}\n\nfunction SHA256_Hash_Word_Block(H, W) {\t\n  for(var i = 16; i < 64; i++)\n    W[i] = (SHA256_sigma1(W[i - 2]) +  W[i - 7] + \n      SHA256_sigma0(W[i - 15]) + W[i - 16]) & 0xffffffff;\n  var state = new Array().concat(H);\n    \n  for(var i = 0; i < 64; i++) {\n    var T1 = state[7] + SHA256_Sigma1(state[4]) + \n      SHA256_Ch(state[4], state[5], state[6]) + SHA256_K[i] + W[i];\n    var T2 = SHA256_Sigma0(state[0]) + SHA256_Maj(state[0], state[1], state[2]);\n    state.pop();\n    state.unshift((T1 + T2) & 0xffffffff);\n    state[4] = (state[4] + T1) & 0xffffffff;\n  }\n    \n  for(var i = 0; i < 8; i++)\n    H[i] = (H[i] + state[i]) & 0xffffffff;\n}\n\nfunction SHA256_Hash_Byte_Block(H, w) {\t\n  var W = new Array(16);\n  for(var i = 0; i < 16; i++)\n    W[i] = w[4 * i + 0] << 24 | w[4 * i + 1] << 16 | \n      w[4 * i + 2] << 8 | w[4 * i + 3];\n      \n  SHA256_Hash_Word_Block(H, W);\n}\n\n// seedrandom.js version 2.3.3\n// Author: David Bau\n// Date: 2014 Feb 4\n//\n// Defines a method Math.seedrandom() that, when called, substitutes\n// an explicitly seeded RC4-based algorithm for Math.random().  Also\n// supports automatic seeding from local or network sources of entropy.\n// Can be used as a node.js or AMD module.  Can be called with \"new\"\n// to create a local PRNG without changing Math.random.\n//\n// Basic usage:\n//\n//   <script src=http://davidbau.com/encode/seedrandom.min.js></script>\n//\n//   Math.seedrandom('yay.');  // Sets Math.random to a function that is\n//                             // initialized using the given explicit seed.\n//\n//   Math.seedrandom();        // Sets Math.random to a function that is\n//                             // seeded using the current time, dom state,\n//                             // and other accumulated local entropy.\n//                             // The generated seed string is returned.\n//\n//   Math.seedrandom('yowza.', true);\n//                             // Seeds using the given explicit seed mixed\n//                             // together with accumulated entropy.\n//\n//   <script src=\"https://jsonlib.appspot.com/urandom?callback=Math.seedrandom\">\n//   </script>                 <!-- Seeds using urandom bits from a server. -->\n//\n//   Math.seedrandom(\"hello.\");           // Behavior is the same everywhere:\n//   document.write(Math.random());       // Always 0.9282578795792454\n//   document.write(Math.random());       // Always 0.3752569768646784\n//\n// Math.seedrandom can be used as a constructor to return a seeded PRNG\n// that is independent of Math.random:\n//\n//   var myrng = new Math.seedrandom('yay.');\n//   var n = myrng();          // Using \"new\" creates a local prng without\n//                             // altering Math.random.\n//\n// When used as a module, seedrandom is a function that returns a seeded\n// PRNG instance without altering Math.random:\n//\n//   // With node.js (after \"npm install seedrandom\"):\n//   var seedrandom = require('seedrandom');\n//   var rng = seedrandom('hello.');\n//   console.log(rng());                  // always 0.9282578795792454\n//\n//   // With require.js or other AMD loader:\n//   require(['seedrandom'], function(seedrandom) {\n//     var rng = seedrandom('hello.');\n//     console.log(rng());                // always 0.9282578795792454\n//   });\n//\n// More examples:\n//\n//   var seed = Math.seedrandom();        // Use prng with an automatic seed.\n//   document.write(Math.random());       // Pretty much unpredictable x.\n//\n//   var rng = new Math.seedrandom(seed); // A new prng with the same seed.\n//   document.write(rng());               // Repeat the 'unpredictable' x.\n//\n//   function reseed(event, count) {      // Define a custom entropy collector.\n//     var t = [];\n//     function w(e) {\n//       t.push([e.pageX, e.pageY, +new Date]);\n//       if (t.length < count) { return; }\n//       document.removeEventListener(event, w);\n//       Math.seedrandom(t, true);        // Mix in any previous entropy.\n//     }\n//     document.addEventListener(event, w);\n//   }\n//   reseed('mousemove', 100);            // Reseed after 100 mouse moves.\n//\n// The callback third arg can be used to get both the prng and the seed.\n// The following returns both an autoseeded prng and the seed as an object,\n// without mutating Math.random:\n//\n//   var obj = Math.seedrandom(null, false, function(prng, seed) {\n//     return { random: prng, seed: seed };\n//   });\n//\n// Version notes:\n//\n// The random number sequence is the same as version 1.0 for string seeds.\n// * Version 2.0 changed the sequence for non-string seeds.\n// * Version 2.1 speeds seeding and uses window.crypto to autoseed if present.\n// * Version 2.2 alters non-crypto autoseeding to sweep up entropy from plugins.\n// * Version 2.3 adds support for \"new\", module loading, and a null seed arg.\n// * Version 2.3.1 adds a build environment, module packaging, and tests.\n// * Version 2.3.3 fixes bugs on IE8, and switches to MIT license.\n//\n// The standard ARC4 key scheduler cycles short keys, which means that\n// seedrandom('ab') is equivalent to seedrandom('abab') and 'ababab'.\n// Therefore it is a good idea to add a terminator to avoid trivial\n// equivalences on short string seeds, e.g., Math.seedrandom(str + '\\0').\n// Starting with version 2.0, a terminator is added automatically for\n// non-string seeds, so seeding with the number 111 is the same as seeding\n// with '111\\0'.\n//\n// When seedrandom() is called with zero args or a null seed, it uses a\n// seed drawn from the browser crypto object if present.  If there is no\n// crypto support, seedrandom() uses the current time, the native rng,\n// and a walk of several DOM objects to collect a few bits of entropy.\n//\n// Each time the one- or two-argument forms of seedrandom are called,\n// entropy from the passed seed is accumulated in a pool to help generate\n// future seeds for the zero- and two-argument forms of seedrandom.\n//\n// On speed - This javascript implementation of Math.random() is several\n// times slower than the built-in Math.random() because it is not native\n// code, but that is typically fast enough.  Some details (timings on\n// Chrome 25 on a 2010 vintage macbook):\n//\n// seeded Math.random()          - avg less than 0.0002 milliseconds per call\n// seedrandom('explicit.')       - avg less than 0.2 milliseconds per call\n// seedrandom('explicit.', true) - avg less than 0.2 milliseconds per call\n// seedrandom() with crypto      - avg less than 0.2 milliseconds per call\n//\n// Autoseeding without crypto is somewhat slower, about 20-30 milliseconds on\n// a 2012 windows 7 1.5ghz i5 laptop, as seen on Firefox 19, IE 10, and Opera.\n// Seeded rng calls themselves are fast across these browsers, with slowest\n// numbers on Opera at about 0.0005 ms per seeded Math.random().\n//\n// LICENSE (BSD):\n//\n// Copyright 2013 David Bau, all rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//   1. Redistributions of source code must retain the above copyright\n//      notice, this list of conditions and the following disclaimer.\n//\n//   2. Redistributions in binary form must reproduce the above copyright\n//      notice, this list of conditions and the following disclaimer in the\n//      documentation and/or other materials provided with the distribution.\n//\n//   3. Neither the name of this module nor the names of its contributors may\n//      be used to endorse or promote products derived from this software\n//      without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n\n/**\n * All code is in an anonymous closure to keep the global namespace clean.\n */\n(function (\n    global, pool, math, width, chunks, digits, module, define, rngname) {\n\n//\n// The following constants are related to IEEE 754 limits.\n//\nvar startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nimpl = math['seed' + rngname] = function(seed, use_entropy, callback) {\n  var key = [];\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    use_entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (callback ||\n      // If called as a method of Math (Math.seedrandom()), mutate Math.random\n      // because that is how seedrandom.js has worked since v1.0.  Otherwise,\n      // it is a newer calling convention, so return the prng directly.\n      function(prng, seed, is_math_call) {\n        if (is_math_call) { math[rngname] = prng; return seed; }\n        else return prng;\n      })(\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  }, shortseed, this == math);\n};\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\n/** @constructor */\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability discard an initial batch of values.\n    // See http://www.rsa.com/rsalabs/node.asp?id=2009\n  })(width);\n}\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto if available.\n//\n/** @param {Uint8Array|Navigator=} seed */\nfunction autoseed(seed) {\n  try {\n    global.crypto.getRandomValues(seed = new Uint8Array(width));\n    return tostring(seed);\n  } catch (e) {\n    return [+new Date, global, (seed = global.navigator) && seed.plugins,\n            global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to intefere with determinstic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math[rngname](), pool);\n\n//\n// Nodejs and AMD support: export the implemenation as a module using\n// either convention.\n//\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n}\n\n// End anonymous scope, and pass initial values.\n})(\n  this,   // global window object\n  [],     // pool: entropy pool starts empty\n  Math,   // math: package containing random, pow, and seedrandom\n  256,    // width: each RC4 output is 0 <= x < 256\n  6,      // chunks: at least six RC4 outputs for each double\n  52,     // digits: there are 52 significant digits in a double\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define,  // present with an AMD loader\n  'random'// rngname: name for Math.random and Math.seedrandom\n);\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS = CryptoJS || function(u, p) {\n\t\tvar d = {}, l = d.lib = {}, s = function() {}, t = l.Base = {\n\t\t\t\textend: function(a) {\n\t\t\t\t\ts.prototype = this;\n\t\t\t\t\tvar c = new s;\n\t\t\t\t\ta && c.mixIn(a);\n\t\t\t\t\tc.hasOwnProperty(\"init\") || (c.init = function() {\n\t\t\t\t\t\tc.$super.init.apply(this, arguments)\n\t\t\t\t\t});\n\t\t\t\t\tc.init.prototype = c;\n\t\t\t\t\tc.$super = this;\n\t\t\t\t\treturn c\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\tvar a = this.extend();\n\t\t\t\t\ta.init.apply(a, arguments);\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\tinit: function() {},\n\t\t\t\tmixIn: function(a) {\n\t\t\t\t\tfor (var c in a) a.hasOwnProperty(c) && (this[c] = a[c]);\n\t\t\t\t\ta.hasOwnProperty(\"toString\") && (this.toString = a.toString)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\treturn this.init.prototype.extend(this)\n\t\t\t\t}\n\t\t\t},\n\t\t\tr = l.WordArray = t.extend({\n\t\t\t\tinit: function(a, c) {\n\t\t\t\t\ta = this.words = a || [];\n\t\t\t\t\tthis.sigBytes = c != p ? c : 4 * a.length\n\t\t\t\t},\n\t\t\t\ttoString: function(a) {\n\t\t\t\t\treturn (a || v).stringify(this)\n\t\t\t\t},\n\t\t\t\tconcat: function(a) {\n\t\t\t\t\tvar c = this.words,\n\t\t\t\t\t\te = a.words,\n\t\t\t\t\t\tj = this.sigBytes;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tthis.clamp();\n\t\t\t\t\tif (j % 4)\n\t\t\t\t\t\tfor (var k = 0; k < a; k++) c[j + k >>> 2] |= (e[k >>> 2] >>> 24 - 8 * (k % 4) & 255) << 24 - 8 * ((j + k) % 4);\n\t\t\t\t\telse if (65535 < e.length)\n\t\t\t\t\t\tfor (k = 0; k < a; k += 4) c[j + k >>> 2] = e[k >>> 2];\n\t\t\t\t\telse c.push.apply(c, e);\n\t\t\t\t\tthis.sigBytes += a;\n\t\t\t\t\treturn this\n\t\t\t\t},\n\t\t\t\tclamp: function() {\n\t\t\t\t\tvar a = this.words,\n\t\t\t\t\t\tc = this.sigBytes;\n\t\t\t\t\ta[c >>> 2] &= 4294967295 <<\n\t\t\t\t\t\t32 - 8 * (c % 4);\n\t\t\t\t\ta.length = u.ceil(c / 4)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\tvar a = t.clone.call(this);\n\t\t\t\t\ta.words = this.words.slice(0);\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\trandom: function(a) {\n\t\t\t\t\tfor (var c = [], e = 0; e < a; e += 4) c.push(4294967296 * u.random() | 0);\n\t\t\t\t\treturn new r.init(c, a)\n\t\t\t\t}\n\t\t\t}),\n\t\t\tw = d.enc = {}, v = w.Hex = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\tvar c = a.words;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tfor (var e = [], j = 0; j < a; j++) {\n\t\t\t\t\t\tvar k = c[j >>> 2] >>> 24 - 8 * (j % 4) & 255;\n\t\t\t\t\t\te.push((k >>> 4).toString(16));\n\t\t\t\t\t\te.push((k & 15).toString(16))\n\t\t\t\t\t}\n\t\t\t\t\treturn e.join(\"\")\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\tfor (var c = a.length, e = [], j = 0; j < c; j += 2) e[j >>> 3] |= parseInt(a.substr(j,\n\t\t\t\t\t\t2), 16) << 24 - 4 * (j % 8);\n\t\t\t\t\treturn new r.init(e, c / 2)\n\t\t\t\t}\n\t\t\t}, b = w.Latin1 = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\tvar c = a.words;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tfor (var e = [], j = 0; j < a; j++) e.push(String.fromCharCode(c[j >>> 2] >>> 24 - 8 * (j % 4) & 255));\n\t\t\t\t\treturn e.join(\"\")\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\tfor (var c = a.length, e = [], j = 0; j < c; j++) e[j >>> 2] |= (a.charCodeAt(j) & 255) << 24 - 8 * (j % 4);\n\t\t\t\t\treturn new r.init(e, c)\n\t\t\t\t}\n\t\t\t}, x = w.Utf8 = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn decodeURIComponent(escape(b.stringify(a)))\n\t\t\t\t\t} catch (c) {\n\t\t\t\t\t\tthrow Error(\"Malformed UTF-8 data\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\treturn b.parse(unescape(encodeURIComponent(a)))\n\t\t\t\t}\n\t\t\t},\n\t\t\tq = l.BufferedBlockAlgorithm = t.extend({\n\t\t\t\treset: function() {\n\t\t\t\t\tthis._data = new r.init;\n\t\t\t\t\tthis._nDataBytes = 0\n\t\t\t\t},\n\t\t\t\t_append: function(a) {\n\t\t\t\t\t\"string\" == typeof a && (a = x.parse(a));\n\t\t\t\t\tthis._data.concat(a);\n\t\t\t\t\tthis._nDataBytes += a.sigBytes\n\t\t\t\t},\n\t\t\t\t_process: function(a) {\n\t\t\t\t\tvar c = this._data,\n\t\t\t\t\t\te = c.words,\n\t\t\t\t\t\tj = c.sigBytes,\n\t\t\t\t\t\tk = this.blockSize,\n\t\t\t\t\t\tb = j / (4 * k),\n\t\t\t\t\t\tb = a ? u.ceil(b) : u.max((b | 0) - this._minBufferSize, 0);\n\t\t\t\t\ta = b * k;\n\t\t\t\t\tj = u.min(4 * a, j);\n\t\t\t\t\tif (a) {\n\t\t\t\t\t\tfor (var q = 0; q < a; q += k) this._doProcessBlock(e, q);\n\t\t\t\t\t\tq = e.splice(0, a);\n\t\t\t\t\t\tc.sigBytes -= j\n\t\t\t\t\t}\n\t\t\t\t\treturn new r.init(q, j)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\tvar a = t.clone.call(this);\n\t\t\t\t\ta._data = this._data.clone();\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\t_minBufferSize: 0\n\t\t\t});\n\t\tl.Hasher = q.extend({\n\t\t\tcfg: t.extend(),\n\t\t\tinit: function(a) {\n\t\t\t\tthis.cfg = this.cfg.extend(a);\n\t\t\t\tthis.reset()\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tq.reset.call(this);\n\t\t\t\tthis._doReset()\n\t\t\t},\n\t\t\tupdate: function(a) {\n\t\t\t\tthis._append(a);\n\t\t\t\tthis._process();\n\t\t\t\treturn this\n\t\t\t},\n\t\t\tfinalize: function(a) {\n\t\t\t\ta && this._append(a);\n\t\t\t\treturn this._doFinalize()\n\t\t\t},\n\t\t\tblockSize: 16,\n\t\t\t_createHelper: function(a) {\n\t\t\t\treturn function(b, e) {\n\t\t\t\t\treturn (new a.init(e)).finalize(b)\n\t\t\t\t}\n\t\t\t},\n\t\t\t_createHmacHelper: function(a) {\n\t\t\t\treturn function(b, e) {\n\t\t\t\t\treturn (new n.HMAC.init(a,\n\t\t\t\t\t\te)).finalize(b)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tvar n = d.algo = {};\n\t\treturn d\n\t}(Math);\n(function() {\n\tvar u = CryptoJS,\n\t\tp = u.lib.WordArray;\n\tu.enc.Base64 = {\n\t\tstringify: function(d) {\n\t\t\tvar l = d.words,\n\t\t\t\tp = d.sigBytes,\n\t\t\t\tt = this._map;\n\t\t\td.clamp();\n\t\t\td = [];\n\t\t\tfor (var r = 0; r < p; r += 3)\n\t\t\t\tfor (var w = (l[r >>> 2] >>> 24 - 8 * (r % 4) & 255) << 16 | (l[r + 1 >>> 2] >>> 24 - 8 * ((r + 1) % 4) & 255) << 8 | l[r + 2 >>> 2] >>> 24 - 8 * ((r + 2) % 4) & 255, v = 0; 4 > v && r + 0.75 * v < p; v++) d.push(t.charAt(w >>> 6 * (3 - v) & 63));\n\t\t\tif (l = t.charAt(64))\n\t\t\t\tfor (; d.length % 4;) d.push(l);\n\t\t\treturn d.join(\"\")\n\t\t},\n\t\tparse: function(d) {\n\t\t\tvar l = d.length,\n\t\t\t\ts = this._map,\n\t\t\t\tt = s.charAt(64);\n\t\t\tt && (t = d.indexOf(t), -1 != t && (l = t));\n\t\t\tfor (var t = [], r = 0, w = 0; w <\n\t\t\t\tl; w++)\n\t\t\t\tif (w % 4) {\n\t\t\t\t\tvar v = s.indexOf(d.charAt(w - 1)) << 2 * (w % 4),\n\t\t\t\t\t\tb = s.indexOf(d.charAt(w)) >>> 6 - 2 * (w % 4);\n\t\t\t\t\tt[r >>> 2] |= (v | b) << 24 - 8 * (r % 4);\n\t\t\t\t\tr++\n\t\t\t\t}\n\t\t\treturn p.create(t, r)\n\t\t},\n\t\t_map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n\t}\n})();\n(function(u) {\n\tfunction p(b, n, a, c, e, j, k) {\n\t\tb = b + (n & a | ~n & c) + e + k;\n\t\treturn (b << j | b >>> 32 - j) + n\n\t}\n\n\tfunction d(b, n, a, c, e, j, k) {\n\t\tb = b + (n & c | a & ~c) + e + k;\n\t\treturn (b << j | b >>> 32 - j) + n\n\t}\n\n\tfunction l(b, n, a, c, e, j, k) {\n\t\tb = b + (n ^ a ^ c) + e + k;\n\t\treturn (b << j | b >>> 32 - j) + n\n\t}\n\n\tfunction s(b, n, a, c, e, j, k) {\n\t\tb = b + (a ^ (n | ~c)) + e + k;\n\t\treturn (b << j | b >>> 32 - j) + n\n\t}\n\tfor (var t = CryptoJS, r = t.lib, w = r.WordArray, v = r.Hasher, r = t.algo, b = [], x = 0; 64 > x; x++) b[x] = 4294967296 * u.abs(u.sin(x + 1)) | 0;\n\tr = r.MD5 = v.extend({\n\t\t_doReset: function() {\n\t\t\tthis._hash = new w.init([1732584193, 4023233417, 2562383102, 271733878])\n\t\t},\n\t\t_doProcessBlock: function(q, n) {\n\t\t\tfor (var a = 0; 16 > a; a++) {\n\t\t\t\tvar c = n + a,\n\t\t\t\t\te = q[c];\n\t\t\t\tq[c] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360\n\t\t\t}\n\t\t\tvar a = this._hash.words,\n\t\t\t\tc = q[n + 0],\n\t\t\t\te = q[n + 1],\n\t\t\t\tj = q[n + 2],\n\t\t\t\tk = q[n + 3],\n\t\t\t\tz = q[n + 4],\n\t\t\t\tr = q[n + 5],\n\t\t\t\tt = q[n + 6],\n\t\t\t\tw = q[n + 7],\n\t\t\t\tv = q[n + 8],\n\t\t\t\tA = q[n + 9],\n\t\t\t\tB = q[n + 10],\n\t\t\t\tC = q[n + 11],\n\t\t\t\tu = q[n + 12],\n\t\t\t\tD = q[n + 13],\n\t\t\t\tE = q[n + 14],\n\t\t\t\tx = q[n + 15],\n\t\t\t\tf = a[0],\n\t\t\t\tm = a[1],\n\t\t\t\tg = a[2],\n\t\t\t\th = a[3],\n\t\t\t\tf = p(f, m, g, h, c, 7, b[0]),\n\t\t\t\th = p(h, f, m, g, e, 12, b[1]),\n\t\t\t\tg = p(g, h, f, m, j, 17, b[2]),\n\t\t\t\tm = p(m, g, h, f, k, 22, b[3]),\n\t\t\t\tf = p(f, m, g, h, z, 7, b[4]),\n\t\t\t\th = p(h, f, m, g, r, 12, b[5]),\n\t\t\t\tg = p(g, h, f, m, t, 17, b[6]),\n\t\t\t\tm = p(m, g, h, f, w, 22, b[7]),\n\t\t\t\tf = p(f, m, g, h, v, 7, b[8]),\n\t\t\t\th = p(h, f, m, g, A, 12, b[9]),\n\t\t\t\tg = p(g, h, f, m, B, 17, b[10]),\n\t\t\t\tm = p(m, g, h, f, C, 22, b[11]),\n\t\t\t\tf = p(f, m, g, h, u, 7, b[12]),\n\t\t\t\th = p(h, f, m, g, D, 12, b[13]),\n\t\t\t\tg = p(g, h, f, m, E, 17, b[14]),\n\t\t\t\tm = p(m, g, h, f, x, 22, b[15]),\n\t\t\t\tf = d(f, m, g, h, e, 5, b[16]),\n\t\t\t\th = d(h, f, m, g, t, 9, b[17]),\n\t\t\t\tg = d(g, h, f, m, C, 14, b[18]),\n\t\t\t\tm = d(m, g, h, f, c, 20, b[19]),\n\t\t\t\tf = d(f, m, g, h, r, 5, b[20]),\n\t\t\t\th = d(h, f, m, g, B, 9, b[21]),\n\t\t\t\tg = d(g, h, f, m, x, 14, b[22]),\n\t\t\t\tm = d(m, g, h, f, z, 20, b[23]),\n\t\t\t\tf = d(f, m, g, h, A, 5, b[24]),\n\t\t\t\th = d(h, f, m, g, E, 9, b[25]),\n\t\t\t\tg = d(g, h, f, m, k, 14, b[26]),\n\t\t\t\tm = d(m, g, h, f, v, 20, b[27]),\n\t\t\t\tf = d(f, m, g, h, D, 5, b[28]),\n\t\t\t\th = d(h, f,\n\t\t\t\t\tm, g, j, 9, b[29]),\n\t\t\t\tg = d(g, h, f, m, w, 14, b[30]),\n\t\t\t\tm = d(m, g, h, f, u, 20, b[31]),\n\t\t\t\tf = l(f, m, g, h, r, 4, b[32]),\n\t\t\t\th = l(h, f, m, g, v, 11, b[33]),\n\t\t\t\tg = l(g, h, f, m, C, 16, b[34]),\n\t\t\t\tm = l(m, g, h, f, E, 23, b[35]),\n\t\t\t\tf = l(f, m, g, h, e, 4, b[36]),\n\t\t\t\th = l(h, f, m, g, z, 11, b[37]),\n\t\t\t\tg = l(g, h, f, m, w, 16, b[38]),\n\t\t\t\tm = l(m, g, h, f, B, 23, b[39]),\n\t\t\t\tf = l(f, m, g, h, D, 4, b[40]),\n\t\t\t\th = l(h, f, m, g, c, 11, b[41]),\n\t\t\t\tg = l(g, h, f, m, k, 16, b[42]),\n\t\t\t\tm = l(m, g, h, f, t, 23, b[43]),\n\t\t\t\tf = l(f, m, g, h, A, 4, b[44]),\n\t\t\t\th = l(h, f, m, g, u, 11, b[45]),\n\t\t\t\tg = l(g, h, f, m, x, 16, b[46]),\n\t\t\t\tm = l(m, g, h, f, j, 23, b[47]),\n\t\t\t\tf = s(f, m, g, h, c, 6, b[48]),\n\t\t\t\th = s(h, f, m, g, w, 10, b[49]),\n\t\t\t\tg = s(g, h, f, m,\n\t\t\t\t\tE, 15, b[50]),\n\t\t\t\tm = s(m, g, h, f, r, 21, b[51]),\n\t\t\t\tf = s(f, m, g, h, u, 6, b[52]),\n\t\t\t\th = s(h, f, m, g, k, 10, b[53]),\n\t\t\t\tg = s(g, h, f, m, B, 15, b[54]),\n\t\t\t\tm = s(m, g, h, f, e, 21, b[55]),\n\t\t\t\tf = s(f, m, g, h, v, 6, b[56]),\n\t\t\t\th = s(h, f, m, g, x, 10, b[57]),\n\t\t\t\tg = s(g, h, f, m, t, 15, b[58]),\n\t\t\t\tm = s(m, g, h, f, D, 21, b[59]),\n\t\t\t\tf = s(f, m, g, h, z, 6, b[60]),\n\t\t\t\th = s(h, f, m, g, C, 10, b[61]),\n\t\t\t\tg = s(g, h, f, m, j, 15, b[62]),\n\t\t\t\tm = s(m, g, h, f, A, 21, b[63]);\n\t\t\ta[0] = a[0] + f | 0;\n\t\t\ta[1] = a[1] + m | 0;\n\t\t\ta[2] = a[2] + g | 0;\n\t\t\ta[3] = a[3] + h | 0\n\t\t},\n\t\t_doFinalize: function() {\n\t\t\tvar b = this._data,\n\t\t\t\tn = b.words,\n\t\t\t\ta = 8 * this._nDataBytes,\n\t\t\t\tc = 8 * b.sigBytes;\n\t\t\tn[c >>> 5] |= 128 << 24 - c % 32;\n\t\t\tvar e = u.floor(a /\n\t\t\t\t4294967296);\n\t\t\tn[(c + 64 >>> 9 << 4) + 15] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360;\n\t\t\tn[(c + 64 >>> 9 << 4) + 14] = (a << 8 | a >>> 24) & 16711935 | (a << 24 | a >>> 8) & 4278255360;\n\t\t\tb.sigBytes = 4 * (n.length + 1);\n\t\t\tthis._process();\n\t\t\tb = this._hash;\n\t\t\tn = b.words;\n\t\t\tfor (a = 0; 4 > a; a++) c = n[a], n[a] = (c << 8 | c >>> 24) & 16711935 | (c << 24 | c >>> 8) & 4278255360;\n\t\t\treturn b\n\t\t},\n\t\tclone: function() {\n\t\t\tvar b = v.clone.call(this);\n\t\t\tb._hash = this._hash.clone();\n\t\t\treturn b\n\t\t}\n\t});\n\tt.MD5 = v._createHelper(r);\n\tt.HmacMD5 = v._createHmacHelper(r)\n})(Math);\n(function() {\n\tvar u = CryptoJS,\n\t\tp = u.lib,\n\t\td = p.Base,\n\t\tl = p.WordArray,\n\t\tp = u.algo,\n\t\ts = p.EvpKDF = d.extend({\n\t\t\tcfg: d.extend({\n\t\t\t\tkeySize: 4,\n\t\t\t\thasher: p.MD5,\n\t\t\t\titerations: 1\n\t\t\t}),\n\t\t\tinit: function(d) {\n\t\t\t\tthis.cfg = this.cfg.extend(d)\n\t\t\t},\n\t\t\tcompute: function(d, r) {\n\t\t\t\tfor (var p = this.cfg, s = p.hasher.create(), b = l.create(), u = b.words, q = p.keySize, p = p.iterations; u.length < q;) {\n\t\t\t\t\tn && s.update(n);\n\t\t\t\t\tvar n = s.update(d).finalize(r);\n\t\t\t\t\ts.reset();\n\t\t\t\t\tfor (var a = 1; a < p; a++) n = s.finalize(n), s.reset();\n\t\t\t\t\tb.concat(n)\n\t\t\t\t}\n\t\t\t\tb.sigBytes = 4 * q;\n\t\t\t\treturn b\n\t\t\t}\n\t\t});\n\tu.EvpKDF = function(d, l, p) {\n\t\treturn s.create(p).compute(d,\n\t\t\tl)\n\t}\n})();\nCryptoJS.lib.Cipher || function(u) {\n\tvar p = CryptoJS,\n\t\td = p.lib,\n\t\tl = d.Base,\n\t\ts = d.WordArray,\n\t\tt = d.BufferedBlockAlgorithm,\n\t\tr = p.enc.Base64,\n\t\tw = p.algo.EvpKDF,\n\t\tv = d.Cipher = t.extend({\n\t\t\tcfg: l.extend(),\n\t\t\tcreateEncryptor: function(e, a) {\n\t\t\t\treturn this.create(this._ENC_XFORM_MODE, e, a)\n\t\t\t},\n\t\t\tcreateDecryptor: function(e, a) {\n\t\t\t\treturn this.create(this._DEC_XFORM_MODE, e, a)\n\t\t\t},\n\t\t\tinit: function(e, a, b) {\n\t\t\t\tthis.cfg = this.cfg.extend(b);\n\t\t\t\tthis._xformMode = e;\n\t\t\t\tthis._key = a;\n\t\t\t\tthis.reset()\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tt.reset.call(this);\n\t\t\t\tthis._doReset()\n\t\t\t},\n\t\t\tprocess: function(e) {\n\t\t\t\tthis._append(e);\n\t\t\t\treturn this._process()\n\t\t\t},\n\t\t\tfinalize: function(e) {\n\t\t\t\te && this._append(e);\n\t\t\t\treturn this._doFinalize()\n\t\t\t},\n\t\t\tkeySize: 4,\n\t\t\tivSize: 4,\n\t\t\t_ENC_XFORM_MODE: 1,\n\t\t\t_DEC_XFORM_MODE: 2,\n\t\t\t_createHelper: function(e) {\n\t\t\t\treturn {\n\t\t\t\t\tencrypt: function(b, k, d) {\n\t\t\t\t\t\treturn (\"string\" == typeof k ? c : a).encrypt(e, b, k, d)\n\t\t\t\t\t},\n\t\t\t\t\tdecrypt: function(b, k, d) {\n\t\t\t\t\t\treturn (\"string\" == typeof k ? c : a).decrypt(e, b, k, d)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\td.StreamCipher = v.extend({\n\t\t_doFinalize: function() {\n\t\t\treturn this._process(!0)\n\t\t},\n\t\tblockSize: 1\n\t});\n\tvar b = p.mode = {}, x = function(e, a, b) {\n\t\t\tvar c = this._iv;\n\t\t\tc ? this._iv = u : c = this._prevBlock;\n\t\t\tfor (var d = 0; d < b; d++) e[a + d] ^=\n\t\t\t\tc[d]\n\t\t}, q = (d.BlockCipherMode = l.extend({\n\t\t\tcreateEncryptor: function(e, a) {\n\t\t\t\treturn this.Encryptor.create(e, a)\n\t\t\t},\n\t\t\tcreateDecryptor: function(e, a) {\n\t\t\t\treturn this.Decryptor.create(e, a)\n\t\t\t},\n\t\t\tinit: function(e, a) {\n\t\t\t\tthis._cipher = e;\n\t\t\t\tthis._iv = a\n\t\t\t}\n\t\t})).extend();\n\tq.Encryptor = q.extend({\n\t\tprocessBlock: function(e, a) {\n\t\t\tvar b = this._cipher,\n\t\t\t\tc = b.blockSize;\n\t\t\tx.call(this, e, a, c);\n\t\t\tb.encryptBlock(e, a);\n\t\t\tthis._prevBlock = e.slice(a, a + c)\n\t\t}\n\t});\n\tq.Decryptor = q.extend({\n\t\tprocessBlock: function(e, a) {\n\t\t\tvar b = this._cipher,\n\t\t\t\tc = b.blockSize,\n\t\t\t\td = e.slice(a, a + c);\n\t\t\tb.decryptBlock(e, a);\n\t\t\tx.call(this,\n\t\t\t\te, a, c);\n\t\t\tthis._prevBlock = d\n\t\t}\n\t});\n\tb = b.CBC = q;\n\tq = (p.pad = {}).Pkcs7 = {\n\t\tpad: function(a, b) {\n\t\t\tfor (var c = 4 * b, c = c - a.sigBytes % c, d = c << 24 | c << 16 | c << 8 | c, l = [], n = 0; n < c; n += 4) l.push(d);\n\t\t\tc = s.create(l, c);\n\t\t\ta.concat(c)\n\t\t},\n\t\tunpad: function(a) {\n\t\t\ta.sigBytes -= a.words[a.sigBytes - 1 >>> 2] & 255\n\t\t}\n\t};\n\td.BlockCipher = v.extend({\n\t\tcfg: v.cfg.extend({\n\t\t\tmode: b,\n\t\t\tpadding: q\n\t\t}),\n\t\treset: function() {\n\t\t\tv.reset.call(this);\n\t\t\tvar a = this.cfg,\n\t\t\t\tb = a.iv,\n\t\t\t\ta = a.mode;\n\t\t\tif (this._xformMode == this._ENC_XFORM_MODE) var c = a.createEncryptor;\n\t\t\telse c = a.createDecryptor, this._minBufferSize = 1;\n\t\t\tthis._mode = c.call(a,\n\t\t\t\tthis, b && b.words)\n\t\t},\n\t\t_doProcessBlock: function(a, b) {\n\t\t\tthis._mode.processBlock(a, b)\n\t\t},\n\t\t_doFinalize: function() {\n\t\t\tvar a = this.cfg.padding;\n\t\t\tif (this._xformMode == this._ENC_XFORM_MODE) {\n\t\t\t\ta.pad(this._data, this.blockSize);\n\t\t\t\tvar b = this._process(!0)\n\t\t\t} else b = this._process(!0), a.unpad(b);\n\t\t\treturn b\n\t\t},\n\t\tblockSize: 4\n\t});\n\tvar n = d.CipherParams = l.extend({\n\t\tinit: function(a) {\n\t\t\tthis.mixIn(a)\n\t\t},\n\t\ttoString: function(a) {\n\t\t\treturn (a || this.formatter).stringify(this)\n\t\t}\n\t}),\n\t\tb = (p.format = {}).OpenSSL = {\n\t\t\tstringify: function(a) {\n\t\t\t\tvar b = a.ciphertext;\n\t\t\t\ta = a.salt;\n\t\t\t\treturn (a ? s.create([1398893684,\n\t\t\t\t\t1701076831\n\t\t\t\t]).concat(a).concat(b) : b).toString(r)\n\t\t\t},\n\t\t\tparse: function(a) {\n\t\t\t\ta = r.parse(a);\n\t\t\t\tvar b = a.words;\n\t\t\t\tif (1398893684 == b[0] && 1701076831 == b[1]) {\n\t\t\t\t\tvar c = s.create(b.slice(2, 4));\n\t\t\t\t\tb.splice(0, 4);\n\t\t\t\t\ta.sigBytes -= 16\n\t\t\t\t}\n\t\t\t\treturn n.create({\n\t\t\t\t\tciphertext: a,\n\t\t\t\t\tsalt: c\n\t\t\t\t})\n\t\t\t}\n\t\t}, a = d.SerializableCipher = l.extend({\n\t\t\tcfg: l.extend({\n\t\t\t\tformat: b\n\t\t\t}),\n\t\t\tencrypt: function(a, b, c, d) {\n\t\t\t\td = this.cfg.extend(d);\n\t\t\t\tvar l = a.createEncryptor(c, d);\n\t\t\t\tb = l.finalize(b);\n\t\t\t\tl = l.cfg;\n\t\t\t\treturn n.create({\n\t\t\t\t\tciphertext: b,\n\t\t\t\t\tkey: c,\n\t\t\t\t\tiv: l.iv,\n\t\t\t\t\talgorithm: a,\n\t\t\t\t\tmode: l.mode,\n\t\t\t\t\tpadding: l.padding,\n\t\t\t\t\tblockSize: a.blockSize,\n\t\t\t\t\tformatter: d.format\n\t\t\t\t})\n\t\t\t},\n\t\t\tdecrypt: function(a, b, c, d) {\n\t\t\t\td = this.cfg.extend(d);\n\t\t\t\tb = this._parse(b, d.format);\n\t\t\t\treturn a.createDecryptor(c, d).finalize(b.ciphertext)\n\t\t\t},\n\t\t\t_parse: function(a, b) {\n\t\t\t\treturn \"string\" == typeof a ? b.parse(a, this) : a\n\t\t\t}\n\t\t}),\n\t\tp = (p.kdf = {}).OpenSSL = {\n\t\t\texecute: function(a, b, c, d) {\n\t\t\t\td || (d = s.random(8));\n\t\t\t\ta = w.create({\n\t\t\t\t\tkeySize: b + c\n\t\t\t\t}).compute(a, d);\n\t\t\t\tc = s.create(a.words.slice(b), 4 * c);\n\t\t\t\ta.sigBytes = 4 * b;\n\t\t\t\treturn n.create({\n\t\t\t\t\tkey: a,\n\t\t\t\t\tiv: c,\n\t\t\t\t\tsalt: d\n\t\t\t\t})\n\t\t\t}\n\t\t}, c = d.PasswordBasedCipher = a.extend({\n\t\t\tcfg: a.cfg.extend({\n\t\t\t\tkdf: p\n\t\t\t}),\n\t\t\tencrypt: function(b, c, d, l) {\n\t\t\t\tl = this.cfg.extend(l);\n\t\t\t\td = l.kdf.execute(d,\n\t\t\t\t\tb.keySize, b.ivSize);\n\t\t\t\tl.iv = d.iv;\n\t\t\t\tb = a.encrypt.call(this, b, c, d.key, l);\n\t\t\t\tb.mixIn(d);\n\t\t\t\treturn b\n\t\t\t},\n\t\t\tdecrypt: function(b, c, d, l) {\n\t\t\t\tl = this.cfg.extend(l);\n\t\t\t\tc = this._parse(c, l.format);\n\t\t\t\td = l.kdf.execute(d, b.keySize, b.ivSize, c.salt);\n\t\t\t\tl.iv = d.iv;\n\t\t\t\treturn a.decrypt.call(this, b, c, d.key, l)\n\t\t\t}\n\t\t})\n}();\n(function() {\n\tfor (var u = CryptoJS, p = u.lib.BlockCipher, d = u.algo, l = [], s = [], t = [], r = [], w = [], v = [], b = [], x = [], q = [], n = [], a = [], c = 0; 256 > c; c++) a[c] = 128 > c ? c << 1 : c << 1 ^ 283;\n\tfor (var e = 0, j = 0, c = 0; 256 > c; c++) {\n\t\tvar k = j ^ j << 1 ^ j << 2 ^ j << 3 ^ j << 4,\n\t\t\tk = k >>> 8 ^ k & 255 ^ 99;\n\t\tl[e] = k;\n\t\ts[k] = e;\n\t\tvar z = a[e],\n\t\t\tF = a[z],\n\t\t\tG = a[F],\n\t\t\ty = 257 * a[k] ^ 16843008 * k;\n\t\tt[e] = y << 24 | y >>> 8;\n\t\tr[e] = y << 16 | y >>> 16;\n\t\tw[e] = y << 8 | y >>> 24;\n\t\tv[e] = y;\n\t\ty = 16843009 * G ^ 65537 * F ^ 257 * z ^ 16843008 * e;\n\t\tb[k] = y << 24 | y >>> 8;\n\t\tx[k] = y << 16 | y >>> 16;\n\t\tq[k] = y << 8 | y >>> 24;\n\t\tn[k] = y;\n\t\te ? (e = z ^ a[a[a[G ^ z]]], j ^= a[a[j]]) : e = j = 1\n\t}\n\tvar H = [0, 1, 2, 4, 8,\n\t\t16, 32, 64, 128, 27, 54\n\t],\n\t\td = d.AES = p.extend({\n\t\t\t_doReset: function() {\n\t\t\t\tfor (var a = this._key, c = a.words, d = a.sigBytes / 4, a = 4 * ((this._nRounds = d + 6) + 1), e = this._keySchedule = [], j = 0; j < a; j++)\n\t\t\t\t\tif (j < d) e[j] = c[j];\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar k = e[j - 1];\n\t\t\t\t\t\tj % d ? 6 < d && 4 == j % d && (k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255]) : (k = k << 8 | k >>> 24, k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255], k ^= H[j / d | 0] << 24);\n\t\t\t\t\t\te[j] = e[j - d] ^ k\n\t\t\t\t\t}\n\t\t\t\tc = this._invKeySchedule = [];\n\t\t\t\tfor (d = 0; d < a; d++) j = a - d, k = d % 4 ? e[j] : e[j - 4], c[d] = 4 > d || 4 >= j ? k : b[l[k >>> 24]] ^ x[l[k >>> 16 & 255]] ^ q[l[k >>>\n\t\t\t\t\t8 & 255]] ^ n[l[k & 255]]\n\t\t\t},\n\t\t\tencryptBlock: function(a, b) {\n\t\t\t\tthis._doCryptBlock(a, b, this._keySchedule, t, r, w, v, l)\n\t\t\t},\n\t\t\tdecryptBlock: function(a, c) {\n\t\t\t\tvar d = a[c + 1];\n\t\t\t\ta[c + 1] = a[c + 3];\n\t\t\t\ta[c + 3] = d;\n\t\t\t\tthis._doCryptBlock(a, c, this._invKeySchedule, b, x, q, n, s);\n\t\t\t\td = a[c + 1];\n\t\t\t\ta[c + 1] = a[c + 3];\n\t\t\t\ta[c + 3] = d\n\t\t\t},\n\t\t\t_doCryptBlock: function(a, b, c, d, e, j, l, f) {\n\t\t\t\tfor (var m = this._nRounds, g = a[b] ^ c[0], h = a[b + 1] ^ c[1], k = a[b + 2] ^ c[2], n = a[b + 3] ^ c[3], p = 4, r = 1; r < m; r++) var q = d[g >>> 24] ^ e[h >>> 16 & 255] ^ j[k >>> 8 & 255] ^ l[n & 255] ^ c[p++],\n\t\t\t\ts = d[h >>> 24] ^ e[k >>> 16 & 255] ^ j[n >>> 8 & 255] ^ l[g & 255] ^ c[p++], t =\n\t\t\t\t\td[k >>> 24] ^ e[n >>> 16 & 255] ^ j[g >>> 8 & 255] ^ l[h & 255] ^ c[p++], n = d[n >>> 24] ^ e[g >>> 16 & 255] ^ j[h >>> 8 & 255] ^ l[k & 255] ^ c[p++], g = q, h = s, k = t;\n\t\t\t\tq = (f[g >>> 24] << 24 | f[h >>> 16 & 255] << 16 | f[k >>> 8 & 255] << 8 | f[n & 255]) ^ c[p++];\n\t\t\t\ts = (f[h >>> 24] << 24 | f[k >>> 16 & 255] << 16 | f[n >>> 8 & 255] << 8 | f[g & 255]) ^ c[p++];\n\t\t\t\tt = (f[k >>> 24] << 24 | f[n >>> 16 & 255] << 16 | f[g >>> 8 & 255] << 8 | f[h & 255]) ^ c[p++];\n\t\t\t\tn = (f[n >>> 24] << 24 | f[g >>> 16 & 255] << 16 | f[h >>> 8 & 255] << 8 | f[k & 255]) ^ c[p++];\n\t\t\t\ta[b] = q;\n\t\t\t\ta[b + 1] = s;\n\t\t\t\ta[b + 2] = t;\n\t\t\t\ta[b + 3] = n\n\t\t\t},\n\t\t\tkeySize: 8\n\t\t});\n\tu.AES = p._createHelper(d)\n})();\n/*\r\nCryptoJS v3.1.2\r\ncode.google.com/p/crypto-js\r\n(c) 2009-2013 by Jeff Mott. All rights reserved.\r\ncode.google.com/p/crypto-js/wiki/License\r\n*/\r\n(function () {\r\n    // Shortcuts\r\n    var C = CryptoJS;\r\n    var C_lib = C.lib;\r\n    var Base = C_lib.Base;\r\n    var C_enc = C.enc;\r\n    var Utf8 = C_enc.Utf8;\r\n    var C_algo = C.algo;\r\n\r\n    /**\r\n     * HMAC algorithm.\r\n     */\r\n    var HMAC = C_algo.HMAC = Base.extend({\r\n        /**\r\n         * Initializes a newly created HMAC.\r\n         *\r\n         * @param {Hasher} hasher The hash algorithm to use.\r\n         * @param {WordArray|string} key The secret key.\r\n         *\r\n         * @example\r\n         *\r\n         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\r\n         */\r\n        init: function (hasher, key) {\r\n            // Init hasher\r\n            hasher = this._hasher = new hasher.init();\r\n\r\n            // Convert string to WordArray, else assume WordArray already\r\n            if (typeof key == 'string') {\r\n                key = Utf8.parse(key);\r\n            }\r\n\r\n            // Shortcuts\r\n            var hasherBlockSize = hasher.blockSize;\r\n            var hasherBlockSizeBytes = hasherBlockSize * 4;\r\n\r\n            // Allow arbitrary length keys\r\n            if (key.sigBytes > hasherBlockSizeBytes) {\r\n                key = hasher.finalize(key);\r\n            }\r\n\r\n            // Clamp excess bits\r\n            key.clamp();\r\n\r\n            // Clone key for inner and outer pads\r\n            var oKey = this._oKey = key.clone();\r\n            var iKey = this._iKey = key.clone();\r\n\r\n            // Shortcuts\r\n            var oKeyWords = oKey.words;\r\n            var iKeyWords = iKey.words;\r\n\r\n            // XOR keys with pad constants\r\n            for (var i = 0; i < hasherBlockSize; i++) {\r\n                oKeyWords[i] ^= 0x5c5c5c5c;\r\n                iKeyWords[i] ^= 0x36363636;\r\n            }\r\n            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\r\n\r\n            // Set initial values\r\n            this.reset();\r\n        },\r\n\r\n        /**\r\n         * Resets this HMAC to its initial state.\r\n         *\r\n         * @example\r\n         *\r\n         *     hmacHasher.reset();\r\n         */\r\n        reset: function () {\r\n            // Shortcut\r\n            var hasher = this._hasher;\r\n\r\n            // Reset\r\n            hasher.reset();\r\n            hasher.update(this._iKey);\r\n        },\r\n\r\n        /**\r\n         * Updates this HMAC with a message.\r\n         *\r\n         * @param {WordArray|string} messageUpdate The message to append.\r\n         *\r\n         * @return {HMAC} This HMAC instance.\r\n         *\r\n         * @example\r\n         *\r\n         *     hmacHasher.update('message');\r\n         *     hmacHasher.update(wordArray);\r\n         */\r\n        update: function (messageUpdate) {\r\n            this._hasher.update(messageUpdate);\r\n\r\n            // Chainable\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Finalizes the HMAC computation.\r\n         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n         *\r\n         * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n         *\r\n         * @return {WordArray} The HMAC.\r\n         *\r\n         * @example\r\n         *\r\n         *     var hmac = hmacHasher.finalize();\r\n         *     var hmac = hmacHasher.finalize('message');\r\n         *     var hmac = hmacHasher.finalize(wordArray);\r\n         */\r\n        finalize: function (messageUpdate) {\r\n            // Shortcut\r\n            var hasher = this._hasher;\r\n\r\n            // Compute HMAC\r\n            var innerHash = hasher.finalize(messageUpdate);\r\n            hasher.reset();\r\n            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\r\n\r\n            return hmac;\r\n        }\r\n    });\r\n}());\r\n\n/*\r\nCryptoJS v3.1.2\r\ncode.google.com/p/crypto-js\r\n(c) 2009-2013 by Jeff Mott. All rights reserved.\r\ncode.google.com/p/crypto-js/wiki/License\r\n*/\r\n(function (Math) {\r\n    // Shortcuts\r\n    var C = CryptoJS;\r\n    var C_lib = C.lib;\r\n    var WordArray = C_lib.WordArray;\r\n    var Hasher = C_lib.Hasher;\r\n    var C_algo = C.algo;\r\n\r\n    // Constants table\r\n    var T = [];\r\n\r\n    // Compute constants\r\n    (function () {\r\n        for (var i = 0; i < 64; i++) {\r\n            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\r\n        }\r\n    }());\r\n\r\n    /**\r\n     * MD5 hash algorithm.\r\n     */\r\n    var MD5 = C_algo.MD5 = Hasher.extend({\r\n        _doReset: function () {\r\n            this._hash = new WordArray.init([\r\n                0x67452301, 0xefcdab89,\r\n                0x98badcfe, 0x10325476\r\n            ]);\r\n        },\r\n\r\n        _doProcessBlock: function (M, offset) {\r\n            // Swap endian\r\n            for (var i = 0; i < 16; i++) {\r\n                // Shortcuts\r\n                var offset_i = offset + i;\r\n                var M_offset_i = M[offset_i];\r\n\r\n                M[offset_i] = (\r\n                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\r\n                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\r\n                );\r\n            }\r\n\r\n            // Shortcuts\r\n            var H = this._hash.words;\r\n\r\n            var M_offset_0  = M[offset + 0];\r\n            var M_offset_1  = M[offset + 1];\r\n            var M_offset_2  = M[offset + 2];\r\n            var M_offset_3  = M[offset + 3];\r\n            var M_offset_4  = M[offset + 4];\r\n            var M_offset_5  = M[offset + 5];\r\n            var M_offset_6  = M[offset + 6];\r\n            var M_offset_7  = M[offset + 7];\r\n            var M_offset_8  = M[offset + 8];\r\n            var M_offset_9  = M[offset + 9];\r\n            var M_offset_10 = M[offset + 10];\r\n            var M_offset_11 = M[offset + 11];\r\n            var M_offset_12 = M[offset + 12];\r\n            var M_offset_13 = M[offset + 13];\r\n            var M_offset_14 = M[offset + 14];\r\n            var M_offset_15 = M[offset + 15];\r\n\r\n            // Working varialbes\r\n            var a = H[0];\r\n            var b = H[1];\r\n            var c = H[2];\r\n            var d = H[3];\r\n\r\n            // Computation\r\n            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\r\n            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\r\n            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\r\n            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\r\n            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\r\n            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\r\n            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\r\n            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\r\n            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\r\n            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\r\n            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\r\n            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\r\n            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\r\n            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\r\n            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\r\n            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\r\n\r\n            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\r\n            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\r\n            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\r\n            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\r\n            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\r\n            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\r\n            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\r\n            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\r\n            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\r\n            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\r\n            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\r\n            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\r\n            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\r\n            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\r\n            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\r\n            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\r\n\r\n            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\r\n            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\r\n            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\r\n            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\r\n            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\r\n            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\r\n            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\r\n            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\r\n            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\r\n            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\r\n            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\r\n            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\r\n            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\r\n            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\r\n            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\r\n            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\r\n\r\n            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\r\n            d = II(d, a, b, c, M_offset_7,  10, T[49]);\r\n            c = II(c, d, a, b, M_offset_14, 15, T[50]);\r\n            b = II(b, c, d, a, M_offset_5,  21, T[51]);\r\n            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\r\n            d = II(d, a, b, c, M_offset_3,  10, T[53]);\r\n            c = II(c, d, a, b, M_offset_10, 15, T[54]);\r\n            b = II(b, c, d, a, M_offset_1,  21, T[55]);\r\n            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\r\n            d = II(d, a, b, c, M_offset_15, 10, T[57]);\r\n            c = II(c, d, a, b, M_offset_6,  15, T[58]);\r\n            b = II(b, c, d, a, M_offset_13, 21, T[59]);\r\n            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\r\n            d = II(d, a, b, c, M_offset_11, 10, T[61]);\r\n            c = II(c, d, a, b, M_offset_2,  15, T[62]);\r\n            b = II(b, c, d, a, M_offset_9,  21, T[63]);\r\n\r\n            // Intermediate hash value\r\n            H[0] = (H[0] + a) | 0;\r\n            H[1] = (H[1] + b) | 0;\r\n            H[2] = (H[2] + c) | 0;\r\n            H[3] = (H[3] + d) | 0;\r\n        },\r\n\r\n        _doFinalize: function () {\r\n            // Shortcuts\r\n            var data = this._data;\r\n            var dataWords = data.words;\r\n\r\n            var nBitsTotal = this._nDataBytes * 8;\r\n            var nBitsLeft = data.sigBytes * 8;\r\n\r\n            // Add padding\r\n            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\r\n            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\r\n            var nBitsTotalL = nBitsTotal;\r\n            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\r\n                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\r\n                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\r\n            );\r\n            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\r\n                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\r\n                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\r\n            );\r\n\r\n            data.sigBytes = (dataWords.length + 1) * 4;\r\n\r\n            // Hash final blocks\r\n            this._process();\r\n\r\n            // Shortcuts\r\n            var hash = this._hash;\r\n            var H = hash.words;\r\n\r\n            // Swap endian\r\n            for (var i = 0; i < 4; i++) {\r\n                // Shortcut\r\n                var H_i = H[i];\r\n\r\n                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\r\n                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\r\n            }\r\n\r\n            // Return final computed hash\r\n            return hash;\r\n        },\r\n\r\n        clone: function () {\r\n            var clone = Hasher.clone.call(this);\r\n            clone._hash = this._hash.clone();\r\n\r\n            return clone;\r\n        }\r\n    });\r\n\r\n    function FF(a, b, c, d, x, s, t) {\r\n        var n = a + ((b & c) | (~b & d)) + x + t;\r\n        return ((n << s) | (n >>> (32 - s))) + b;\r\n    }\r\n\r\n    function GG(a, b, c, d, x, s, t) {\r\n        var n = a + ((b & d) | (c & ~d)) + x + t;\r\n        return ((n << s) | (n >>> (32 - s))) + b;\r\n    }\r\n\r\n    function HH(a, b, c, d, x, s, t) {\r\n        var n = a + (b ^ c ^ d) + x + t;\r\n        return ((n << s) | (n >>> (32 - s))) + b;\r\n    }\r\n\r\n    function II(a, b, c, d, x, s, t) {\r\n        var n = a + (c ^ (b | ~d)) + x + t;\r\n        return ((n << s) | (n >>> (32 - s))) + b;\r\n    }\r\n\r\n    /**\r\n     * Shortcut function to the hasher's object interface.\r\n     *\r\n     * @param {WordArray|string} message The message to hash.\r\n     *\r\n     * @return {WordArray} The hash.\r\n     *\r\n     * @static\r\n     *\r\n     * @example\r\n     *\r\n     *     var hash = CryptoJS.MD5('message');\r\n     *     var hash = CryptoJS.MD5(wordArray);\r\n     */\r\n    C.MD5 = Hasher._createHelper(MD5);\r\n\r\n    /**\r\n     * Shortcut function to the HMAC's object interface.\r\n     *\r\n     * @param {WordArray|string} message The message to hash.\r\n     * @param {WordArray|string} key The secret key.\r\n     *\r\n     * @return {WordArray} The HMAC.\r\n     *\r\n     * @static\r\n     *\r\n     * @example\r\n     *\r\n     *     var hmac = CryptoJS.HmacMD5(message, key);\r\n     */\r\n    C.HmacMD5 = Hasher._createHmacHelper(MD5);\r\n}(Math));\r\n\n/*\r\nCryptoJS v3.1.2\r\ncode.google.com/p/crypto-js\r\n(c) 2009-2013 by Jeff Mott. All rights reserved.\r\ncode.google.com/p/crypto-js/wiki/License\r\n*/\r\n(function () {\r\n    // Shortcuts\r\n    var C = CryptoJS;\r\n    var C_lib = C.lib;\r\n    var Base = C_lib.Base;\r\n    var WordArray = C_lib.WordArray;\r\n    var C_algo = C.algo;\r\n    var SHA1 = C_algo.SHA1;\r\n    var HMAC = C_algo.HMAC;\r\n\r\n    /**\r\n     * Password-Based Key Derivation Function 2 algorithm.\r\n     */\r\n    var PBKDF2 = C_algo.PBKDF2 = Base.extend({\r\n        /**\r\n         * Configuration options.\r\n         *\r\n         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\r\n         * @property {Hasher} hasher The hasher to use. Default: SHA1\r\n         * @property {number} iterations The number of iterations to perform. Default: 1\r\n         */\r\n        cfg: Base.extend({\r\n            keySize: 128/32,\r\n            hasher: SHA1,\r\n            iterations: 1\r\n        }),\r\n\r\n        /**\r\n         * Initializes a newly created key derivation function.\r\n         *\r\n         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\r\n         *\r\n         * @example\r\n         *\r\n         *     var kdf = CryptoJS.algo.PBKDF2.create();\r\n         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });\r\n         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });\r\n         */\r\n        init: function (cfg) {\r\n            this.cfg = this.cfg.extend(cfg);\r\n        },\r\n\r\n        /**\r\n         * Computes the Password-Based Key Derivation Function 2.\r\n         *\r\n         * @param {WordArray|string} password The password.\r\n         * @param {WordArray|string} salt A salt.\r\n         *\r\n         * @return {WordArray} The derived key.\r\n         *\r\n         * @example\r\n         *\r\n         *     var key = kdf.compute(password, salt);\r\n         */\r\n        compute: function (password, salt) {\r\n            // Shortcut\r\n            var cfg = this.cfg;\r\n\r\n            // Init HMAC\r\n            var hmac = HMAC.create(cfg.hasher, password);\r\n\r\n            // Initial values\r\n            var derivedKey = WordArray.create();\r\n            var blockIndex = WordArray.create([0x00000001]);\r\n\r\n            // Shortcuts\r\n            var derivedKeyWords = derivedKey.words;\r\n            var blockIndexWords = blockIndex.words;\r\n            var keySize = cfg.keySize;\r\n            var iterations = cfg.iterations;\r\n\r\n            // Generate key\r\n            while (derivedKeyWords.length < keySize) {\r\n                var block = hmac.update(salt).finalize(blockIndex);\r\n                hmac.reset();\r\n\r\n                // Shortcuts\r\n                var blockWords = block.words;\r\n                var blockWordsLength = blockWords.length;\r\n\r\n                // Iterations\r\n                var intermediate = block;\r\n                for (var i = 1; i < iterations; i++) {\r\n                    intermediate = hmac.finalize(intermediate);\r\n                    hmac.reset();\r\n\r\n                    // Shortcut\r\n                    var intermediateWords = intermediate.words;\r\n\r\n                    // XOR intermediate with block\r\n                    for (var j = 0; j < blockWordsLength; j++) {\r\n                        blockWords[j] ^= intermediateWords[j];\r\n                    }\r\n                }\r\n\r\n                derivedKey.concat(block);\r\n                blockIndexWords[0]++;\r\n            }\r\n            derivedKey.sigBytes = keySize * 4;\r\n\r\n            return derivedKey;\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Computes the Password-Based Key Derivation Function 2.\r\n     *\r\n     * @param {WordArray|string} password The password.\r\n     * @param {WordArray|string} salt A salt.\r\n     * @param {Object} cfg (Optional) The configuration options to use for this computation.\r\n     *\r\n     * @return {WordArray} The derived key.\r\n     *\r\n     * @static\r\n     *\r\n     * @example\r\n     *\r\n     *     var key = CryptoJS.PBKDF2(password, salt);\r\n     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8 });\r\n     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8, iterations: 1000 });\r\n     */\r\n    C.PBKDF2 = function (password, salt, cfg) {\r\n        return PBKDF2.create(cfg).compute(password, salt);\r\n    };\r\n}());\r\n\n(function () {\r\n    // Shortcuts\r\n    var C = CryptoJS;\r\n    var C_lib = C.lib;\r\n    var WordArray = C_lib.WordArray;\r\n    var Hasher = C_lib.Hasher;\r\n    var C_algo = C.algo;\r\n\r\n    // Reusable object\r\n    var W = [];\r\n\r\n    /**\r\n     * SHA-1 hash algorithm.\r\n     */\r\n    var SHA1 = C_algo.SHA1 = Hasher.extend({\r\n        _doReset: function () {\r\n            this._hash = new WordArray.init([\r\n                0x67452301, 0xefcdab89,\r\n                0x98badcfe, 0x10325476,\r\n                0xc3d2e1f0\r\n            ]);\r\n        },\r\n\r\n        _doProcessBlock: function (M, offset) {\r\n            // Shortcut\r\n            var H = this._hash.words;\r\n\r\n            // Working variables\r\n            var a = H[0];\r\n            var b = H[1];\r\n            var c = H[2];\r\n            var d = H[3];\r\n            var e = H[4];\r\n\r\n            // Computation\r\n            for (var i = 0; i < 80; i++) {\r\n                if (i < 16) {\r\n                    W[i] = M[offset + i] | 0;\r\n                } else {\r\n                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n                    W[i] = (n << 1) | (n >>> 31);\r\n                }\r\n\r\n                var t = ((a << 5) | (a >>> 27)) + e + W[i];\r\n                if (i < 20) {\r\n                    t += ((b & c) | (~b & d)) + 0x5a827999;\r\n                } else if (i < 40) {\r\n                    t += (b ^ c ^ d) + 0x6ed9eba1;\r\n                } else if (i < 60) {\r\n                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\r\n                } else /* if (i < 80) */ {\r\n                    t += (b ^ c ^ d) - 0x359d3e2a;\r\n                }\r\n\r\n                e = d;\r\n                d = c;\r\n                c = (b << 30) | (b >>> 2);\r\n                b = a;\r\n                a = t;\r\n            }\r\n\r\n            // Intermediate hash value\r\n            H[0] = (H[0] + a) | 0;\r\n            H[1] = (H[1] + b) | 0;\r\n            H[2] = (H[2] + c) | 0;\r\n            H[3] = (H[3] + d) | 0;\r\n            H[4] = (H[4] + e) | 0;\r\n        },\r\n\r\n        _doFinalize: function () {\r\n            // Shortcuts\r\n            var data = this._data;\r\n            var dataWords = data.words;\r\n\r\n            var nBitsTotal = this._nDataBytes * 8;\r\n            var nBitsLeft = data.sigBytes * 8;\r\n\r\n            // Add padding\r\n            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n            data.sigBytes = dataWords.length * 4;\r\n\r\n            // Hash final blocks\r\n            this._process();\r\n\r\n            // Return final computed hash\r\n            return this._hash;\r\n        },\r\n\r\n        clone: function () {\r\n            var clone = Hasher.clone.call(this);\r\n            clone._hash = this._hash.clone();\r\n\r\n            return clone;\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Shortcut function to the hasher's object interface.\r\n     *\r\n     * @param {WordArray|string} message The message to hash.\r\n     *\r\n     * @return {WordArray} The hash.\r\n     *\r\n     * @static\r\n     *\r\n     * @example\r\n     *\r\n     *     var hash = CryptoJS.SHA1('message');\r\n     *     var hash = CryptoJS.SHA1(wordArray);\r\n     */\r\n    C.SHA1 = Hasher._createHelper(SHA1);\r\n\r\n    /**\r\n     * Shortcut function to the HMAC's object interface.\r\n     *\r\n     * @param {WordArray|string} message The message to hash.\r\n     * @param {WordArray|string} key The secret key.\r\n     *\r\n     * @return {WordArray} The HMAC.\r\n     *\r\n     * @static\r\n     *\r\n     * @example\r\n     *\r\n     *     var hmac = CryptoJS.HmacSHA1(message, key);\r\n     */\r\n    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\r\n}());\r\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS = CryptoJS || function(h, s) {\n\t\tvar f = {}, t = f.lib = {}, g = function() {}, j = t.Base = {\n\t\t\t\textend: function(a) {\n\t\t\t\t\tg.prototype = this;\n\t\t\t\t\tvar c = new g;\n\t\t\t\t\ta && c.mixIn(a);\n\t\t\t\t\tc.hasOwnProperty(\"init\") || (c.init = function() {\n\t\t\t\t\t\tc.$super.init.apply(this, arguments)\n\t\t\t\t\t});\n\t\t\t\t\tc.init.prototype = c;\n\t\t\t\t\tc.$super = this;\n\t\t\t\t\treturn c\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\tvar a = this.extend();\n\t\t\t\t\ta.init.apply(a, arguments);\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\tinit: function() {},\n\t\t\t\tmixIn: function(a) {\n\t\t\t\t\tfor (var c in a) a.hasOwnProperty(c) && (this[c] = a[c]);\n\t\t\t\t\ta.hasOwnProperty(\"toString\") && (this.toString = a.toString)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\treturn this.init.prototype.extend(this)\n\t\t\t\t}\n\t\t\t},\n\t\t\tq = t.WordArray = j.extend({\n\t\t\t\tinit: function(a, c) {\n\t\t\t\t\ta = this.words = a || [];\n\t\t\t\t\tthis.sigBytes = c != s ? c : 4 * a.length\n\t\t\t\t},\n\t\t\t\ttoString: function(a) {\n\t\t\t\t\treturn (a || u).stringify(this)\n\t\t\t\t},\n\t\t\t\tconcat: function(a) {\n\t\t\t\t\tvar c = this.words,\n\t\t\t\t\t\td = a.words,\n\t\t\t\t\t\tb = this.sigBytes;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tthis.clamp();\n\t\t\t\t\tif (b % 4)\n\t\t\t\t\t\tfor (var e = 0; e < a; e++) c[b + e >>> 2] |= (d[e >>> 2] >>> 24 - 8 * (e % 4) & 255) << 24 - 8 * ((b + e) % 4);\n\t\t\t\t\telse if (65535 < d.length)\n\t\t\t\t\t\tfor (e = 0; e < a; e += 4) c[b + e >>> 2] = d[e >>> 2];\n\t\t\t\t\telse c.push.apply(c, d);\n\t\t\t\t\tthis.sigBytes += a;\n\t\t\t\t\treturn this\n\t\t\t\t},\n\t\t\t\tclamp: function() {\n\t\t\t\t\tvar a = this.words,\n\t\t\t\t\t\tc = this.sigBytes;\n\t\t\t\t\ta[c >>> 2] &= 4294967295 <<\n\t\t\t\t\t\t32 - 8 * (c % 4);\n\t\t\t\t\ta.length = h.ceil(c / 4)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\tvar a = j.clone.call(this);\n\t\t\t\t\ta.words = this.words.slice(0);\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\trandom: function(a) {\n\t\t\t\t\tfor (var c = [], d = 0; d < a; d += 4) c.push(4294967296 * h.random() | 0);\n\t\t\t\t\treturn new q.init(c, a)\n\t\t\t\t}\n\t\t\t}),\n\t\t\tv = f.enc = {}, u = v.Hex = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\tvar c = a.words;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tfor (var d = [], b = 0; b < a; b++) {\n\t\t\t\t\t\tvar e = c[b >>> 2] >>> 24 - 8 * (b % 4) & 255;\n\t\t\t\t\t\td.push((e >>> 4).toString(16));\n\t\t\t\t\t\td.push((e & 15).toString(16))\n\t\t\t\t\t}\n\t\t\t\t\treturn d.join(\"\")\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\tfor (var c = a.length, d = [], b = 0; b < c; b += 2) d[b >>> 3] |= parseInt(a.substr(b,\n\t\t\t\t\t\t2), 16) << 24 - 4 * (b % 8);\n\t\t\t\t\treturn new q.init(d, c / 2)\n\t\t\t\t}\n\t\t\t}, k = v.Latin1 = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\tvar c = a.words;\n\t\t\t\t\ta = a.sigBytes;\n\t\t\t\t\tfor (var d = [], b = 0; b < a; b++) d.push(String.fromCharCode(c[b >>> 2] >>> 24 - 8 * (b % 4) & 255));\n\t\t\t\t\treturn d.join(\"\")\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\tfor (var c = a.length, d = [], b = 0; b < c; b++) d[b >>> 2] |= (a.charCodeAt(b) & 255) << 24 - 8 * (b % 4);\n\t\t\t\t\treturn new q.init(d, c)\n\t\t\t\t}\n\t\t\t}, l = v.Utf8 = {\n\t\t\t\tstringify: function(a) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn decodeURIComponent(escape(k.stringify(a)))\n\t\t\t\t\t} catch (c) {\n\t\t\t\t\t\tthrow Error(\"Malformed UTF-8 data\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparse: function(a) {\n\t\t\t\t\treturn k.parse(unescape(encodeURIComponent(a)))\n\t\t\t\t}\n\t\t\t},\n\t\t\tx = t.BufferedBlockAlgorithm = j.extend({\n\t\t\t\treset: function() {\n\t\t\t\t\tthis._data = new q.init;\n\t\t\t\t\tthis._nDataBytes = 0\n\t\t\t\t},\n\t\t\t\t_append: function(a) {\n\t\t\t\t\t\"string\" == typeof a && (a = l.parse(a));\n\t\t\t\t\tthis._data.concat(a);\n\t\t\t\t\tthis._nDataBytes += a.sigBytes\n\t\t\t\t},\n\t\t\t\t_process: function(a) {\n\t\t\t\t\tvar c = this._data,\n\t\t\t\t\t\td = c.words,\n\t\t\t\t\t\tb = c.sigBytes,\n\t\t\t\t\t\te = this.blockSize,\n\t\t\t\t\t\tf = b / (4 * e),\n\t\t\t\t\t\tf = a ? h.ceil(f) : h.max((f | 0) - this._minBufferSize, 0);\n\t\t\t\t\ta = f * e;\n\t\t\t\t\tb = h.min(4 * a, b);\n\t\t\t\t\tif (a) {\n\t\t\t\t\t\tfor (var m = 0; m < a; m += e) this._doProcessBlock(d, m);\n\t\t\t\t\t\tm = d.splice(0, a);\n\t\t\t\t\t\tc.sigBytes -= b\n\t\t\t\t\t}\n\t\t\t\t\treturn new q.init(m, b)\n\t\t\t\t},\n\t\t\t\tclone: function() {\n\t\t\t\t\tvar a = j.clone.call(this);\n\t\t\t\t\ta._data = this._data.clone();\n\t\t\t\t\treturn a\n\t\t\t\t},\n\t\t\t\t_minBufferSize: 0\n\t\t\t});\n\t\tt.Hasher = x.extend({\n\t\t\tcfg: j.extend(),\n\t\t\tinit: function(a) {\n\t\t\t\tthis.cfg = this.cfg.extend(a);\n\t\t\t\tthis.reset()\n\t\t\t},\n\t\t\treset: function() {\n\t\t\t\tx.reset.call(this);\n\t\t\t\tthis._doReset()\n\t\t\t},\n\t\t\tupdate: function(a) {\n\t\t\t\tthis._append(a);\n\t\t\t\tthis._process();\n\t\t\t\treturn this\n\t\t\t},\n\t\t\tfinalize: function(a) {\n\t\t\t\ta && this._append(a);\n\t\t\t\treturn this._doFinalize()\n\t\t\t},\n\t\t\tblockSize: 16,\n\t\t\t_createHelper: function(a) {\n\t\t\t\treturn function(c, d) {\n\t\t\t\t\treturn (new a.init(d)).finalize(c)\n\t\t\t\t}\n\t\t\t},\n\t\t\t_createHmacHelper: function(a) {\n\t\t\t\treturn function(c, d) {\n\t\t\t\t\treturn (new w.HMAC.init(a,\n\t\t\t\t\t\td)).finalize(c)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tvar w = f.algo = {};\n\t\treturn f\n\t}(Math);\n(function(h) {\n\tfor (var s = CryptoJS, f = s.lib, t = f.WordArray, g = f.Hasher, f = s.algo, j = [], q = [], v = function(a) {\n\t\t\treturn 4294967296 * (a - (a | 0)) | 0\n\t\t}, u = 2, k = 0; 64 > k;) {\n\t\tvar l;\n\t\ta: {\n\t\t\tl = u;\n\t\t\tfor (var x = h.sqrt(l), w = 2; w <= x; w++)\n\t\t\t\tif (!(l % w)) {\n\t\t\t\t\tl = !1;\n\t\t\t\t\tbreak a\n\t\t\t\t}\n\t\t\tl = !0\n\t\t}\n\t\tl && (8 > k && (j[k] = v(h.pow(u, 0.5))), q[k] = v(h.pow(u, 1 / 3)), k++);\n\t\tu++\n\t}\n\tvar a = [],\n\t\tf = f.SHA256 = g.extend({\n\t\t\t_doReset: function() {\n\t\t\t\tthis._hash = new t.init(j.slice(0))\n\t\t\t},\n\t\t\t_doProcessBlock: function(c, d) {\n\t\t\t\tfor (var b = this._hash.words, e = b[0], f = b[1], m = b[2], h = b[3], p = b[4], j = b[5], k = b[6], l = b[7], n = 0; 64 > n; n++) {\n\t\t\t\t\tif (16 > n) a[n] =\n\t\t\t\t\t\tc[d + n] | 0;\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar r = a[n - 15],\n\t\t\t\t\t\t\tg = a[n - 2];\n\t\t\t\t\t\ta[n] = ((r << 25 | r >>> 7) ^ (r << 14 | r >>> 18) ^ r >>> 3) + a[n - 7] + ((g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10) + a[n - 16]\n\t\t\t\t\t}\n\t\t\t\t\tr = l + ((p << 26 | p >>> 6) ^ (p << 21 | p >>> 11) ^ (p << 7 | p >>> 25)) + (p & j ^ ~p & k) + q[n] + a[n];\n\t\t\t\t\tg = ((e << 30 | e >>> 2) ^ (e << 19 | e >>> 13) ^ (e << 10 | e >>> 22)) + (e & f ^ e & m ^ f & m);\n\t\t\t\t\tl = k;\n\t\t\t\t\tk = j;\n\t\t\t\t\tj = p;\n\t\t\t\t\tp = h + r | 0;\n\t\t\t\t\th = m;\n\t\t\t\t\tm = f;\n\t\t\t\t\tf = e;\n\t\t\t\t\te = r + g | 0\n\t\t\t\t}\n\t\t\t\tb[0] = b[0] + e | 0;\n\t\t\t\tb[1] = b[1] + f | 0;\n\t\t\t\tb[2] = b[2] + m | 0;\n\t\t\t\tb[3] = b[3] + h | 0;\n\t\t\t\tb[4] = b[4] + p | 0;\n\t\t\t\tb[5] = b[5] + j | 0;\n\t\t\t\tb[6] = b[6] + k | 0;\n\t\t\t\tb[7] = b[7] + l | 0\n\t\t\t},\n\t\t\t_doFinalize: function() {\n\t\t\t\tvar a = this._data,\n\t\t\t\t\td = a.words,\n\t\t\t\t\tb = 8 * this._nDataBytes,\n\t\t\t\t\te = 8 * a.sigBytes;\n\t\t\t\td[e >>> 5] |= 128 << 24 - e % 32;\n\t\t\t\td[(e + 64 >>> 9 << 4) + 14] = h.floor(b / 4294967296);\n\t\t\t\td[(e + 64 >>> 9 << 4) + 15] = b;\n\t\t\t\ta.sigBytes = 4 * d.length;\n\t\t\t\tthis._process();\n\t\t\t\treturn this._hash\n\t\t\t},\n\t\t\tclone: function() {\n\t\t\t\tvar a = g.clone.call(this);\n\t\t\t\ta._hash = this._hash.clone();\n\t\t\t\treturn a\n\t\t\t}\n\t\t});\n\ts.SHA256 = g._createHelper(f);\n\ts.HmacSHA256 = g._createHmacHelper(f)\n})(Math);"],"file":"lib-yO-t6E.js","sourceRoot":"/source/"}